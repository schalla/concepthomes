//compiled: Tue Mar  1 10:55:16 2011
/*

 jQuery JavaScript Library v1.4.2
 http://jquery.com/

 Copyright 2010, John Resig
 Dual licensed under the MIT or GPL Version 2 licenses.
 http://jquery.org/license

 Includes Sizzle.js
 http://sizzlejs.com/
 Copyright 2010, The Dojo Foundation
 Released under the MIT, BSD, and GPL Licenses.

 Date: Sat Feb 13 22:33:48 2010 -0500
*/
(function(p,H){function w(){if(!f.isReady){try{J.documentElement.doScroll("left")}catch(a){setTimeout(w,1);return}f.ready()}}function L(a,d){d.src?f.ajax({url:d.src,async:false,dataType:"script"}):f.globalEval(d.text||d.textContent||d.innerHTML||"");d.parentNode&&d.parentNode.removeChild(d)}function S(a,d,g,j,i,o){var q=a.length;if(typeof d==="object"){for(var B in d)S(a,B,d[B],j,i,g);return a}if(g!==H){j=!o&&j&&f.isFunction(g);for(B=0;B<q;B++)i(a[B],d,j?g.call(a[B],B,i(a[B],d)):g,o);return a}return q?
i(a[0],d):H}function la(){return(new Date).getTime()}function oa(){return false}function ta(){return true}function ja(a,d,g){g[0].type=a;return f.event.handle.apply(d,g)}function Aa(a){var d,g=[],j=[],i=arguments,o,q,B,x,C,K;q=f.data(this,"events");if(!(a.liveFired===this||!q||!q.live||a.button&&a.type==="click")){a.liveFired=this;var U=q.live.slice(0);for(x=0;x<U.length;x++){q=U[x];q.origType.replace(h,"")===a.type?j.push(q.selector):U.splice(x--,1)}o=f(a.target).closest(j,a.currentTarget);C=0;for(K=
o.length;C<K;C++)for(x=0;x<U.length;x++){q=U[x];if(o[C].selector===q.selector){B=o[C].elem;j=null;if(q.preType==="mouseenter"||q.preType==="mouseleave")j=f(a.relatedTarget).closest(q.selector)[0];if(!j||j!==B)g.push({elem:B,handleObj:q})}}C=0;for(K=g.length;C<K;C++){o=g[C];a.currentTarget=o.elem;a.data=o.handleObj.data;a.handleObj=o.handleObj;if(o.handleObj.origHandler.apply(o.elem,i)===false){d=false;break}}return d}}function Ha(a,d){return"live."+(a&&a!=="*"?a+".":"")+d.replace(/\./g,"`").replace(/ /g,
"&")}function t(a,d){var g=0;d.each(function(){if(this.nodeName===(a[g]&&a[g].nodeName)){var j=f.data(a[g++]),i=f.data(this,j);if(j=j&&j.events){delete i.handle;i.events={};for(var o in j)for(var q in j[o])f.event.add(this,o,j[o][q],j[o][q].data)}}})}function F(a,d,g){var j,i,o;d=d&&d[0]?d[0].ownerDocument||d[0]:J;if(a.length===1&&typeof a[0]==="string"&&a[0].length<512&&d===J&&!Ia.test(a[0])&&(f.support.checkClone||!ya.test(a[0]))){i=true;if(o=f.fragments[a[0]])if(o!==1)j=o}if(!j){j=d.createDocumentFragment();
f.clean(a,d,j,g)}if(i)f.fragments[a[0]]=o?j:1;return{fragment:j,cacheable:i}}function M(a,d){var g={};f.each(rb.concat.apply([],rb.slice(0,d)),function(){g[this]=a});return g}function R(a){return"scrollTo"in a&&a.document?a:a.nodeType===9?a.defaultView||a.parentWindow:false}var f=function(a,d){return new f.fn.init(a,d)},ma=p.jQuery,Ca=p.$,J=p.document,Ma,hb=/^[^<]*(<[\w\W]+>)[^>]*$|^#([\w-]+)$/,N=/^.[^:#\[\.,]*$/,ib=/\S/,jb=/^(\s|\u00A0)+|(\s|\u00A0)+$/g,kb=/^<(\w+)\s*\/?>(?:<\/\1>)?$/,Na=navigator.userAgent,
Za=false,Oa=[],qa,Ta=Object.prototype.toString,Ua=Object.prototype.hasOwnProperty,Va=Array.prototype.push,Pa=Array.prototype.slice,$a=Array.prototype.indexOf;f.fn=f.prototype={init:function(a,d){var g,j,i;if(!a)return this;if(a.nodeType){this.context=this[0]=a;this.length=1;return this}if(a==="body"&&!d){this.context=J;this[0]=J.body;this.selector="body";this.length=1;return this}if(typeof a==="string")if((g=hb.exec(a))&&(g[1]||!d))if(g[1]){i=d?d.ownerDocument||d:J;if(j=kb.exec(a))if(f.isPlainObject(d)){a=
[J.createElement(j[1])];f.fn.attr.call(a,d,true)}else a=[i.createElement(j[1])];else{j=F([g[1]],[i]);a=(j.cacheable?j.fragment.cloneNode(true):j.fragment).childNodes}return f.merge(this,a)}else{if(j=J.getElementById(g[2])){if(j.id!==g[2])return Ma.find(a);this.length=1;this[0]=j}this.context=J;this.selector=a;return this}else if(!d&&/^\w+$/.test(a)){this.selector=a;this.context=J;a=J.getElementsByTagName(a);return f.merge(this,a)}else return!d||d.jquery?(d||Ma).find(a):f(d).find(a);else if(f.isFunction(a))return Ma.ready(a);
if(a.selector!==H){this.selector=a.selector;this.context=a.context}return f.makeArray(a,this)},selector:"",jquery:"1.4.2",length:0,size:function(){return this.length},toArray:function(){return Pa.call(this,0)},get:function(a){return a==null?this.toArray():a<0?this.slice(a)[0]:this[a]},pushStack:function(a,d,g){var j=f();f.isArray(a)?Va.apply(j,a):f.merge(j,a);j.prevObject=this;j.context=this.context;if(d==="find")j.selector=this.selector+(this.selector?" ":"")+g;else if(d)j.selector=this.selector+
"."+d+"("+g+")";return j},each:function(a,d){return f.each(this,a,d)},ready:function(a){f.bindReady();if(f.isReady)a.call(J,f);else Oa&&Oa.push(a);return this},eq:function(a){return a===-1?this.slice(a):this.slice(a,+a+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},slice:function(){return this.pushStack(Pa.apply(this,arguments),"slice",Pa.call(arguments).join(","))},map:function(a){return this.pushStack(f.map(this,function(d,g){return a.call(d,g,d)}))},end:function(){return this.prevObject||
f(null)},push:Va,sort:[].sort,splice:[].splice};f.fn.init.prototype=f.fn;f.extend=f.fn.extend=function(){var a=arguments[0]||{},d=1,g=arguments.length,j=false,i,o,q,B;if(typeof a==="boolean"){j=a;a=arguments[1]||{};d=2}if(typeof a!=="object"&&!f.isFunction(a))a={};if(g===d){a=this;--d}for(;d<g;d++)if((i=arguments[d])!=null)for(o in i){q=a[o];B=i[o];if(a!==B)if(j&&B&&(f.isPlainObject(B)||f.isArray(B))){q=q&&(f.isPlainObject(q)||f.isArray(q))?q:f.isArray(B)?[]:{};a[o]=f.extend(j,q,B)}else if(B!==H)a[o]=
B}return a};f.extend({noConflict:function(a){p.$=Ca;if(a)p.jQuery=ma;return f},isReady:false,ready:function(){if(!f.isReady){if(!J.body)return setTimeout(f.ready,13);f.isReady=true;if(Oa){for(var a,d=0;a=Oa[d++];)a.call(J,f);Oa=null}f.fn.triggerHandler&&f(J).triggerHandler("ready")}},bindReady:function(){if(!Za){Za=true;if(J.readyState==="complete")return f.ready();if(J.addEventListener){J.addEventListener("DOMContentLoaded",qa,false);p.addEventListener("load",f.ready,false)}else if(J.attachEvent){J.attachEvent("onreadystatechange",
qa);p.attachEvent("onload",f.ready);var a=false;try{a=p.frameElement==null}catch(d){}J.documentElement.doScroll&&a&&w()}}},isFunction:function(a){return Ta.call(a)==="[object Function]"},isArray:function(a){return Ta.call(a)==="[object Array]"},isPlainObject:function(a){if(!a||Ta.call(a)!=="[object Object]"||a.nodeType||a.setInterval)return false;if(a.constructor&&!Ua.call(a,"constructor")&&!Ua.call(a.constructor.prototype,"isPrototypeOf"))return false;for(var d in a);return d===H||Ua.call(a,d)},
isEmptyObject:function(a){for(var d in a)return false;return true},error:function(a){throw a;},parseJSON:function(a){if(typeof a!=="string"||!a)return null;a=f.trim(a);if(/^[\],:{}\s]*$/.test(a.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return p.JSON&&p.JSON.parse?p.JSON.parse(a):(new Function("return "+a))();else f.error("Invalid JSON: "+a)},noop:function(){},globalEval:function(a){if(a&&
ib.test(a)){var d=J.getElementsByTagName("head")[0]||J.documentElement,g=J.createElement("script");g.type="text/javascript";if(f.support.scriptEval)g.appendChild(J.createTextNode(a));else g.text=a;d.insertBefore(g,d.firstChild);d.removeChild(g)}},nodeName:function(a,d){return a.nodeName&&a.nodeName.toUpperCase()===d.toUpperCase()},each:function(a,d,g){var j,i=0,o=a.length,q=o===H||f.isFunction(a);if(g)if(q)for(j in a){if(d.apply(a[j],g)===false)break}else for(;i<o;){if(d.apply(a[i++],g)===false)break}else if(q)for(j in a){if(d.call(a[j],
j,a[j])===false)break}else for(g=a[0];i<o&&d.call(g,i,g)!==false;g=a[++i]);return a},trim:function(a){return(a||"").replace(jb,"")},makeArray:function(a,d){var g=d||[];if(a!=null)a.length==null||typeof a==="string"||f.isFunction(a)||typeof a!=="function"&&a.setInterval?Va.call(g,a):f.merge(g,a);return g},inArray:function(a,d){if(d.indexOf)return d.indexOf(a);for(var g=0,j=d.length;g<j;g++)if(d[g]===a)return g;return-1},merge:function(a,d){var g=a.length,j=0;if(typeof d.length==="number")for(var i=
d.length;j<i;j++)a[g++]=d[j];else for(;d[j]!==H;)a[g++]=d[j++];a.length=g;return a},grep:function(a,d,g){for(var j=[],i=0,o=a.length;i<o;i++)!g!==!d(a[i],i)&&j.push(a[i]);return j},map:function(a,d,g){for(var j=[],i,o=0,q=a.length;o<q;o++){i=d(a[o],o,g);if(i!=null)j[j.length]=i}return j.concat.apply([],j)},guid:1,proxy:function(a,d,g){if(arguments.length===2)if(typeof d==="string"){g=a;a=g[d];d=H}else if(d&&!f.isFunction(d)){g=d;d=H}if(!d&&a)d=function(){return a.apply(g||this,arguments)};if(a)d.guid=
a.guid=a.guid||d.guid||f.guid++;return d},uaMatch:function(a){a=a.toLowerCase();a=/(webkit)[ \/]([\w.]+)/.exec(a)||/(opera)(?:.*version)?[ \/]([\w.]+)/.exec(a)||/(msie) ([\w.]+)/.exec(a)||!/compatible/.test(a)&&/(mozilla)(?:.*? rv:([\w.]+))?/.exec(a)||[];return{browser:a[1]||"",version:a[2]||"0"}},browser:{}});Na=f.uaMatch(Na);if(Na.browser){f.browser[Na.browser]=true;f.browser.version=Na.version}if(f.browser.webkit)f.browser.safari=true;if($a)f.inArray=function(a,d){return $a.call(d,a)};Ma=f(J);
if(J.addEventListener)qa=function(){J.removeEventListener("DOMContentLoaded",qa,false);f.ready()};else if(J.attachEvent)qa=function(){if(J.readyState==="complete"){J.detachEvent("onreadystatechange",qa);f.ready()}};(function(){f.support={};var a=J.documentElement,d=J.createElement("script"),g=J.createElement("div"),j="script"+la();g.style.display="none";g.innerHTML="   <link/><table></table><a href='/a' style='color:red;float:left;opacity:.55;'>a</a><input type='checkbox'/>";var i=g.getElementsByTagName("*"),
o=g.getElementsByTagName("a")[0];if(!(!i||!i.length||!o)){f.support={leadingWhitespace:g.firstChild.nodeType===3,tbody:!g.getElementsByTagName("tbody").length,htmlSerialize:!!g.getElementsByTagName("link").length,style:/red/.test(o.getAttribute("style")),hrefNormalized:o.getAttribute("href")==="/a",opacity:/^0.55$/.test(o.style.opacity),cssFloat:!!o.style.cssFloat,checkOn:g.getElementsByTagName("input")[0].value==="on",optSelected:J.createElement("select").appendChild(J.createElement("option")).selected,
parentNode:g.removeChild(g.appendChild(J.createElement("div"))).parentNode===null,deleteExpando:true,checkClone:false,scriptEval:false,noCloneEvent:true,boxModel:null};d.type="text/javascript";try{d.appendChild(J.createTextNode("window."+j+"=1;"))}catch(q){}a.insertBefore(d,a.firstChild);if(p[j]){f.support.scriptEval=true;delete p[j]}try{delete d.test}catch(B){f.support.deleteExpando=false}a.removeChild(d);if(g.attachEvent&&g.fireEvent){g.attachEvent("onclick",function x(){f.support.noCloneEvent=
false;g.detachEvent("onclick",x)});g.cloneNode(true).fireEvent("onclick")}g=J.createElement("div");g.innerHTML="<input type='radio' name='radiotest' checked='checked'/>";a=J.createDocumentFragment();a.appendChild(g.firstChild);f.support.checkClone=a.cloneNode(true).cloneNode(true).lastChild.checked;f(function(){var x=J.createElement("div");x.style.width=x.style.paddingLeft="1px";J.body.appendChild(x);f.boxModel=f.support.boxModel=x.offsetWidth===2;J.body.removeChild(x).style.display="none"});a=function(x){var C=
J.createElement("div");x="on"+x;var K=x in C;if(!K){C.setAttribute(x,"return;");K=typeof C[x]==="function"}return K};f.support.submitBubbles=a("submit");f.support.changeBubbles=a("change");a=d=g=i=o=null}})();f.props={"for":"htmlFor","class":"className",readonly:"readOnly",maxlength:"maxLength",cellspacing:"cellSpacing",rowspan:"rowSpan",colspan:"colSpan",tabindex:"tabIndex",usemap:"useMap",frameborder:"frameBorder"};var Ea="jQuery"+la(),lb=0,ua={};f.extend({cache:{},expando:Ea,noData:{embed:true,
object:true,applet:true},data:function(a,d,g){if(!(a.nodeName&&f.noData[a.nodeName.toLowerCase()])){a=a==p?ua:a;var j=a[Ea],i=f.cache;if(!j&&typeof d==="string"&&g===H)return null;j||(j=++lb);if(typeof d==="object"){a[Ea]=j;i[j]=f.extend(true,{},d)}else if(!i[j]){a[Ea]=j;i[j]={}}a=i[j];if(g!==H)a[d]=g;return typeof d==="string"?a[d]:a}},removeData:function(a,d){if(!(a.nodeName&&f.noData[a.nodeName.toLowerCase()])){a=a==p?ua:a;var g=a[Ea],j=f.cache,i=j[g];if(d){if(i){delete i[d];f.isEmptyObject(i)&&
f.removeData(a)}}else{if(f.support.deleteExpando)delete a[f.expando];else a.removeAttribute&&a.removeAttribute(f.expando);delete j[g]}}}});f.fn.extend({data:function(a,d){if(typeof a==="undefined"&&this.length)return f.data(this[0]);else if(typeof a==="object")return this.each(function(){f.data(this,a)});var g=a.split(".");g[1]=g[1]?"."+g[1]:"";if(d===H){var j=this.triggerHandler("getData"+g[1]+"!",[g[0]]);if(j===H&&this.length)j=f.data(this[0],a);return j===H&&g[1]?this.data(g[0]):j}else return this.trigger("setData"+
g[1]+"!",[g[0],d]).each(function(){f.data(this,a,d)})},removeData:function(a){return this.each(function(){f.removeData(this,a)})}});f.extend({queue:function(a,d,g){if(a){d=(d||"fx")+"queue";var j=f.data(a,d);if(!g)return j||[];if(!j||f.isArray(g))j=f.data(a,d,f.makeArray(g));else j.push(g);return j}},dequeue:function(a,d){d=d||"fx";var g=f.queue(a,d),j=g.shift();if(j==="inprogress")j=g.shift();if(j){d==="fx"&&g.unshift("inprogress");j.call(a,function(){f.dequeue(a,d)})}}});f.fn.extend({queue:function(a,
d){if(typeof a!=="string"){d=a;a="fx"}if(d===H)return f.queue(this[0],a);return this.each(function(){var g=f.queue(this,a,d);a==="fx"&&g[0]!=="inprogress"&&f.dequeue(this,a)})},dequeue:function(a){return this.each(function(){f.dequeue(this,a)})},delay:function(a,d){a=f.fx?f.fx.speeds[a]||a:a;d=d||"fx";return this.queue(d,function(){var g=this;setTimeout(function(){f.dequeue(g,d)},a)})},clearQueue:function(a){return this.queue(a||"fx",[])}});var Wa=/[\n\t]/g,Qa=/\s+/,ab=/\r/g,mb=/href|src|style/,nb=
/(button|input)/i,b=/(button|input|object|select|textarea)/i,c=/^(a|area)$/i,e=/radio|checkbox/;f.fn.extend({attr:function(a,d){return S(this,a,d,true,f.attr)},removeAttr:function(a){return this.each(function(){f.attr(this,a,"");this.nodeType===1&&this.removeAttribute(a)})},addClass:function(a){if(f.isFunction(a))return this.each(function(C){var K=f(this);K.addClass(a.call(this,C,K.attr("class")))});if(a&&typeof a==="string")for(var d=(a||"").split(Qa),g=0,j=this.length;g<j;g++){var i=this[g];if(i.nodeType===
1)if(i.className){for(var o=" "+i.className+" ",q=i.className,B=0,x=d.length;B<x;B++)if(o.indexOf(" "+d[B]+" ")<0)q+=" "+d[B];i.className=f.trim(q)}else i.className=a}return this},removeClass:function(a){if(f.isFunction(a))return this.each(function(x){var C=f(this);C.removeClass(a.call(this,x,C.attr("class")))});if(a&&typeof a==="string"||a===H)for(var d=(a||"").split(Qa),g=0,j=this.length;g<j;g++){var i=this[g];if(i.nodeType===1&&i.className)if(a){for(var o=(" "+i.className+" ").replace(Wa," "),
q=0,B=d.length;q<B;q++)o=o.replace(" "+d[q]+" "," ");i.className=f.trim(o)}else i.className=""}return this},toggleClass:function(a,d){var g=typeof a,j=typeof d==="boolean";if(f.isFunction(a))return this.each(function(i){var o=f(this);o.toggleClass(a.call(this,i,o.attr("class"),d),d)});return this.each(function(){if(g==="string")for(var i,o=0,q=f(this),B=d,x=a.split(Qa);i=x[o++];){B=j?B:!q.hasClass(i);q[B?"addClass":"removeClass"](i)}else if(g==="undefined"||g==="boolean"){this.className&&f.data(this,
"__className__",this.className);this.className=this.className||a===false?"":f.data(this,"__className__")||""}})},hasClass:function(a){a=" "+a+" ";for(var d=0,g=this.length;d<g;d++)if((" "+this[d].className+" ").replace(Wa," ").indexOf(a)>-1)return true;return false},val:function(a){if(a===H){var d=this[0];if(d){if(f.nodeName(d,"option"))return(d.attributes.value||{}).specified?d.value:d.text;if(f.nodeName(d,"select")){var g=d.selectedIndex,j=[],i=d.options;d=d.type==="select-one";if(g<0)return null;
var o=d?g:0;for(g=d?g+1:i.length;o<g;o++){var q=i[o];if(q.selected){a=f(q).val();if(d)return a;j.push(a)}}return j}if(e.test(d.type)&&!f.support.checkOn)return d.getAttribute("value")===null?"on":d.value;return(d.value||"").replace(ab,"")}return H}var B=f.isFunction(a);return this.each(function(x){var C=f(this),K=a;if(this.nodeType===1){if(B)K=a.call(this,x,C.val());if(typeof K==="number")K+="";if(f.isArray(K)&&e.test(this.type))this.checked=f.inArray(C.val(),K)>=0;else if(f.nodeName(this,"select")){var U=
f.makeArray(K);f("option",this).each(function(){this.selected=f.inArray(f(this).val(),U)>=0});if(!U.length)this.selectedIndex=-1}else this.value=K}})}});f.extend({attrFn:{val:true,css:true,html:true,text:true,data:true,width:true,height:true,offset:true},attr:function(a,d,g,j){if(!a||a.nodeType===3||a.nodeType===8)return H;if(j&&d in f.attrFn)return f(a)[d](g);j=a.nodeType!==1||!f.isXMLDoc(a);var i=g!==H;d=j&&f.props[d]||d;if(a.nodeType===1){var o=mb.test(d);if(d in a&&j&&!o){if(i){d==="type"&&nb.test(a.nodeName)&&
a.parentNode&&f.error("type property can't be changed");a[d]=g}if(f.nodeName(a,"form")&&a.getAttributeNode(d))return a.getAttributeNode(d).nodeValue;if(d==="tabIndex")return(d=a.getAttributeNode("tabIndex"))&&d.specified?d.value:b.test(a.nodeName)||c.test(a.nodeName)&&a.href?0:H;return a[d]}if(!f.support.style&&j&&d==="style"){if(i)a.style.cssText=""+g;return a.style.cssText}i&&a.setAttribute(d,""+g);a=!f.support.hrefNormalized&&j&&o?a.getAttribute(d,2):a.getAttribute(d);return a===null?H:a}return f.style(a,
d,g)}});var h=/\.(.*)$/,k=function(a){return a.replace(/[^\w\s\.\|`]/g,function(d){return"\\"+d})};f.event={add:function(a,d,g,j){if(!(a.nodeType===3||a.nodeType===8)){if(a.setInterval&&a!==p&&!a.frameElement)a=p;var i,o;if(g.handler){i=g;g=i.handler}if(!g.guid)g.guid=f.guid++;if(o=f.data(a)){var q=o.events=o.events||{},B=o.handle;if(!B)o.handle=B=function(){return typeof f!=="undefined"&&!f.event.triggered?f.event.handle.apply(B.elem,arguments):H};B.elem=a;d=d.split(" ");for(var x,C=0,K;x=d[C++];){o=
i?f.extend({},i):{handler:g,data:j};if(x.indexOf(".")>-1){K=x.split(".");x=K.shift();o.namespace=K.slice(0).sort().join(".")}else{K=[];o.namespace=""}o.type=x;o.guid=g.guid;var U=q[x],Y=f.event.special[x]||{};if(!U){U=q[x]=[];if(!Y.setup||Y.setup.call(a,j,K,B)===false)if(a.addEventListener)a.addEventListener(x,B,false);else a.attachEvent&&a.attachEvent("on"+x,B)}if(Y.add){Y.add.call(a,o);if(!o.handler.guid)o.handler.guid=g.guid}U.push(o);f.event.global[x]=true}a=null}}},global:{},remove:function(a,
d,g,j){if(!(a.nodeType===3||a.nodeType===8)){var i,o=0,q,B,x,C,K,U,Y=f.data(a),ka=Y&&Y.events;if(Y&&ka){if(d&&d.type){g=d.handler;d=d.type}if(!d||typeof d==="string"&&d.charAt(0)==="."){d=d||"";for(i in ka)f.event.remove(a,i+d)}else{for(d=d.split(" ");i=d[o++];){C=i;q=i.indexOf(".")<0;B=[];if(!q){B=i.split(".");i=B.shift();x=RegExp("(^|\\.)"+f.map(B.slice(0).sort(),k).join("\\.(?:.*\\.)?")+"(\\.|$)")}if(K=ka[i])if(g){C=f.event.special[i]||{};for(ea=j||0;ea<K.length;ea++){U=K[ea];if(g.guid===U.guid){if(q||
x.test(U.namespace)){j==null&&K.splice(ea--,1);C.remove&&C.remove.call(a,U)}if(j!=null)break}}if(K.length===0||j!=null&&K.length===1){if(!C.teardown||C.teardown.call(a,B)===false)n(a,i,Y.handle);delete ka[i]}}else for(var ea=0;ea<K.length;ea++){U=K[ea];if(q||x.test(U.namespace)){f.event.remove(a,C,U.handler,ea);K.splice(ea--,1)}}}if(f.isEmptyObject(ka)){if(d=Y.handle)d.elem=null;delete Y.events;delete Y.handle;f.isEmptyObject(Y)&&f.removeData(a)}}}}},trigger:function(a,d,g,j){var i=a.type||a;if(!j){a=
typeof a==="object"?a[Ea]?a:f.extend(f.Event(i),a):f.Event(i);if(i.indexOf("!")>=0){a.type=i=i.slice(0,-1);a.exclusive=true}if(!g){a.stopPropagation();f.event.global[i]&&f.each(f.cache,function(){this.events&&this.events[i]&&f.event.trigger(a,d,this.handle.elem)})}if(!g||g.nodeType===3||g.nodeType===8)return H;a.result=H;a.target=g;d=f.makeArray(d);d.unshift(a)}a.currentTarget=g;(j=f.data(g,"handle"))&&j.apply(g,d);j=g.parentNode||g.ownerDocument;try{if(!(g&&g.nodeName&&f.noData[g.nodeName.toLowerCase()]))if(g["on"+
i]&&g["on"+i].apply(g,d)===false)a.result=false}catch(o){}if(!a.isPropagationStopped()&&j)f.event.trigger(a,d,j,true);else if(!a.isDefaultPrevented()){j=a.target;var q,B=f.nodeName(j,"a")&&i==="click",x=f.event.special[i]||{};if((!x._default||x._default.call(g,a)===false)&&!B&&!(j&&j.nodeName&&f.noData[j.nodeName.toLowerCase()])){try{if(j[i]){if(q=j["on"+i])j["on"+i]=null;f.event.triggered=true;j[i]()}}catch(C){}if(q)j["on"+i]=q;f.event.triggered=false}}},handle:function(a){var d,g,j,i;a=arguments[0]=
f.event.fix(a||p.event);a.currentTarget=this;d=a.type.indexOf(".")<0&&!a.exclusive;if(!d){g=a.type.split(".");a.type=g.shift();j=RegExp("(^|\\.)"+g.slice(0).sort().join("\\.(?:.*\\.)?")+"(\\.|$)")}i=f.data(this,"events");g=i[a.type];if(i&&g){g=g.slice(0);i=0;for(var o=g.length;i<o;i++){var q=g[i];if(d||j.test(q.namespace)){a.handler=q.handler;a.data=q.data;a.handleObj=q;q=q.handler.apply(this,arguments);if(q!==H){a.result=q;if(q===false){a.preventDefault();a.stopPropagation()}}if(a.isImmediatePropagationStopped())break}}}return a.result},
props:"altKey attrChange attrName bubbles button cancelable charCode clientX clientY ctrlKey currentTarget data detail eventPhase fromElement handler keyCode layerX layerY metaKey newValue offsetX offsetY originalTarget pageX pageY prevValue relatedNode relatedTarget screenX screenY shiftKey srcElement target toElement view wheelDelta which".split(" "),fix:function(a){if(a[Ea])return a;var d=a;a=f.Event(d);for(var g=this.props.length,j;g;){j=this.props[--g];a[j]=d[j]}if(!a.target)a.target=a.srcElement||
J;if(a.target.nodeType===3)a.target=a.target.parentNode;if(!a.relatedTarget&&a.fromElement)a.relatedTarget=a.fromElement===a.target?a.toElement:a.fromElement;if(a.pageX==null&&a.clientX!=null){d=J.documentElement;g=J.body;a.pageX=a.clientX+(d&&d.scrollLeft||g&&g.scrollLeft||0)-(d&&d.clientLeft||g&&g.clientLeft||0);a.pageY=a.clientY+(d&&d.scrollTop||g&&g.scrollTop||0)-(d&&d.clientTop||g&&g.clientTop||0)}if(!a.which&&(a.charCode||a.charCode===0?a.charCode:a.keyCode))a.which=a.charCode||a.keyCode;if(!a.metaKey&&
a.ctrlKey)a.metaKey=a.ctrlKey;if(!a.which&&a.button!==H)a.which=a.button&1?1:a.button&2?3:a.button&4?2:0;return a},guid:1E8,proxy:f.proxy,special:{ready:{setup:f.bindReady,teardown:f.noop},live:{add:function(a){f.event.add(this,a.origType,f.extend({},a,{handler:Aa}))},remove:function(a){var d=true,g=a.origType.replace(h,"");f.each(f.data(this,"events").live||[],function(){if(g===this.origType.replace(h,""))return d=false});d&&f.event.remove(this,a.origType,Aa)}},beforeunload:{setup:function(a,d,g){if(this.setInterval)this.onbeforeunload=
g;return false},teardown:function(a,d){if(this.onbeforeunload===d)this.onbeforeunload=null}}}};var n=J.removeEventListener?function(a,d,g){a.removeEventListener(d,g,false)}:function(a,d,g){a.detachEvent("on"+d,g)};f.Event=function(a){if(!this.preventDefault)return new f.Event(a);if(a&&a.type){this.originalEvent=a;this.type=a.type}else this.type=a;this.timeStamp=la();this[Ea]=true};f.Event.prototype={preventDefault:function(){this.isDefaultPrevented=ta;var a=this.originalEvent;if(a){a.preventDefault&&
a.preventDefault();a.returnValue=false}},stopPropagation:function(){this.isPropagationStopped=ta;var a=this.originalEvent;if(a){a.stopPropagation&&a.stopPropagation();a.cancelBubble=true}},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=ta;this.stopPropagation()},isDefaultPrevented:oa,isPropagationStopped:oa,isImmediatePropagationStopped:oa};var u=function(a){var d=a.relatedTarget;try{for(;d&&d!==this;)d=d.parentNode;if(d!==this){a.type=a.data;f.event.handle.apply(this,arguments)}}catch(g){}},
m=function(a){a.type=a.data;f.event.handle.apply(this,arguments)};f.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(a,d){f.event.special[a]={setup:function(g){f.event.add(this,d,g&&g.selector?m:u,a)},teardown:function(g){f.event.remove(this,d,g&&g.selector?m:u)}}});if(!f.support.submitBubbles)f.event.special.submit={setup:function(){if(this.nodeName.toLowerCase()!=="form"){f.event.add(this,"click.specialSubmit",function(a){var d=a.target,g=d.type;if((g==="submit"||g==="image")&&f(d).closest("form").length)return ja("submit",
this,arguments)});f.event.add(this,"keypress.specialSubmit",function(a){var d=a.target,g=d.type;if((g==="text"||g==="password")&&f(d).closest("form").length&&a.keyCode===13)return ja("submit",this,arguments)})}else return false},teardown:function(){f.event.remove(this,".specialSubmit")}};if(!f.support.changeBubbles){var s=/textarea|input|select/i,v,A=function(a){var d=a.type,g=a.value;if(d==="radio"||d==="checkbox")g=a.checked;else if(d==="select-multiple")g=a.selectedIndex>-1?f.map(a.options,function(j){return j.selected}).join("-"):
"";else if(a.nodeName.toLowerCase()==="select")g=a.selectedIndex;return g},I=function(a,d){var g=a.target,j,i;if(!(!s.test(g.nodeName)||g.readOnly)){j=f.data(g,"_change_data");i=A(g);if(a.type!=="focusout"||g.type!=="radio")f.data(g,"_change_data",i);if(!(j===H||i===j))if(j!=null||i){a.type="change";return f.event.trigger(a,d,g)}}};f.event.special.change={filters:{focusout:I,click:function(a){var d=a.target,g=d.type;if(g==="radio"||g==="checkbox"||d.nodeName.toLowerCase()==="select")return I.call(this,
a)},keydown:function(a){var d=a.target,g=d.type;if(a.keyCode===13&&d.nodeName.toLowerCase()!=="textarea"||a.keyCode===32&&(g==="checkbox"||g==="radio")||g==="select-multiple")return I.call(this,a)},beforeactivate:function(a){a=a.target;f.data(a,"_change_data",A(a))}},setup:function(){if(this.type==="file")return false;for(var a in v)f.event.add(this,a+".specialChange",v[a]);return s.test(this.nodeName)},teardown:function(){f.event.remove(this,".specialChange");return s.test(this.nodeName)}};v=f.event.special.change.filters}J.addEventListener&&
f.each({focus:"focusin",blur:"focusout"},function(a,d){function g(j){j=f.event.fix(j);j.type=d;return f.event.handle.call(this,j)}f.event.special[d]={setup:function(){this.addEventListener(a,g,true)},teardown:function(){this.removeEventListener(a,g,true)}}});f.each(["bind","one"],function(a,d){f.fn[d]=function(g,j,i){if(typeof g==="object"){for(var o in g)this[d](o,j,g[o],i);return this}if(f.isFunction(j)){i=j;j=H}var q=d==="one"?f.proxy(i,function(x){f(this).unbind(x,q);return i.apply(this,arguments)}):
i;if(g==="unload"&&d!=="one")this.one(g,j,i);else{o=0;for(var B=this.length;o<B;o++)f.event.add(this[o],g,q,j)}return this}});f.fn.extend({unbind:function(a,d){if(typeof a==="object"&&!a.preventDefault)for(var g in a)this.unbind(g,a[g]);else{g=0;for(var j=this.length;g<j;g++)f.event.remove(this[g],a,d)}return this},delegate:function(a,d,g,j){return this.live(d,g,j,a)},undelegate:function(a,d,g){return arguments.length===0?this.unbind("live"):this.die(d,null,g,a)},trigger:function(a,d){return this.each(function(){f.event.trigger(a,
d,this)})},triggerHandler:function(a,d){if(this[0]){var g=f.Event(a);g.preventDefault();g.stopPropagation();f.event.trigger(g,d,this[0]);return g.result}},toggle:function(a){for(var d=arguments,g=1;g<d.length;)f.proxy(a,d[g++]);return this.click(f.proxy(a,function(j){var i=(f.data(this,"lastToggle"+a.guid)||0)%g;f.data(this,"lastToggle"+a.guid,i+1);j.preventDefault();return d[i].apply(this,arguments)||false}))},hover:function(a,d){return this.mouseenter(a).mouseleave(d||a)}});var aa={focus:"focusin",
blur:"focusout",mouseenter:"mouseover",mouseleave:"mouseout"};f.each(["live","die"],function(a,d){f.fn[d]=function(g,j,i,o){var q,B=0,x,C,K=o||this.selector,U=o?this:f(this.context);if(f.isFunction(j)){i=j;j=H}for(g=(g||"").split(" ");(q=g[B++])!=null;){o=h.exec(q);x="";if(o){x=o[0];q=q.replace(h,"")}if(q==="hover")g.push("mouseenter"+x,"mouseleave"+x);else{C=q;if(q==="focus"||q==="blur"){g.push(aa[q]+x);q+=x}else q=(aa[q]||q)+x;d==="live"?U.each(function(){f.event.add(this,Ha(q,K),{data:j,selector:K,
handler:i,origType:q,origHandler:i,preType:C})}):U.unbind(Ha(q,K),i)}}return this}});f.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error".split(" "),function(a,d){f.fn[d]=function(g){return g?this.bind(d,g):this.trigger(d)};if(f.attrFn)f.attrFn[d]=true});p.attachEvent&&!p.addEventListener&&p.attachEvent("onunload",function(){for(var a in f.cache)if(f.cache[a].handle)try{f.event.remove(f.cache[a].handle.elem)}catch(d){}});
(function(){function a(l){for(var r="",y,z=0;l[z];z++){y=l[z];if(y.nodeType===3||y.nodeType===4)r+=y.nodeValue;else if(y.nodeType!==8)r+=a(y.childNodes)}return r}function d(l,r,y,z,E,D){E=0;for(var P=z.length;E<P;E++){var O=z[E];if(O){O=O[l];for(var V=false;O;){if(O.sizcache===y){V=z[O.sizset];break}if(O.nodeType===1&&!D){O.sizcache=y;O.sizset=E}if(O.nodeName.toLowerCase()===r){V=O;break}O=O[l]}z[E]=V}}}function g(l,r,y,z,E,D){E=0;for(var P=z.length;E<P;E++){var O=z[E];if(O){O=O[l];for(var V=false;O;){if(O.sizcache===
y){V=z[O.sizset];break}if(O.nodeType===1){if(!D){O.sizcache=y;O.sizset=E}if(typeof r!=="string"){if(O===r){V=true;break}}else if(x.filter(r,[O]).length>0){V=O;break}}O=O[l]}z[E]=V}}}var j=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^[\]]*\]|['"][^'"]*['"]|[^[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g,i=0,o=Object.prototype.toString,q=false,B=true;[0,0].sort(function(){B=false;return 0});var x=function(l,r,y,z){y=y||[];var E=r=r||J;if(r.nodeType!==1&&r.nodeType!==9)return[];if(!l||
typeof l!=="string")return y;for(var D=[],P,O,V,Xa,Ja=true,Ra=Q(r),Ka=l;(j.exec(""),P=j.exec(Ka))!==null;){Ka=P[3];D.push(P[1]);if(P[2]){Xa=P[3];break}}if(D.length>1&&K.exec(l))if(D.length===2&&C.relative[D[0]])O=ob(D[0]+D[1],r);else for(O=C.relative[D[0]]?[r]:x(D.shift(),r);D.length;){l=D.shift();if(C.relative[l])l+=D.shift();O=ob(l,O)}else{if(!z&&D.length>1&&r.nodeType===9&&!Ra&&C.match.ID.test(D[0])&&!C.match.ID.test(D[D.length-1])){P=x.find(D.shift(),r,Ra);r=P.expr?x.filter(P.expr,P.set)[0]:P.set[0]}if(r){P=
z?{expr:D.pop(),set:Y(z)}:x.find(D.pop(),D.length===1&&(D[0]==="~"||D[0]==="+")&&r.parentNode?r.parentNode:r,Ra);O=P.expr?x.filter(P.expr,P.set):P.set;if(D.length>0)V=Y(O);else Ja=false;for(;D.length;){var za=D.pop();P=za;if(C.relative[za])P=D.pop();else za="";if(P==null)P=r;C.relative[za](V,P,Ra)}}else V=[]}V||(V=O);V||x.error(za||l);if(o.call(V)==="[object Array]")if(Ja)if(r&&r.nodeType===1)for(l=0;V[l]!=null;l++){if(V[l]&&(V[l]===true||V[l].nodeType===1&&va(r,V[l])))y.push(O[l])}else for(l=0;V[l]!=
null;l++)V[l]&&V[l].nodeType===1&&y.push(O[l]);else y.push.apply(y,V);else Y(V,y);if(Xa){x(Xa,E,y,z);x.uniqueSort(y)}return y};x.uniqueSort=function(l){if(ea){q=B;l.sort(ea);if(q)for(var r=1;r<l.length;r++)l[r]===l[r-1]&&l.splice(r--,1)}return l};x.matches=function(l,r){return x(l,null,null,r)};x.find=function(l,r,y){var z,E;if(!l)return[];for(var D=0,P=C.order.length;D<P;D++){var O=C.order[D];if(E=C.leftMatch[O].exec(l)){var V=E[1];E.splice(1,1);if(V.substr(V.length-1)!=="\\"){E[1]=(E[1]||"").replace(/\\/g,
"");z=C.find[O](E,r,y);if(z!=null){l=l.replace(C.match[O],"");break}}}}z||(z=r.getElementsByTagName("*"));return{set:z,expr:l}};x.filter=function(l,r,y,z){for(var E=l,D=[],P=r,O,V,Xa=r&&r[0]&&Q(r[0]);l&&r.length;){for(var Ja in C.filter)if((O=C.leftMatch[Ja].exec(l))!=null&&O[2]){var Ra=C.filter[Ja],Ka,za;za=O[1];V=false;O.splice(1,1);if(za.substr(za.length-1)!=="\\"){if(P===D)D=[];if(C.preFilter[Ja])if(O=C.preFilter[Ja](O,P,y,D,z,Xa)){if(O===true)continue}else V=Ka=true;if(O)for(var bb=0;(za=P[bb])!=
null;bb++)if(za){Ka=Ra(za,O,bb,P);var sb=z^!!Ka;if(y&&Ka!=null)if(sb)V=true;else P[bb]=false;else if(sb){D.push(za);V=true}}if(Ka!==H){y||(P=D);l=l.replace(C.match[Ja],"");if(!V)return[];break}}}if(l===E)if(V==null)x.error(l);else break;E=l}return P};x.error=function(l){throw"Syntax error, unrecognized expression: "+l;};var C=x.selectors={order:["ID","NAME","TAG"],match:{ID:/#((?:[\w\u00c0-\uFFFF-]|\\.)+)/,CLASS:/\.((?:[\w\u00c0-\uFFFF-]|\\.)+)/,NAME:/\[name=['"]*((?:[\w\u00c0-\uFFFF-]|\\.)+)['"]*\]/,
ATTR:/\[\s*((?:[\w\u00c0-\uFFFF-]|\\.)+)\s*(?:(\S?=)\s*(['"]*)(.*?)\3|)\s*\]/,TAG:/^((?:[\w\u00c0-\uFFFF\*-]|\\.)+)/,CHILD:/:(only|nth|last|first)-child(?:\((even|odd|[\dn+-]*)\))?/,POS:/:(nth|eq|gt|lt|first|last|even|odd)(?:\((\d*)\))?(?=[^-]|$)/,PSEUDO:/:((?:[\w\u00c0-\uFFFF-]|\\.)+)(?:\((['"]?)((?:\([^\)]+\)|[^\(\)]*)+)\2\))?/},leftMatch:{},attrMap:{"class":"className","for":"htmlFor"},attrHandle:{href:function(l){return l.getAttribute("href")}},relative:{"+":function(l,r){var y=typeof r==="string",
z=y&&!/\W/.test(r);y=y&&!z;if(z)r=r.toLowerCase();z=0;for(var E=l.length,D;z<E;z++)if(D=l[z]){for(;(D=D.previousSibling)&&D.nodeType!==1;);l[z]=y||D&&D.nodeName.toLowerCase()===r?D||false:D===r}y&&x.filter(r,l,true)},">":function(l,r){var y=typeof r==="string";if(y&&!/\W/.test(r)){r=r.toLowerCase();for(var z=0,E=l.length;z<E;z++){var D=l[z];if(D){y=D.parentNode;l[z]=y.nodeName.toLowerCase()===r?y:false}}}else{z=0;for(E=l.length;z<E;z++)if(D=l[z])l[z]=y?D.parentNode:D.parentNode===r;y&&x.filter(r,
l,true)}},"":function(l,r,y){var z=i++,E=g;if(typeof r==="string"&&!/\W/.test(r)){var D=r=r.toLowerCase();E=d}E("parentNode",r,z,l,D,y)},"~":function(l,r,y){var z=i++,E=g;if(typeof r==="string"&&!/\W/.test(r)){var D=r=r.toLowerCase();E=d}E("previousSibling",r,z,l,D,y)}},find:{ID:function(l,r,y){if(typeof r.getElementById!=="undefined"&&!y)return(l=r.getElementById(l[1]))?[l]:[]},NAME:function(l,r){if(typeof r.getElementsByName!=="undefined"){for(var y=[],z=r.getElementsByName(l[1]),E=0,D=z.length;E<
D;E++)z[E].getAttribute("name")===l[1]&&y.push(z[E]);return y.length===0?null:y}},TAG:function(l,r){return r.getElementsByTagName(l[1])}},preFilter:{CLASS:function(l,r,y,z,E,D){l=" "+l[1].replace(/\\/g,"")+" ";if(D)return l;D=0;for(var P;(P=r[D])!=null;D++)if(P)if(E^(P.className&&(" "+P.className+" ").replace(/[\t\n]/g," ").indexOf(l)>=0))y||z.push(P);else if(y)r[D]=false;return false},ID:function(l){return l[1].replace(/\\/g,"")},TAG:function(l){return l[1].toLowerCase()},CHILD:function(l){if(l[1]===
"nth"){var r=/(-?)(\d*)n((?:\+|-)?\d*)/.exec(l[2]==="even"&&"2n"||l[2]==="odd"&&"2n+1"||!/\D/.test(l[2])&&"0n+"+l[2]||l[2]);l[2]=r[1]+(r[2]||1)-0;l[3]=r[3]-0}l[0]=i++;return l},ATTR:function(l,r,y,z,E,D){r=l[1].replace(/\\/g,"");if(!D&&C.attrMap[r])l[1]=C.attrMap[r];if(l[2]==="~=")l[4]=" "+l[4]+" ";return l},PSEUDO:function(l,r,y,z,E){if(l[1]==="not")if((j.exec(l[3])||"").length>1||/^\w/.test(l[3]))l[3]=x(l[3],null,null,r);else{l=x.filter(l[3],r,y,true^E);y||z.push.apply(z,l);return false}else if(C.match.POS.test(l[0])||
C.match.CHILD.test(l[0]))return true;return l},POS:function(l){l.unshift(true);return l}},filters:{enabled:function(l){return l.disabled===false&&l.type!=="hidden"},disabled:function(l){return l.disabled===true},checked:function(l){return l.checked===true},selected:function(l){return l.selected===true},parent:function(l){return!!l.firstChild},empty:function(l){return!l.firstChild},has:function(l,r,y){return!!x(y[3],l).length},header:function(l){return/h\d/i.test(l.nodeName)},text:function(l){return"text"===
l.type},radio:function(l){return"radio"===l.type},checkbox:function(l){return"checkbox"===l.type},file:function(l){return"file"===l.type},password:function(l){return"password"===l.type},submit:function(l){return"submit"===l.type},image:function(l){return"image"===l.type},reset:function(l){return"reset"===l.type},button:function(l){return"button"===l.type||l.nodeName.toLowerCase()==="button"},input:function(l){return/input|select|textarea|button/i.test(l.nodeName)}},setFilters:{first:function(l,r){return r===
0},last:function(l,r,y,z){return r===z.length-1},even:function(l,r){return r%2===0},odd:function(l,r){return r%2===1},lt:function(l,r,y){return r<y[3]-0},gt:function(l,r,y){return r>y[3]-0},nth:function(l,r,y){return y[3]-0===r},eq:function(l,r,y){return y[3]-0===r}},filter:{PSEUDO:function(l,r,y,z){var E=r[1],D=C.filters[E];if(D)return D(l,y,r,z);else if(E==="contains")return(l.textContent||l.innerText||a([l])||"").indexOf(r[3])>=0;else if(E==="not"){r=r[3];y=0;for(z=r.length;y<z;y++)if(r[y]===l)return false;
return true}else x.error("Syntax error, unrecognized expression: "+E)},CHILD:function(l,r){var y=r[1],z=l;switch(y){case "only":case "first":for(;z=z.previousSibling;)if(z.nodeType===1)return false;if(y==="first")return true;z=l;case "last":for(;z=z.nextSibling;)if(z.nodeType===1)return false;return true;case "nth":y=r[2];var E=r[3];if(y===1&&E===0)return true;var D=r[0],P=l.parentNode;if(P&&(P.sizcache!==D||!l.nodeIndex)){var O=0;for(z=P.firstChild;z;z=z.nextSibling)if(z.nodeType===1)z.nodeIndex=
++O;P.sizcache=D}z=l.nodeIndex-E;return y===0?z===0:z%y===0&&z/y>=0}},ID:function(l,r){return l.nodeType===1&&l.getAttribute("id")===r},TAG:function(l,r){return r==="*"&&l.nodeType===1||l.nodeName.toLowerCase()===r},CLASS:function(l,r){return(" "+(l.className||l.getAttribute("class"))+" ").indexOf(r)>-1},ATTR:function(l,r){var y=r[1];y=C.attrHandle[y]?C.attrHandle[y](l):l[y]!=null?l[y]:l.getAttribute(y);var z=y+"",E=r[2],D=r[4];return y==null?E==="!=":E==="="?z===D:E==="*="?z.indexOf(D)>=0:E==="~="?
(" "+z+" ").indexOf(D)>=0:!D?z&&y!==false:E==="!="?z!==D:E==="^="?z.indexOf(D)===0:E==="$="?z.substr(z.length-D.length)===D:E==="|="?z===D||z.substr(0,D.length+1)===D+"-":false},POS:function(l,r,y,z){var E=C.setFilters[r[2]];if(E)return E(l,y,r,z)}}},K=C.match.POS,U;for(U in C.match){C.match[U]=RegExp(C.match[U].source+/(?![^\[]*\])(?![^\(]*\))/.source);C.leftMatch[U]=RegExp(/(^(?:.|\r|\n)*?)/.source+C.match[U].source.replace(/\\(\d+)/g,function(l,r){return"\\"+(r-0+1)}))}var Y=function(l,r){l=Array.prototype.slice.call(l,
0);if(r){r.push.apply(r,l);return r}return l};try{Array.prototype.slice.call(J.documentElement.childNodes,0)}catch(ka){Y=function(l,r){var y=r||[];if(o.call(l)==="[object Array]")Array.prototype.push.apply(y,l);else if(typeof l.length==="number")for(var z=0,E=l.length;z<E;z++)y.push(l[z]);else for(z=0;l[z];z++)y.push(l[z]);return y}}var ea;if(J.documentElement.compareDocumentPosition)ea=function(l,r){if(!l.compareDocumentPosition||!r.compareDocumentPosition){if(l==r)q=true;return l.compareDocumentPosition?
-1:1}var y=l.compareDocumentPosition(r)&4?-1:l===r?0:1;if(y===0)q=true;return y};else if("sourceIndex"in J.documentElement)ea=function(l,r){if(!l.sourceIndex||!r.sourceIndex){if(l==r)q=true;return l.sourceIndex?-1:1}var y=l.sourceIndex-r.sourceIndex;if(y===0)q=true;return y};else if(J.createRange)ea=function(l,r){if(!l.ownerDocument||!r.ownerDocument){if(l==r)q=true;return l.ownerDocument?-1:1}var y=l.ownerDocument.createRange(),z=r.ownerDocument.createRange();y.setStart(l,0);y.setEnd(l,0);z.setStart(r,
0);z.setEnd(r,0);y=y.compareBoundaryPoints(Range.START_TO_END,z);if(y===0)q=true;return y};(function(){var l=J.createElement("div"),r="script"+(new Date).getTime();l.innerHTML="<a name='"+r+"'/>";var y=J.documentElement;y.insertBefore(l,y.firstChild);if(J.getElementById(r)){C.find.ID=function(z,E,D){if(typeof E.getElementById!=="undefined"&&!D)return(E=E.getElementById(z[1]))?E.id===z[1]||typeof E.getAttributeNode!=="undefined"&&E.getAttributeNode("id").nodeValue===z[1]?[E]:H:[]};C.filter.ID=function(z,
E){var D=typeof z.getAttributeNode!=="undefined"&&z.getAttributeNode("id");return z.nodeType===1&&D&&D.nodeValue===E}}y.removeChild(l);y=l=null})();(function(){var l=J.createElement("div");l.appendChild(J.createComment(""));if(l.getElementsByTagName("*").length>0)C.find.TAG=function(r,y){var z=y.getElementsByTagName(r[1]);if(r[1]==="*"){for(var E=[],D=0;z[D];D++)z[D].nodeType===1&&E.push(z[D]);z=E}return z};l.innerHTML="<a href='#'></a>";if(l.firstChild&&typeof l.firstChild.getAttribute!=="undefined"&&
l.firstChild.getAttribute("href")!=="#")C.attrHandle.href=function(r){return r.getAttribute("href",2)};l=null})();J.querySelectorAll&&function(){var l=x,r=J.createElement("div");r.innerHTML="<p class='TEST'></p>";if(!(r.querySelectorAll&&r.querySelectorAll(".TEST").length===0)){x=function(z,E,D,P){E=E||J;if(!P&&E.nodeType===9&&!Q(E))try{return Y(E.querySelectorAll(z),D)}catch(O){}return l(z,E,D,P)};for(var y in l)x[y]=l[y];r=null}}();(function(){var l=J.createElement("div");l.innerHTML="<div class='test e'></div><div class='test'></div>";
if(!(!l.getElementsByClassName||l.getElementsByClassName("e").length===0)){l.lastChild.className="e";if(l.getElementsByClassName("e").length!==1){C.order.splice(1,0,"CLASS");C.find.CLASS=function(r,y,z){if(typeof y.getElementsByClassName!=="undefined"&&!z)return y.getElementsByClassName(r[1])};l=null}}})();var va=J.compareDocumentPosition?function(l,r){return!!(l.compareDocumentPosition(r)&16)}:function(l,r){return l!==r&&(l.contains?l.contains(r):true)},Q=function(l){return(l=(l?l.ownerDocument||
l:0).documentElement)?l.nodeName!=="HTML":false},ob=function(l,r){for(var y=[],z="",E,D=r.nodeType?[r]:r;E=C.match.PSEUDO.exec(l);){z+=E[0];l=l.replace(C.match.PSEUDO,"")}l=C.relative[l]?l+"*":l;E=0;for(var P=D.length;E<P;E++)x(l,D[E],y);return x.filter(z,y)};f.find=x;f.expr=x.selectors;f.expr[":"]=f.expr.filters;f.unique=x.uniqueSort;f.text=a;f.isXMLDoc=Q;f.contains=va})();var ba=/Until$/,ca=/^(?:parents|prevUntil|prevAll)/,fa=/,/;Pa=Array.prototype.slice;var T=function(a,d,g){if(f.isFunction(d))return f.grep(a,
function(i,o){return!!d.call(i,o,i)===g});else if(d.nodeType)return f.grep(a,function(i){return i===d===g});else if(typeof d==="string"){var j=f.grep(a,function(i){return i.nodeType===1});if(N.test(d))return f.filter(d,j,!g);else d=f.filter(d,j)}return f.grep(a,function(i){return f.inArray(i,d)>=0===g})};f.fn.extend({find:function(a){for(var d=this.pushStack("","find",a),g=0,j=0,i=this.length;j<i;j++){g=d.length;f.find(a,this[j],d);if(j>0)for(var o=g;o<d.length;o++)for(var q=0;q<g;q++)if(d[q]===d[o]){d.splice(o--,
1);break}}return d},has:function(a){var d=f(a);return this.filter(function(){for(var g=0,j=d.length;g<j;g++)if(f.contains(this,d[g]))return true})},not:function(a){return this.pushStack(T(this,a,false),"not",a)},filter:function(a){return this.pushStack(T(this,a,true),"filter",a)},is:function(a){return!!a&&f.filter(a,this).length>0},closest:function(a,d){if(f.isArray(a)){var g=[],j=this[0],i,o={},q;if(j&&a.length){i=0;for(var B=a.length;i<B;i++){q=a[i];o[q]||(o[q]=f.expr.match.POS.test(q)?f(q,d||this.context):
q)}for(;j&&j.ownerDocument&&j!==d;){for(q in o){i=o[q];if(i.jquery?i.index(j)>-1:f(j).is(i)){g.push({selector:q,elem:j});delete o[q]}}j=j.parentNode}}return g}var x=f.expr.match.POS.test(a)?f(a,d||this.context):null;return this.map(function(C,K){for(;K&&K.ownerDocument&&K!==d;){if(x?x.index(K)>-1:f(K).is(a))return K;K=K.parentNode}return null})},index:function(a){if(!a||typeof a==="string")return f.inArray(this[0],a?f(a):this.parent().children());return f.inArray(a.jquery?a[0]:a,this)},add:function(a,
d){var g=typeof a==="string"?f(a,d||this.context):f.makeArray(a),j=f.merge(this.get(),g);return this.pushStack(!g[0]||!g[0].parentNode||g[0].parentNode.nodeType===11||!j[0]||!j[0].parentNode||j[0].parentNode.nodeType===11?j:f.unique(j))},andSelf:function(){return this.add(this.prevObject)}});f.each({parent:function(a){return(a=a.parentNode)&&a.nodeType!==11?a:null},parents:function(a){return f.dir(a,"parentNode")},parentsUntil:function(a,d,g){return f.dir(a,"parentNode",g)},next:function(a){return f.nth(a,
2,"nextSibling")},prev:function(a){return f.nth(a,2,"previousSibling")},nextAll:function(a){return f.dir(a,"nextSibling")},prevAll:function(a){return f.dir(a,"previousSibling")},nextUntil:function(a,d,g){return f.dir(a,"nextSibling",g)},prevUntil:function(a,d,g){return f.dir(a,"previousSibling",g)},siblings:function(a){return f.sibling(a.parentNode.firstChild,a)},children:function(a){return f.sibling(a.firstChild)},contents:function(a){return f.nodeName(a,"iframe")?a.contentDocument||a.contentWindow.document:
f.makeArray(a.childNodes)}},function(a,d){f.fn[a]=function(g,j){var i=f.map(this,d,g);ba.test(a)||(j=g);if(j&&typeof j==="string")i=f.filter(j,i);i=this.length>1?f.unique(i):i;if((this.length>1||fa.test(j))&&ca.test(a))i=i.reverse();return this.pushStack(i,a,Pa.call(arguments).join(","))}});f.extend({filter:function(a,d,g){if(g)a=":not("+a+")";return f.find.matches(a,d)},dir:function(a,d,g){var j=[];for(a=a[d];a&&a.nodeType!==9&&(g===H||a.nodeType!==1||!f(a).is(g));){a.nodeType===1&&j.push(a);a=a[d]}return j},
nth:function(a,d,g){d=d||1;for(var j=0;a;a=a[g])if(a.nodeType===1&&++j===d)break;return a},sibling:function(a,d){for(var g=[];a;a=a.nextSibling)a.nodeType===1&&a!==d&&g.push(a);return g}});var ha=/ jQuery\d+="(?:\d+|null)"/g,na=/^\s+/,Z=/(<([\w:]+)[^>]*?)\/>/g,wa=/^(?:area|br|col|embed|hr|img|input|link|meta|param)$/i,ra=/<([\w:]+)/,xa=/<tbody/i,Da=/<|&#?\w+;/,Ia=/<script|<object|<embed|<option|<style/i,ya=/checked\s*(?:[^=]|=\s*.checked.)/i,G=function(a,d,g){return wa.test(g)?a:d+"></"+g+">"},ia=
{option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],area:[1,"<map>","</map>"],_default:[0,"",""]};ia.optgroup=ia.option;ia.tbody=ia.tfoot=ia.colgroup=ia.caption=ia.thead;ia.th=ia.td;if(!f.support.htmlSerialize)ia._default=[1,"div<div>","</div>"];f.fn.extend({text:function(a){if(f.isFunction(a))return this.each(function(d){var g=
f(this);g.text(a.call(this,d,g.text()))});if(typeof a!=="object"&&a!==H)return this.empty().append((this[0]&&this[0].ownerDocument||J).createTextNode(a));return f.text(this)},wrapAll:function(a){if(f.isFunction(a))return this.each(function(g){f(this).wrapAll(a.call(this,g))});if(this[0]){var d=f(a,this[0].ownerDocument).eq(0).clone(true);this[0].parentNode&&d.insertBefore(this[0]);d.map(function(){for(var g=this;g.firstChild&&g.firstChild.nodeType===1;)g=g.firstChild;return g}).append(this)}return this},
wrapInner:function(a){if(f.isFunction(a))return this.each(function(d){f(this).wrapInner(a.call(this,d))});return this.each(function(){var d=f(this),g=d.contents();g.length?g.wrapAll(a):d.append(a)})},wrap:function(a){return this.each(function(){f(this).wrapAll(a)})},unwrap:function(){return this.parent().each(function(){f.nodeName(this,"body")||f(this).replaceWith(this.childNodes)}).end()},append:function(){return this.domManip(arguments,true,function(a){this.nodeType===1&&this.appendChild(a)})},
prepend:function(){return this.domManip(arguments,true,function(a){this.nodeType===1&&this.insertBefore(a,this.firstChild)})},before:function(){if(this[0]&&this[0].parentNode)return this.domManip(arguments,false,function(d){this.parentNode.insertBefore(d,this)});else if(arguments.length){var a=f(arguments[0]);a.push.apply(a,this.toArray());return this.pushStack(a,"before",arguments)}},after:function(){if(this[0]&&this[0].parentNode)return this.domManip(arguments,false,function(d){this.parentNode.insertBefore(d,
this.nextSibling)});else if(arguments.length){var a=this.pushStack(this,"after",arguments);a.push.apply(a,f(arguments[0]).toArray());return a}},remove:function(a,d){for(var g=0,j;(j=this[g])!=null;g++)if(!a||f.filter(a,[j]).length){if(!d&&j.nodeType===1){f.cleanData(j.getElementsByTagName("*"));f.cleanData([j])}j.parentNode&&j.parentNode.removeChild(j)}return this},empty:function(){for(var a=0,d;(d=this[a])!=null;a++)for(d.nodeType===1&&f.cleanData(d.getElementsByTagName("*"));d.firstChild;)d.removeChild(d.firstChild);
return this},clone:function(a){var d=this.map(function(){if(!f.support.noCloneEvent&&!f.isXMLDoc(this)){var g=this.outerHTML,j=this.ownerDocument;if(!g){g=j.createElement("div");g.appendChild(this.cloneNode(true));g=g.innerHTML}return f.clean([g.replace(ha,"").replace(/=([^="'>\s]+\/)>/g,'="$1">').replace(na,"")],j)[0]}else return this.cloneNode(true)});if(a===true){t(this,d);t(this.find("*"),d.find("*"))}return d},html:function(a){if(a===H)return this[0]&&this[0].nodeType===1?this[0].innerHTML.replace(ha,
""):null;else if(typeof a==="string"&&!Ia.test(a)&&(f.support.leadingWhitespace||!na.test(a))&&!ia[(ra.exec(a)||["",""])[1].toLowerCase()]){a=a.replace(Z,G);try{for(var d=0,g=this.length;d<g;d++)if(this[d].nodeType===1){f.cleanData(this[d].getElementsByTagName("*"));this[d].innerHTML=a}}catch(j){this.empty().append(a)}}else f.isFunction(a)?this.each(function(i){var o=f(this),q=o.html();o.empty().append(function(){return a.call(this,i,q)})}):this.empty().append(a);return this},replaceWith:function(a){if(this[0]&&
this[0].parentNode){if(f.isFunction(a))return this.each(function(d){var g=f(this),j=g.html();g.replaceWith(a.call(this,d,j))});if(typeof a!=="string")a=f(a).detach();return this.each(function(){var d=this.nextSibling,g=this.parentNode;f(this).remove();d?f(d).before(a):f(g).append(a)})}else return this.pushStack(f(f.isFunction(a)?a():a),"replaceWith",a)},detach:function(a){return this.remove(a,true)},domManip:function(a,d,g){var j,i,o=a[0],q=[],B;if(!f.support.checkClone&&arguments.length===3&&typeof o===
"string"&&ya.test(o))return this.each(function(){f(this).domManip(a,d,g,true)});if(f.isFunction(o))return this.each(function(C){var K=f(this);a[0]=o.call(this,C,d?K.html():H);K.domManip(a,d,g)});if(this[0]){j=o&&o.parentNode;j=f.support.parentNode&&j&&j.nodeType===11&&j.childNodes.length===this.length?{fragment:j}:F(a,this,q);B=j.fragment;if(i=B.childNodes.length===1?B=B.firstChild:B.firstChild){d=d&&f.nodeName(i,"tr");i=0;for(var x=this.length;i<x;i++)g.call(d?f.nodeName(this[i],"table")?this[i].getElementsByTagName("tbody")[0]||
this[i].appendChild(this[i].ownerDocument.createElement("tbody")):this[i]:this[i],i>0||j.cacheable||this.length>1?B.cloneNode(true):B)}q.length&&f.each(q,L)}return this}});f.fragments={};f.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(a,d){f.fn[a]=function(g){var j=[];g=f(g);var i=this.length===1&&this[0].parentNode;if(i&&i.nodeType===11&&i.childNodes.length===1&&g.length===1){g[d](this[0]);return this}else{i=0;for(var o=g.length;i<
o;i++){var q=(i>0?this.clone(true):this).get();f.fn[d].apply(f(g[i]),q);j=j.concat(q)}return this.pushStack(j,a,g.selector)}}});f.extend({clean:function(a,d,g,j){d=d||J;if(typeof d.createElement==="undefined")d=d.ownerDocument||d[0]&&d[0].ownerDocument||J;for(var i=[],o=0,q;(q=a[o])!=null;o++){if(typeof q==="number")q+="";if(q){if(typeof q==="string"&&!Da.test(q))q=d.createTextNode(q);else if(typeof q==="string"){q=q.replace(Z,G);var B=(ra.exec(q)||["",""])[1].toLowerCase(),x=ia[B]||ia._default,C=
x[0],K=d.createElement("div");for(K.innerHTML=x[1]+q+x[2];C--;)K=K.lastChild;if(!f.support.tbody){C=xa.test(q);B=B==="table"&&!C?K.firstChild&&K.firstChild.childNodes:x[1]==="<table>"&&!C?K.childNodes:[];for(x=B.length-1;x>=0;--x)f.nodeName(B[x],"tbody")&&!B[x].childNodes.length&&B[x].parentNode.removeChild(B[x])}!f.support.leadingWhitespace&&na.test(q)&&K.insertBefore(d.createTextNode(na.exec(q)[0]),K.firstChild);q=K.childNodes}if(q.nodeType)i.push(q);else i=f.merge(i,q)}}if(g)for(o=0;i[o];o++)if(j&&
f.nodeName(i[o],"script")&&(!i[o].type||i[o].type.toLowerCase()==="text/javascript"))j.push(i[o].parentNode?i[o].parentNode.removeChild(i[o]):i[o]);else{i[o].nodeType===1&&i.splice.apply(i,[o+1,0].concat(f.makeArray(i[o].getElementsByTagName("script"))));g.appendChild(i[o])}return i},cleanData:function(a){for(var d,g,j=f.cache,i=f.event.special,o=f.support.deleteExpando,q=0,B;(B=a[q])!=null;q++)if(g=B[f.expando]){d=j[g];if(d.events)for(var x in d.events)i[x]?f.event.remove(B,x):n(B,x,d.handle);if(o)delete B[f.expando];
else B.removeAttribute&&B.removeAttribute(f.expando);delete j[g]}}});var W=/z-?index|font-?weight|opacity|zoom|line-?height/i,$=/alpha\([^)]*\)/,pa=/opacity=([^)]*)/,X=/float/i,ga=/-([a-z])/ig,Fa=/([A-Z])/g,sa=/^-?\d+(?:px)?$/i,da=/^-?\d/,Ba={position:"absolute",visibility:"hidden",display:"block"},cb=["Left","Right"],db=["Top","Bottom"],eb=J.defaultView&&J.defaultView.getComputedStyle,Ya=f.support.cssFloat?"cssFloat":"styleFloat",La=function(a,d){return d.toUpperCase()};f.fn.css=function(a,d){return S(this,
a,d,true,function(g,j,i){if(i===H)return f.curCSS(g,j);if(typeof i==="number"&&!W.test(j))i+="px";f.style(g,j,i)})};f.extend({style:function(a,d,g){if(!a||a.nodeType===3||a.nodeType===8)return H;if((d==="width"||d==="height")&&parseFloat(g)<0)g=H;var j=a.style||a,i=g!==H;if(!f.support.opacity&&d==="opacity"){if(i){j.zoom=1;d=parseInt(g,10)+""==="NaN"?"":"alpha(opacity="+g*100+")";a=j.filter||f.curCSS(a,"filter")||"";j.filter=$.test(a)?a.replace($,d):d}return j.filter&&j.filter.indexOf("opacity=")>=
0?parseFloat(pa.exec(j.filter)[1])/100+"":""}if(X.test(d))d=Ya;d=d.replace(ga,La);if(i)j[d]=g;return j[d]},css:function(a,d,g,j){if(d==="width"||d==="height"){var i,o=d==="width"?cb:db;g=function(){i=d==="width"?a.offsetWidth:a.offsetHeight;j!=="border"&&f.each(o,function(){j||(i-=parseFloat(f.curCSS(a,"padding"+this,true))||0);if(j==="margin")i+=parseFloat(f.curCSS(a,"margin"+this,true))||0;else i-=parseFloat(f.curCSS(a,"border"+this+"Width",true))||0})};a.offsetWidth!==0?g():f.swap(a,Ba,g);return Math.max(0,
Math.round(i))}return f.curCSS(a,d,g)},curCSS:function(a,d,g){var j,i=a.style;if(!f.support.opacity&&d==="opacity"&&a.currentStyle){j=pa.test(a.currentStyle.filter||"")?parseFloat(RegExp.$1)/100+"":"";return j===""?"1":j}if(X.test(d))d=Ya;if(!g&&i&&i[d])j=i[d];else if(eb){if(X.test(d))d="float";d=d.replace(Fa,"-$1").toLowerCase();i=a.ownerDocument.defaultView;if(!i)return null;if(a=i.getComputedStyle(a,null))j=a.getPropertyValue(d);if(d==="opacity"&&j==="")j="1"}else if(a.currentStyle){g=d.replace(ga,
La);j=a.currentStyle[d]||a.currentStyle[g];if(!sa.test(j)&&da.test(j)){d=i.left;var o=a.runtimeStyle.left;a.runtimeStyle.left=a.currentStyle.left;i.left=g==="fontSize"?"1em":j||0;j=i.pixelLeft+"px";i.left=d;a.runtimeStyle.left=o}}return j},swap:function(a,d,g){var j={},i;for(i in d){j[i]=a.style[i];a.style[i]=d[i]}g.call(a);for(i in d)a.style[i]=j[i]}});if(f.expr&&f.expr.filters){f.expr.filters.hidden=function(a){var d=a.offsetWidth,g=a.offsetHeight,j=a.nodeName.toLowerCase()==="tr";return d===0&&
g===0&&!j?true:d>0&&g>0&&!j?false:f.curCSS(a,"display")==="none"};f.expr.filters.visible=function(a){return!f.expr.filters.hidden(a)}}var Ga=la(),fb=/<script(.|\s)*?\/script>/gi,tb=/select|textarea/i,ub=/color|date|datetime|email|hidden|month|number|password|range|search|tel|text|time|url|week/i,Sa=/=\?(&|$)/,pb=/\?/,vb=/(\?|&)_=.*?(&|$)/,wb=/^(\w+:)?\/\/([^\/?#]+)/,xb=/%20/g,yb=f.fn.load;f.fn.extend({load:function(a,d,g){if(typeof a!=="string")return yb.call(this,a);else if(!this.length)return this;
var j=a.indexOf(" ");if(j>=0){var i=a.slice(j,a.length);a=a.slice(0,j)}j="GET";if(d)if(f.isFunction(d)){g=d;d=null}else if(typeof d==="object"){d=f.param(d,f.ajaxSettings.traditional);j="POST"}var o=this;f.ajax({url:a,type:j,dataType:"html",data:d,complete:function(q,B){if(B==="success"||B==="notmodified")o.html(i?f("<div />").append(q.responseText.replace(fb,"")).find(i):q.responseText);g&&o.each(g,[q.responseText,B,q])}});return this},serialize:function(){return f.param(this.serializeArray())},
serializeArray:function(){return this.map(function(){return this.elements?f.makeArray(this.elements):this}).filter(function(){return this.name&&!this.disabled&&(this.checked||tb.test(this.nodeName)||ub.test(this.type))}).map(function(a,d){var g=f(this).val();return g==null?null:f.isArray(g)?f.map(g,function(j){return{name:d.name,value:j}}):{name:d.name,value:g}}).get()}});f.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),function(a,d){f.fn[d]=function(g){return this.bind(d,
g)}});f.extend({get:function(a,d,g,j){if(f.isFunction(d)){j=j||g;g=d;d=null}return f.ajax({type:"GET",url:a,data:d,success:g,dataType:j})},getScript:function(a,d){return f.get(a,null,d,"script")},getJSON:function(a,d,g){return f.get(a,d,g,"json")},post:function(a,d,g,j){if(f.isFunction(d)){j=j||g;g=d;d={}}return f.ajax({type:"POST",url:a,data:d,success:g,dataType:j})},ajaxSetup:function(a){f.extend(f.ajaxSettings,a)},ajaxSettings:{url:location.href,global:true,type:"GET",contentType:"application/x-www-form-urlencoded",
processData:true,async:true,xhr:p.XMLHttpRequest&&(p.location.protocol!=="file:"||!p.ActiveXObject)?function(){return new p.XMLHttpRequest}:function(){try{return new p.ActiveXObject("Microsoft.XMLHTTP")}catch(a){}},accepts:{xml:"application/xml, text/xml",html:"text/html",script:"text/javascript, application/javascript",json:"application/json, text/javascript",text:"text/plain",_default:"*/*"}},lastModified:{},etag:{},ajax:function(a){function d(){i.success&&i.success.call(x,B,q,Q);i.global&&j("ajaxSuccess",
[Q,i])}function g(){i.complete&&i.complete.call(x,Q,q);i.global&&j("ajaxComplete",[Q,i]);i.global&&!--f.active&&f.event.trigger("ajaxStop")}function j(E,D){(i.context?f(i.context):f.event).trigger(E,D)}var i=f.extend(true,{},f.ajaxSettings,a),o,q,B,x=a&&a.context||i,C=i.type.toUpperCase();if(i.data&&i.processData&&typeof i.data!=="string")i.data=f.param(i.data,i.traditional);if(i.dataType==="jsonp"){if(C==="GET")Sa.test(i.url)||(i.url+=(pb.test(i.url)?"&":"?")+(i.jsonp||"callback")+"=?");else if(!i.data||
!Sa.test(i.data))i.data=(i.data?i.data+"&":"")+(i.jsonp||"callback")+"=?";i.dataType="json"}if(i.dataType==="json"&&(i.data&&Sa.test(i.data)||Sa.test(i.url))){o=i.jsonpCallback||"jsonp"+Ga++;if(i.data)i.data=(i.data+"").replace(Sa,"="+o+"$1");i.url=i.url.replace(Sa,"="+o+"$1");i.dataType="script";p[o]=p[o]||function(E){B=E;d();g();p[o]=H;try{delete p[o]}catch(D){}Y&&Y.removeChild(ka)}}if(i.dataType==="script"&&i.cache===null)i.cache=false;if(i.cache===false&&C==="GET"){var K=la(),U=i.url.replace(vb,
"$1_="+K+"$2");i.url=U+(U===i.url?(pb.test(i.url)?"&":"?")+"_="+K:"")}if(i.data&&C==="GET")i.url+=(pb.test(i.url)?"&":"?")+i.data;i.global&&!f.active++&&f.event.trigger("ajaxStart");K=(K=wb.exec(i.url))&&(K[1]&&K[1]!==location.protocol||K[2]!==location.host);if(i.dataType==="script"&&C==="GET"&&K){var Y=J.getElementsByTagName("head")[0]||J.documentElement,ka=J.createElement("script");ka.src=i.url;if(i.scriptCharset)ka.charset=i.scriptCharset;if(!o){var ea=false;ka.onload=ka.onreadystatechange=function(){if(!ea&&
(!this.readyState||this.readyState==="loaded"||this.readyState==="complete")){ea=true;d();g();ka.onload=ka.onreadystatechange=null;Y&&ka.parentNode&&Y.removeChild(ka)}}}Y.insertBefore(ka,Y.firstChild);return H}var va=false,Q=i.xhr();if(Q){i.username?Q.open(C,i.url,i.async,i.username,i.password):Q.open(C,i.url,i.async);try{if(i.data||a&&a.contentType)Q.setRequestHeader("Content-Type",i.contentType);if(i.ifModified){f.lastModified[i.url]&&Q.setRequestHeader("If-Modified-Since",f.lastModified[i.url]);
f.etag[i.url]&&Q.setRequestHeader("If-None-Match",f.etag[i.url])}K||Q.setRequestHeader("X-Requested-With","XMLHttpRequest");Q.setRequestHeader("Accept",i.dataType&&i.accepts[i.dataType]?i.accepts[i.dataType]+", */*":i.accepts._default)}catch(ob){}if(i.beforeSend&&i.beforeSend.call(x,Q,i)===false){i.global&&!--f.active&&f.event.trigger("ajaxStop");Q.abort();return false}i.global&&j("ajaxSend",[Q,i]);var l=Q.onreadystatechange=function(E){if(!Q||Q.readyState===0||E==="abort"){va||g();va=true;if(Q)Q.onreadystatechange=
f.noop}else if(!va&&Q&&(Q.readyState===4||E==="timeout")){va=true;Q.onreadystatechange=f.noop;q=E==="timeout"?"timeout":!f.httpSuccess(Q)?"error":i.ifModified&&f.httpNotModified(Q,i.url)?"notmodified":"success";var D;if(q==="success")try{B=f.httpData(Q,i.dataType,i)}catch(P){q="parsererror";D=P}if(q==="success"||q==="notmodified")o||d();else f.handleError(i,Q,q,D);g();E==="timeout"&&Q.abort();if(i.async)Q=null}};try{var r=Q.abort;Q.abort=function(){Q&&r.call(Q);l("abort")}}catch(y){}i.async&&i.timeout>
0&&setTimeout(function(){Q&&!va&&l("timeout")},i.timeout);try{Q.send(C==="POST"||C==="PUT"||C==="DELETE"?i.data:null)}catch(z){f.handleError(i,Q,null,z);g()}i.async||l();return Q}},handleError:function(a,d,g,j){if(a.error)a.error.call(a.context||a,d,g,j);if(a.global)(a.context?f(a.context):f.event).trigger("ajaxError",[d,a,j])},active:0,httpSuccess:function(a){try{return!a.status&&location.protocol==="file:"||a.status>=200&&a.status<300||a.status===304||a.status===1223||a.status===0}catch(d){}return false},
httpNotModified:function(a,d){var g=a.getResponseHeader("Last-Modified"),j=a.getResponseHeader("Etag");if(g)f.lastModified[d]=g;if(j)f.etag[d]=j;return a.status===304||a.status===0},httpData:function(a,d,g){var j=a.getResponseHeader("content-type")||"",i=d==="xml"||!d&&j.indexOf("xml")>=0;a=i?a.responseXML:a.responseText;i&&a.documentElement.nodeName==="parsererror"&&f.error("parsererror");if(g&&g.dataFilter)a=g.dataFilter(a,d);if(typeof a==="string")if(d==="json"||!d&&j.indexOf("json")>=0)a=f.parseJSON(a);
else if(d==="script"||!d&&j.indexOf("javascript")>=0)f.globalEval(a);return a},param:function(a,d){function g(q,B){if(f.isArray(B))f.each(B,function(x,C){d||/\[\]$/.test(q)?j(q,C):g(q+"["+(typeof C==="object"||f.isArray(C)?x:"")+"]",C)});else!d&&B!=null&&typeof B==="object"?f.each(B,function(x,C){g(q+"["+x+"]",C)}):j(q,B)}function j(q,B){B=f.isFunction(B)?B():B;i[i.length]=encodeURIComponent(q)+"="+encodeURIComponent(B)}var i=[];if(d===H)d=f.ajaxSettings.traditional;if(f.isArray(a)||a.jquery)f.each(a,
function(){j(this.name,this.value)});else for(var o in a)g(o,a[o]);return i.join("&").replace(xb,"+")}});var qb={},zb=/toggle|show|hide/,Ab=/^([+-]=)?([\d+-.]+)(.*)$/,gb,rb=[["height","marginTop","marginBottom","paddingTop","paddingBottom"],["width","marginLeft","marginRight","paddingLeft","paddingRight"],["opacity"]];f.fn.extend({show:function(a,d){if(a||a===0)return this.animate(M("show",3),a,d);else{for(var g=0,j=this.length;g<j;g++){var i=f.data(this[g],"olddisplay");this[g].style.display=i||
"";if(f.css(this[g],"display")==="none"){i=this[g].nodeName;var o;if(qb[i])o=qb[i];else{var q=f("<"+i+" />").appendTo("body");o=q.css("display");if(o==="none")o="block";q.remove();qb[i]=o}f.data(this[g],"olddisplay",o)}}g=0;for(j=this.length;g<j;g++)this[g].style.display=f.data(this[g],"olddisplay")||"";return this}},hide:function(a,d){if(a||a===0)return this.animate(M("hide",3),a,d);else{for(var g=0,j=this.length;g<j;g++){var i=f.data(this[g],"olddisplay");!i&&i!=="none"&&f.data(this[g],"olddisplay",
f.css(this[g],"display"))}g=0;for(j=this.length;g<j;g++)this[g].style.display="none";return this}},_toggle:f.fn.toggle,toggle:function(a,d){var g=typeof a==="boolean";if(f.isFunction(a)&&f.isFunction(d))this._toggle.apply(this,arguments);else a==null||g?this.each(function(){var j=g?a:f(this).is(":hidden");f(this)[j?"show":"hide"]()}):this.animate(M("toggle",3),a,d);return this},fadeTo:function(a,d,g){return this.filter(":hidden").css("opacity",0).show().end().animate({opacity:d},a,g)},animate:function(a,
d,g,j){var i=f.speed(d,g,j);if(f.isEmptyObject(a))return this.each(i.complete);return this[i.queue===false?"each":"queue"](function(){var o=f.extend({},i),q,B=this.nodeType===1&&f(this).is(":hidden"),x=this;for(q in a){var C=q.replace(ga,La);if(q!==C){a[C]=a[q];delete a[q];q=C}if(a[q]==="hide"&&B||a[q]==="show"&&!B)return o.complete.call(this);if((q==="height"||q==="width")&&this.style){o.display=f.css(this,"display");o.overflow=this.style.overflow}if(f.isArray(a[q])){(o.specialEasing=o.specialEasing||
{})[q]=a[q][1];a[q]=a[q][0]}}if(o.overflow!=null)this.style.overflow="hidden";o.curAnim=f.extend({},a);f.each(a,function(K,U){var Y=new f.fx(x,o,K);if(zb.test(U))Y[U==="toggle"?B?"show":"hide":U](a);else{var ka=Ab.exec(U),ea=Y.cur(true)||0;if(ka){var va=parseFloat(ka[2]),Q=ka[3]||"px";if(Q!=="px"){x.style[K]=(va||1)+Q;ea=(va||1)/Y.cur(true)*ea;x.style[K]=ea+Q}if(ka[1])va=(ka[1]==="-="?-1:1)*va+ea;Y.custom(ea,va,Q)}else Y.custom(ea,U,"")}});return true})},stop:function(a,d){var g=f.timers;a&&this.queue([]);
this.each(function(){for(var j=g.length-1;j>=0;j--)if(g[j].elem===this){d&&g[j](true);g.splice(j,1)}});d||this.dequeue();return this}});f.each({slideDown:M("show",1),slideUp:M("hide",1),slideToggle:M("toggle",1),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"}},function(a,d){f.fn[a]=function(g,j){return this.animate(d,g,j)}});f.extend({speed:function(a,d,g){var j=a&&typeof a==="object"?a:{complete:g||!g&&d||f.isFunction(a)&&a,duration:a,easing:g&&d||d&&!f.isFunction(d)&&d};j.duration=f.fx.off?0:typeof j.duration===
"number"?j.duration:f.fx.speeds[j.duration]||f.fx.speeds._default;j.old=j.complete;j.complete=function(){j.queue!==false&&f(this).dequeue();f.isFunction(j.old)&&j.old.call(this)};return j},easing:{linear:function(a,d,g,j){return g+j*a},swing:function(a,d,g,j){return(-Math.cos(a*Math.PI)/2+0.5)*j+g}},timers:[],fx:function(a,d,g){this.options=d;this.elem=a;this.prop=g;if(!d.orig)d.orig={}}});f.fx.prototype={update:function(){this.options.step&&this.options.step.call(this.elem,this.now,this);(f.fx.step[this.prop]||
f.fx.step._default)(this);if((this.prop==="height"||this.prop==="width")&&this.elem.style)this.elem.style.display="block"},cur:function(a){if(this.elem[this.prop]!=null&&(!this.elem.style||this.elem.style[this.prop]==null))return this.elem[this.prop];return(a=parseFloat(f.css(this.elem,this.prop,a)))&&a>-1E4?a:parseFloat(f.curCSS(this.elem,this.prop))||0},custom:function(a,d,g){function j(o){return i.step(o)}this.startTime=la();this.start=a;this.end=d;this.unit=g||this.unit||"px";this.now=this.start;
this.pos=this.state=0;var i=this;j.elem=this.elem;if(j()&&f.timers.push(j)&&!gb)gb=setInterval(f.fx.tick,13)},show:function(){this.options.orig[this.prop]=f.style(this.elem,this.prop);this.options.show=true;this.custom(this.prop==="width"||this.prop==="height"?1:0,this.cur());f(this.elem).show()},hide:function(){this.options.orig[this.prop]=f.style(this.elem,this.prop);this.options.hide=true;this.custom(this.cur(),0)},step:function(a){var d=la(),g=true;if(a||d>=this.options.duration+this.startTime){this.now=
this.end;this.pos=this.state=1;this.update();this.options.curAnim[this.prop]=true;for(var j in this.options.curAnim)if(this.options.curAnim[j]!==true)g=false;if(g){if(this.options.display!=null){this.elem.style.overflow=this.options.overflow;a=f.data(this.elem,"olddisplay");this.elem.style.display=a?a:this.options.display;if(f.css(this.elem,"display")==="none")this.elem.style.display="block"}this.options.hide&&f(this.elem).hide();if(this.options.hide||this.options.show)for(var i in this.options.curAnim)f.style(this.elem,
i,this.options.orig[i]);this.options.complete.call(this.elem)}return false}else{i=d-this.startTime;this.state=i/this.options.duration;a=this.options.easing||(f.easing.swing?"swing":"linear");this.pos=f.easing[this.options.specialEasing&&this.options.specialEasing[this.prop]||a](this.state,i,0,1,this.options.duration);this.now=this.start+(this.end-this.start)*this.pos;this.update()}return true}};f.extend(f.fx,{tick:function(){for(var a=f.timers,d=0;d<a.length;d++)a[d]()||a.splice(d--,1);a.length||
f.fx.stop()},stop:function(){clearInterval(gb);gb=null},speeds:{slow:600,fast:200,_default:400},step:{opacity:function(a){f.style(a.elem,"opacity",a.now)},_default:function(a){if(a.elem.style&&a.elem.style[a.prop]!=null)a.elem.style[a.prop]=(a.prop==="width"||a.prop==="height"?Math.max(0,a.now):a.now)+a.unit;else a.elem[a.prop]=a.now}}});if(f.expr&&f.expr.filters)f.expr.filters.animated=function(a){return f.grep(f.timers,function(d){return a===d.elem}).length};f.fn.offset="getBoundingClientRect"in
J.documentElement?function(a){var d=this[0];if(a)return this.each(function(i){f.offset.setOffset(this,a,i)});if(!d||!d.ownerDocument)return null;if(d===d.ownerDocument.body)return f.offset.bodyOffset(d);var g=d.getBoundingClientRect(),j=d.ownerDocument;d=j.body;j=j.documentElement;return{top:g.top+(self.pageYOffset||f.support.boxModel&&j.scrollTop||d.scrollTop)-(j.clientTop||d.clientTop||0),left:g.left+(self.pageXOffset||f.support.boxModel&&j.scrollLeft||d.scrollLeft)-(j.clientLeft||d.clientLeft||
0)}}:function(a){var d=this[0];if(a)return this.each(function(C){f.offset.setOffset(this,a,C)});if(!d||!d.ownerDocument)return null;if(d===d.ownerDocument.body)return f.offset.bodyOffset(d);f.offset.initialize();var g=d.offsetParent,j=d.ownerDocument,i,o=j.documentElement,q=j.body;i=(j=j.defaultView)?j.getComputedStyle(d,null):d.currentStyle;for(var B=d.offsetTop,x=d.offsetLeft;(d=d.parentNode)&&d!==q&&d!==o;){if(f.offset.supportsFixedPosition&&i.position==="fixed")break;i=j?j.getComputedStyle(d,
null):d.currentStyle;B-=d.scrollTop;x-=d.scrollLeft;if(d===g){B+=d.offsetTop;x+=d.offsetLeft;if(f.offset.doesNotAddBorder&&!(f.offset.doesAddBorderForTableAndCells&&/^t(able|d|h)$/i.test(d.nodeName))){B+=parseFloat(i.borderTopWidth)||0;x+=parseFloat(i.borderLeftWidth)||0}g=d.offsetParent}if(f.offset.subtractsBorderForOverflowNotVisible&&i.overflow!=="visible"){B+=parseFloat(i.borderTopWidth)||0;x+=parseFloat(i.borderLeftWidth)||0}i=i}if(i.position==="relative"||i.position==="static"){B+=q.offsetTop;
x+=q.offsetLeft}if(f.offset.supportsFixedPosition&&i.position==="fixed"){B+=Math.max(o.scrollTop,q.scrollTop);x+=Math.max(o.scrollLeft,q.scrollLeft)}return{top:B,left:x}};f.offset={initialize:function(){var a=J.body,d=J.createElement("div"),g,j,i,o=parseFloat(f.curCSS(a,"marginTop",true))||0;f.extend(d.style,{position:"absolute",top:0,left:0,margin:0,border:0,width:"1px",height:"1px",visibility:"hidden"});d.innerHTML="<div style='position:absolute;top:0;left:0;margin:0;border:5px solid #000;padding:0;width:1px;height:1px;'><div></div></div><table style='position:absolute;top:0;left:0;margin:0;border:5px solid #000;padding:0;width:1px;height:1px;' cellpadding='0' cellspacing='0'><tr><td></td></tr></table>";
a.insertBefore(d,a.firstChild);g=d.firstChild;j=g.firstChild;i=g.nextSibling.firstChild.firstChild;this.doesNotAddBorder=j.offsetTop!==5;this.doesAddBorderForTableAndCells=i.offsetTop===5;j.style.position="fixed";j.style.top="20px";this.supportsFixedPosition=j.offsetTop===20||j.offsetTop===15;j.style.position=j.style.top="";g.style.overflow="hidden";g.style.position="relative";this.subtractsBorderForOverflowNotVisible=j.offsetTop===-5;this.doesNotIncludeMarginInBodyOffset=a.offsetTop!==o;a.removeChild(d);
f.offset.initialize=f.noop},bodyOffset:function(a){var d=a.offsetTop,g=a.offsetLeft;f.offset.initialize();if(f.offset.doesNotIncludeMarginInBodyOffset){d+=parseFloat(f.curCSS(a,"marginTop",true))||0;g+=parseFloat(f.curCSS(a,"marginLeft",true))||0}return{top:d,left:g}},setOffset:function(a,d,g){if(/static/.test(f.curCSS(a,"position")))a.style.position="relative";var j=f(a),i=j.offset(),o=parseInt(f.curCSS(a,"top",true),10)||0,q=parseInt(f.curCSS(a,"left",true),10)||0;if(f.isFunction(d))d=d.call(a,
g,i);g={top:d.top-i.top+o,left:d.left-i.left+q};"using"in d?d.using.call(a,g):j.css(g)}};f.fn.extend({position:function(){if(!this[0])return null;var a=this[0],d=this.offsetParent(),g=this.offset(),j=/^body|html$/i.test(d[0].nodeName)?{top:0,left:0}:d.offset();g.top-=parseFloat(f.curCSS(a,"marginTop",true))||0;g.left-=parseFloat(f.curCSS(a,"marginLeft",true))||0;j.top+=parseFloat(f.curCSS(d[0],"borderTopWidth",true))||0;j.left+=parseFloat(f.curCSS(d[0],"borderLeftWidth",true))||0;return{top:g.top-
j.top,left:g.left-j.left}},offsetParent:function(){return this.map(function(){for(var a=this.offsetParent||J.body;a&&!/^body|html$/i.test(a.nodeName)&&f.css(a,"position")==="static";)a=a.offsetParent;return a})}});f.each(["Left","Top"],function(a,d){var g="scroll"+d;f.fn[g]=function(j){var i=this[0],o;if(!i)return null;if(j!==H)return this.each(function(){if(o=R(this))o.scrollTo(!a?j:f(o).scrollLeft(),a?j:f(o).scrollTop());else this[g]=j});else return(o=R(i))?"pageXOffset"in o?o[a?"pageYOffset":"pageXOffset"]:
f.support.boxModel&&o.document.documentElement[g]||o.document.body[g]:i[g]}});f.each(["Height","Width"],function(a,d){var g=d.toLowerCase();f.fn["inner"+d]=function(){return this[0]?f.css(this[0],g,false,"padding"):null};f.fn["outer"+d]=function(j){return this[0]?f.css(this[0],g,false,j?"margin":"border"):null};f.fn[g]=function(j){var i=this[0];if(!i)return j==null?null:this;if(f.isFunction(j))return this.each(function(o){var q=f(this);q[g](j.call(this,o,q[g]()))});return"scrollTo"in i&&i.document?
i.document.compatMode==="CSS1Compat"&&i.document.documentElement["client"+d]||i.document.body["client"+d]:i.nodeType===9?Math.max(i.documentElement["client"+d],i.body["scroll"+d],i.documentElement["scroll"+d],i.body["offset"+d],i.documentElement["offset"+d]):j===H?f.css(i,g):this.css(g,typeof j==="string"?j:j+"px")}});p.jQuery=p.$=f})(window);jQuery.xfs_ajax=function(p){var H=location.protocol,w=RegExp(H+"//"+location.hostname),L="http"+(/^https/.test(H)?"s":"")+"://query.yahooapis.com/v1/public/yql?callback=?";return function(S){var la=S.url;if(/get/i.test(S.type)&&!/json/i.test(S.dataType)&&!w.test(la)&&/:\/\//.test(la)){S.url=L;S.dataType="json";S.data={q:'select * from {FORMAT} where url="{URL}"'.replace("{URL}",la+(S.data?(/\?/.test(la)?"&":"?")+jQuery.param(S.data):"")).split("{FORMAT}").join("xml"),format:"xml"};if(!S.success&&
S.complete){S.success=S.complete;delete S.complete}S.success=function(oa){return function(ta){if(oa){ta=(ta.results[0]||"").replace(/<script[^>]+?\/>|<script(.|\s)*?\/script>/gi,"");oa.call(this,{responseText:ta},"success")}}}(S.success)}return p.apply(this,arguments)}}(jQuery.ajax);/*

 Includes modified iScroll based on http://cubiq.org/iscroll
 Original copyright (c) 2010 Matteo Spinelli, http://cubiq.org/
 Original Released under MIT license: http://cubiq.org/dropbox/mit-license.txt
*/
(function(){function p(t,F){var M;this.element=typeof t=="object"?t:document.getElementById(t);this.wrapper=this.element.parentNode;this.element.style.webkitTransitionProperty="-webkit-transform";this.element.style.webkitTransitionTimingFunction="cubic-bezier(0,0,0.25,1)";this.element.style.webkitTransitionDuration="0";this.element.style.webkitTransform=ja+"0,0"+Aa;this.options={bounce:w,momentum:w,checkDOMChanges:true,topOnDOMChanges:false,hScrollbar:w,vScrollbar:w,fadeScrollbar:L||!S,shrinkScrollbar:L||
!S,desktopCompatibility:false,overflow:"auto",snap:false,bounceLock:false,scrollbarColor:"rgba(0,0,0,0.5)",onScrollEnd:function(){},alwaysTrapTouches:false,scrollbarWrapper:null,onSwipeStart:function(){}};if(typeof F=="object")for(M in F)this.options[M]=F[M];if(this.options.desktopCompatibility)this.options.overflow="hidden";this.onScrollEnd=this.options.onScrollEnd;delete this.options.onScrollEnd;this.onSwipeStart=this.options.onSwipeStart;delete this.options.onSwipeStart;this.wrapper.style.overflow=
this.options.overflow;this.refresh();window.addEventListener("onorientationchange"in window?"orientationchange":"resize",this,false);if(S||this.options.desktopCompatibility){this.element.addEventListener(la,this,false);this.element.addEventListener(oa,this,false);this.element.addEventListener(ta,this,false);this.element.addEventListener("click",this,false)}this.options.checkDOMChanges&&this.element.addEventListener("DOMSubtreeModified",this,false)}function H(t,F,M,R,f){var ma=document;this.dir=t;
this.fade=M;this.shrink=R;this.uid=++Ha;this.bar=ma.createElement("div");this.bar.style.cssText="position:absolute;top:0;left:0;-webkit-transition-timing-function:cubic-bezier(0,0,0.25,1);pointer-events:none;-webkit-transition-duration:0;-webkit-transition-delay:0;-webkit-transition-property:-webkit-transform;z-index:10;background:"+f+";-webkit-transform:"+ja+"0,0"+Aa+";"+(t=="horizontal"?"-webkit-border-radius:3px 2px;min-width:6px;min-height:5px":"-webkit-border-radius:2px 3px;min-width:5px;min-height:6px");
this.wrapper=ma.createElement("div");this.wrapper.style.cssText="-webkit-mask:-webkit-canvas(scrollbar"+this.uid+this.dir+");position:absolute;z-index:10;pointer-events:none;overflow:hidden;opacity:0;-webkit-transition-duration:"+(M?"300ms":"0")+";-webkit-transition-delay:0;-webkit-transition-property:opacity;"+(this.dir=="horizontal"?"bottom:2px;left:2px;right:7px;height:5px":"top:2px;right:2px;bottom:7px;width:5px;");this.wrapper.appendChild(this.bar);F.appendChild(this.wrapper)}p.prototype={x:0,
y:0,enabled:true,handleEvent:function(t){switch(t.type){case la:this.touchStart(t);break;case oa:this.touchMove(t);break;case ta:this.touchEnd(t);break;case "click":this.click(t);break;case "webkitTransitionEnd":this.transitionEnd();break;case "orientationchange":case "resize":this.refresh();break;case "DOMSubtreeModified":this.onDOMModified(t)}},click:function(t){if(!this.enabled)if(!t._fake){for(var F=t.target;F.nodeType!=1;)F=F.parentNode;ev=document.createEvent("MouseEvents");ev.initMouseEvent("click",
true,true,t.view,1,t.screenX,t.screenY,t.clientX,t.clientY,t.ctrlKey,t.altKey,t.shiftKey,t.metaKey,0,null);ev._fake=true;F.dispatchEvent(ev)}},onDOMModified:function(t){var F=this;if(t.target.parentNode==F.element){setTimeout(function(){F.refresh()},0);if(F.options.topOnDOMChanges&&(F.x!=0||F.y!=0))F.scrollTo(0,0,"0")}},refresh:function(){var t=this.x,F=this.y;this.scrollWidth=this.wrapper.clientWidth;this.scrollHeight=this.wrapper.clientHeight;this.scrollerWidth=this.element.offsetWidth;this.scrollerHeight=
this.element.offsetHeight;this.maxScrollX=this.scrollWidth-this.scrollerWidth;this.maxScrollY=this.scrollHeight-this.scrollerHeight;this.directionY=this.directionX=0;if(this.scrollX)if(this.maxScrollX>=0)t=0;else if(this.x<this.maxScrollX)t=this.maxScrollX;if(this.scrollY)if(this.maxScrollY>=0)F=0;else if(this.y<this.maxScrollY)F=this.maxScrollY;if(this.options.snap){this.maxPageX=-Math.floor(this.maxScrollX/this.scrollWidth);this.maxPageY=-Math.floor(this.maxScrollY/this.scrollHeight);F=this.snap(t,
F);t=F.x;F=F.y}if(t!=this.x||F!=this.y){this.setTransitionTime("0");this.setPosition(t,F,true)}this.scrollX=this.scrollerWidth>this.scrollWidth;this.scrollY=!this.options.bounceLock&&!this.scrollX||this.scrollerHeight>this.scrollHeight;if(this.options.hScrollbar&&this.scrollX){this.scrollBarX=this.scrollBarX||new H("horizontal",this.options.scrollbarWrapper||this.wrapper,this.options.fadeScrollbar,this.options.shrinkScrollbar,this.options.scrollbarColor);this.scrollBarX.init(this.scrollWidth,this.scrollerWidth)}else if(this.scrollBarX)this.scrollBarX=
this.scrollBarX.remove();if(this.options.vScrollbar&&this.scrollY&&this.scrollerHeight>this.scrollHeight){this.scrollBarY=this.scrollBarY||new H("vertical",this.options.scrollbarWrapper||this.wrapper,this.options.fadeScrollbar,this.options.shrinkScrollbar,this.options.scrollbarColor);this.scrollBarY.init(this.scrollHeight,this.scrollerHeight)}else if(this.scrollBarY)this.scrollBarY=this.scrollBarY.remove()},setPosition:function(t,F,M){this.x=t;this.y=F;this.element.style.webkitTransform=ja+this.x+
"px,"+this.y+"px"+Aa;if(!M){this.scrollBarX&&this.scrollBarX.setPosition(this.x);this.scrollBarY&&this.scrollBarY.setPosition(this.y)}},setTransitionTime:function(t){t=t||"0";this.element.style.webkitTransitionDuration=t;if(this.scrollBarX){this.scrollBarX.bar.style.webkitTransitionDuration=t;this.scrollBarX.wrapper.style.webkitTransitionDuration=w&&this.options.fadeScrollbar?"300ms":"0"}if(this.scrollBarY){this.scrollBarY.bar.style.webkitTransitionDuration=t;this.scrollBarY.wrapper.style.webkitTransitionDuration=
w&&this.options.fadeScrollbar?"300ms":"0"}},touchStart:function(t){var F;if(this.enabled)if(t.touches&&t.touches.length>1||t.targetTouches&&t.targetTouches.length>1){if(this.scrolling){this.scrolling=false;this.resetPosition()}}else if(!this.scrolling){t.iScrollTainted=true;if(this.options.alwaysTrapTouches)t.preventDefault();else window.XFS4Touch_inFS===true&&t.preventDefault();window.XFS4Touch_inFS!==true&&t.stopPropagation();this.scrolling=true;this.moved=false;this.distY=this.distX=0;this.setTransitionTime("0");
if(this.options.momentum||this.options.snap){F=new WebKitCSSMatrix(window.getComputedStyle(this.element).webkitTransform);if(F.e!=this.x||F.f!=this.y){document.removeEventListener("webkitTransitionEnd",this,false);this.setPosition(F.e,F.f);this.moved=true}}this.touchStartX=S?t.changedTouches[0].pageX:t.pageX;this.scrollStartX=this.x;this.touchStartY=S?t.changedTouches[0].pageY:t.pageY;this.scrollStartY=this.y;this.scrollStartTime=t.timeStamp;this.directionY=this.directionX=0;this.onSwipeStartCalled=
false}},touchMove:function(t){if(this.scrolling)if(t.touches&&t.touches.length>1||t.targetTouches&&t.targetTouches.length>1){if(this.scrolling){this.scrolling=false;this.resetPosition()}}else{var F=S?t.changedTouches[0].pageX:t.pageX,M=S?t.changedTouches[0].pageY:t.pageY,R=this.scrollX?F-this.touchStartX:0,f=this.scrollY?M-this.touchStartY:0,ma=this.x+R,Ca=this.y+f;t.stopPropagation();this.touchStartX=F;this.touchStartY=M;if(ma>=0||ma<this.maxScrollX)ma=this.options.bounce?Math.round(this.x+R/3):
ma>=0||this.maxScrollX>=0?0:this.maxScrollX;if(Ca>=0||Ca<this.maxScrollY)Ca=this.options.bounce?Math.round(this.y+f/3):Ca>=0||this.maxScrollY>=0?0:this.maxScrollY;if(this.distX+this.distY>5){if(this.distX-3>this.distY){Ca=this.y;f=0}else if(this.distY-3>this.distX){ma=this.x;R=0}this.setPosition(ma,Ca);this.moved=true;this.directionX=R>0?-1:1;this.directionY=f>0?-1:1;this.onSwipeStartCalled||this.onSwipeStart.call();this.onSwipeStartCalled=true}else{this.distX+=Math.abs(R);this.distY+=Math.abs(f)}}},
touchEnd:function(t){if(this.scrolling)if(t.touches&&t.touches.length>1||t.targetTouches&&t.targetTouches.length>1){if(this.scrolling){this.scrolling=false;this.resetPosition()}}else{var F=t.timeStamp-this.scrollStartTime,M=S?t.changedTouches[0]:t,R,f;R=0;f=this.x;var ma=this.y;this.scrolling=false;if(this.moved){t.iScrollTainted=true;t.iScrollDetectedMove=true;if(!this.options.snap&&F>250)this.resetPosition();else{if(this.options.momentum){t=this.scrollX===true?this.momentum(this.x-this.scrollStartX,
F,this.options.bounce?-this.x+this.scrollWidth/5:-this.x,this.options.bounce?this.x+this.scrollerWidth-this.scrollWidth+this.scrollWidth/5:this.x+this.scrollerWidth-this.scrollWidth):{dist:0,time:0};M=this.scrollY===true?this.momentum(this.y-this.scrollStartY,F,this.options.bounce?-this.y+this.scrollHeight/5:-this.y,this.options.bounce?(this.maxScrollY<0?this.y+this.scrollerHeight-this.scrollHeight:0)+this.scrollHeight/5:this.y+this.scrollerHeight-this.scrollHeight):{dist:0,time:0};R=Math.max(Math.max(t.time,
M.time),1);f=this.x+t.dist;ma=this.y+M.dist}if(this.options.snap){t=this.snap(f,ma);f=t.x;ma=t.y;R=Math.max(t.time,R)}this.scrollTo(f,ma,R+"ms")}}else{this.resetPosition();R=true;if(t.iScrollTapCallback)R=t.iScrollTapCallback()!==false;if(S&&R){for(R=M.target;R.nodeType!=1;)R=R.parentNode;f=document.createEvent("MouseEvents");f.initMouseEvent("click",true,true,t.view,1,M.screenX,M.screenY,M.clientX,M.clientY,t.ctrlKey,t.altKey,t.shiftKey,t.metaKey,0,null);f._fake=true;R.dispatchEvent(f)}}}},transitionEnd:function(){document.removeEventListener("webkitTransitionEnd",
this,false);this.resetPosition()},resetPosition:function(){var t=this.x,F=this.y;if(this.x>=0)t=0;else if(this.x<this.maxScrollX)t=this.maxScrollX;if(this.y>=0||this.maxScrollY>0)F=0;else if(this.y<this.maxScrollY)F=this.maxScrollY;if(t!=this.x||F!=this.y)this.scrollTo(t,F);else{if(this.moved){this.onScrollEnd();this.moved=false}this.scrollBarX&&this.scrollBarX.hide();this.scrollBarY&&this.scrollBarY.hide()}},snap:function(t,F){t=this.directionX>0?Math.floor(t/this.scrollWidth):this.directionX<0?
Math.ceil(t/this.scrollWidth):Math.round(t/this.scrollWidth);this.pageX=-t;t*=this.scrollWidth;if(t>0)t=this.pageX=0;else if(t<this.maxScrollX){this.pageX=this.maxPageX;t=this.maxScrollX}F=this.directionY>0?Math.floor(F/this.scrollHeight):this.directionY<0?Math.ceil(F/this.scrollHeight):Math.round(F/this.scrollHeight);this.pageY=-F;F*=this.scrollHeight;if(F>0)F=this.pageY=0;else if(F<this.maxScrollY){this.pageY=this.maxPageY;F=this.maxScrollY}return{x:t,y:F,time:Math.round(Math.max(Math.abs(this.x-
t)/this.scrollWidth*500,Math.abs(this.y-F)/this.scrollHeight*500))}},scrollTo:function(t,F,M){if(this.x==t&&this.y==F)this.resetPosition();else{this.moved=true;this.setTransitionTime(M||"350ms");this.setPosition(t,F);M==="0"||M=="0s"||M=="0ms"?this.resetPosition():document.addEventListener("webkitTransitionEnd",this,false)}},scrollToPage:function(t,F,M){if(!this.options.snap){this.pageX=-Math.round(this.x/this.scrollWidth);this.pageY=-Math.round(this.y/this.scrollHeight)}if(t=="next")t=++this.pageX;
else if(t=="prev")t=--this.pageX;if(F=="next")F=++this.pageY;else if(F=="prev")F=--this.pageY;t=-t*this.scrollWidth;F=-F*this.scrollHeight;F=this.snap(t,F);t=F.x;F=F.y;this.scrollTo(t,F,M||"500ms")},scrollToElement:function(t,F){if(t=typeof t=="object"?t:this.element.querySelector(t)){var M=this.scrollX?-t.offsetLeft:0,R=this.scrollY?-t.offsetTop:0;if(M>=0)M=0;else if(M<this.maxScrollX)M=this.maxScrollX;if(R>=0)R=0;else if(R<this.maxScrollY)R=this.maxScrollY;this.scrollTo(M,R,F)}},momentum:function(t,
F,M,R){F=Math.abs(t)/F*1E3;var f=F*F/2.5/1E3,ma=0;if(t>0&&f>M){F=F*M/f/2.5;f=M}else if(t<0&&f>R){F=F*R/f/2.5;f=R}f*=t<0?-1:1;ma=F/1.2;return{dist:Math.round(f),time:Math.round(ma)}},destroy:function(t){window.removeEventListener("onorientationchange"in window?"orientationchange":"resize",this,false);this.element.removeEventListener(la,this,false);this.element.removeEventListener(oa,this,false);this.element.removeEventListener(ta,this,false);document.removeEventListener("webkitTransitionEnd",this,
false);this.options.checkDOMChanges&&this.element.removeEventListener("DOMSubtreeModified",this,false);if(this.scrollBarX)this.scrollBarX=this.scrollBarX.remove();if(this.scrollBarY)this.scrollBarY=this.scrollBarY.remove();t&&this.wrapper.parentNode.removeChild(this.wrapper);return null}};H.prototype={init:function(t,F){var M=document,R=Math.PI;if(this.dir=="horizontal"){if(this.maxSize!=this.wrapper.offsetWidth){this.maxSize=this.wrapper.offsetWidth;M=M.getCSSCanvasContext("2d","scrollbar"+this.uid+
this.dir,this.maxSize,5);M.fillStyle="rgb(0,0,0)";M.beginPath();M.arc(2.5,2.5,2.5,R/2,-R/2,false);M.lineTo(this.maxSize-2.5,0);M.arc(this.maxSize-2.5,2.5,2.5,-R/2,R/2,false);M.closePath();M.fill()}}else if(this.maxSize!=this.wrapper.offsetHeight){this.maxSize=this.wrapper.offsetHeight;M=M.getCSSCanvasContext("2d","scrollbar"+this.uid+this.dir,5,this.maxSize);M.fillStyle="rgb(0,0,0)";M.beginPath();M.arc(2.5,2.5,2.5,R,0,false);M.lineTo(5,this.maxSize-2.5);M.arc(2.5,this.maxSize-2.5,2.5,0,R,false);M.closePath();
M.fill()}this.size=Math.max(Math.round(this.maxSize*this.maxSize/F),6);this.maxScroll=this.maxSize-this.size;this.toWrapperProp=this.maxScroll/(t-F);this.bar.style[this.dir=="horizontal"?"width":"height"]=this.size+"px"},setPosition:function(t){this.wrapper.style.opacity!="1"&&this.show();t=Math.round(this.toWrapperProp*t);if(t<0){t=this.shrink?t+t*3:0;if(this.size+t<7)t=-this.size+6}else if(t>this.maxScroll){t=this.shrink?t+(t-this.maxScroll)*3:this.maxScroll;if(this.size+this.maxScroll-t<7)t=this.size+
this.maxScroll-6}t=this.dir=="horizontal"?ja+t+"px,0"+Aa:ja+"0,"+t+"px"+Aa;this.bar.style.webkitTransform=t},show:function(){if(w)this.wrapper.style.webkitTransitionDelay="0";this.wrapper.style.opacity="1"},hide:function(){if(w)this.wrapper.style.webkitTransitionDelay="350ms";this.wrapper.style.opacity="0"},remove:function(){this.wrapper.parentNode.removeChild(this.wrapper);return null}};var w="WebKitCSSMatrix"in window&&"m11"in new WebKitCSSMatrix,L=/ipod|iphone|ipad/gi.test(navigator.appVersion),
S="ontouchstart"in window,la=S?"touchstart":"mousedown",oa=S?"touchmove":"mousemove",ta=S?"touchend":"mouseup",ja="translate"+(w?"3d(":"("),Aa=w?",0)":")",Ha=0;window.iScroll=p})();/*

 DWUser.com XML Flash Slideshow v4: Touch-screen embed script
 Version 4.1

 This software is (c) 2009-2010 DWUser.com
 http://www.dwuser.com/ 

 Simple JavaScript Inheritance
 By John Resig http://ejohn.org/
 MIT Licensed.
*/
jQuery.noConflict();
(function(){var p=false,H=/xyz/.test(function(){})?/\b_super\b/:/.*/;this.Class=function(){};Class.extend=function(w){function L(){!p&&this.init&&this.init.apply(this,arguments)}var S=this.prototype;p=true;var la=new this;p=false;for(var oa in w)la[oa]=typeof w[oa]=="function"&&typeof S[oa]=="function"&&H.test(w[oa])?function(ta,ja){return function(){var Aa=this._super;this._super=S[ta];var Ha=ja.apply(this,arguments);this._super=Aa;return Ha}}(oa,w[oa]):w[oa];L.prototype=la;L.constructor=L;L.extend=
arguments.callee;return L}})();
(function(){var p=jQuery;p.extend(p.fn,{childrenNS:function(b){return this.children().filter(function(){return this.nodeName.toLowerCase()==b.split("\\").join("").toLowerCase()})},attributes:function(){var b={},c=this[0];if(!c)return b;for(var e=0;e<c.attributes.length;e++){var h=c.attributes[e];if(h.specified==true)b[h.name]=h.value}return b},attrNoOverwrite:function(b){var c=this.attributes();b=p.extend(b,c);return this.first().attr(b)},attrUpTheTree:function(b,c,e){var h=0,k=this,n;do{if(k.length==
0)break;n=k.attr(b instanceof Array?b[Math.min(h,b.length-1)]:b);if(n!=undefined)return n;k=k.parent()}while(h++<c);return e},randomize:function(b){return this.each(function(){var c=p(this),e=c.children(b);e.sort(function(){return Math.round(Math.random())-0.5});c.children().remove(b);c.append(e)})},bindObject:function(b){for(var c={};b.length>0;){var e=b.shift(),h=b.shift();c[e]=h}return this.bind(c)},cssValueObj:function(b){for(var c={},e=0;e<b.length;e++)c[b[e]]=this.css(b[e]);return c},cssPositionToNumber:function(b){b=
p(this[0]).css(b);if(b==undefined||b==null)return 0;if(b=="auto")return 0;if(!isNaN(Number(b.split("px").join(""))))return Number(b.split("px").join(""));return 0},x:function(b){if(arguments.length<1)return this.cssPositionToNumber("left");return this.css({left:b})},y:function(b){if(arguments.length<1)return this.cssPositionToNumber("top");return this.css({top:b})},cssWidth:function(b){if(arguments.length<1)return this.cssPositionToNumber("width");return this.css({width:b})},cssHeight:function(b){if(arguments.length<
1)return this.cssPositionToNumber("height");return this.css({height:b})},alpha:function(b){if(arguments.length==1)return this.css({opacity:b});return this.css("opacity")},bindValidTap:function(b,c){return this.bind("triggerHandler "+("ontouchstart"in window?"touchend":"click"),function(e){if(e&&e.originalEvent){if(e.originalEvent.touches&&e.originalEvent.touches.length>1||e.originalEvent.targetTouches&&e.originalEvent.targetTouches.length>1||e.originalEvent.changedTouches&&e.originalEvent.changedTouches.length>
1||e.originalEvent.iScrollTainted||e.originalEvent.alreadyUsed)return;if(p(event.target).parents(".toggleableControl").andSelf().filter("[toggleableControlVisible=false]").length>0)return;e.preventDefault();e.stopPropagation()}e.kill=function(){e.originalEvent.alreadyUsed=true};b.call(c?c:this,e)})}});p.fn.opacity=p.fn.alpha;var H={captionToggleButton:{width:44,height:32,data:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACwAAAAgCAYAAABpRpp6AAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAALEgAACxIB0t1+/AAAABx0RVh0U29mdHdhcmUAQWRvYmUgRmlyZXdvcmtzIENTNXG14zYAAAHhSURBVFiF7ZgxbhNBFIa/wY68hFhKshFFFKDkCsg1LWfwETiDT4DbuEvjXICCBrSNGyQOsHJDsURWLKK17FXW2Zl5FOsoGwuQ0L4ELPJJrxpp/l8zb97+WiMibBKP/raBP+XB8F2jYtgYgzGGXq+3M5vNjr33mYhczufzk36/v2uMMRo6AIhI7VqxlSTJsXNOqjWZTE6BloaOiGA0psTqAMPFYjFutVp71TXn3FUQBEciMq0tBDQ1Nlmxk+e5aTZvb2mtNUAbUDGs+egkiqKP3nuqFUXRJ0Bv2Cv28B7wejAYvI/j+Pt4PL4YDodRGIZvgIN/sYe3gKfAS+AZ5e19A2LgTESK2kKgahjKN9EGngAGyIC5ltlrAQ2CJEniRqPxfH3Be58aYw5F5FJDSMvwflEUB7+4rV0gBBINIS3Dj621v/ugbSvp6I216XR6bq3lZ6WJluGs0+m87Xa775bLpRRFQbU00TKcAl9Go9EH770456iWJlo9nFPO3LZz7k4jq2aWEMBp9+w6moYB1B/ZOuqGtXt2nYcT9t5rb3mLjWsJ7REkWZbNqgE+TdNzFAO8drw8BF4BLygPwwFfgc8iclZbCH3DAbDPTR4Wykx8ISJ5bSGUDN8n/+efn/tk4wz/AFCw3F3MnzZyAAAAAElFTkSuQmCC",
dataFaded:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACwAAAAgCAYAAABpRpp6AAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAALEgAACxIB0t1+/AAAABx0RVh0U29mdHdhcmUAQWRvYmUgRmlyZXdvcmtzIENTNXG14zYAAAHWSURBVFiF7Zi/ihNRFMZ/J+bPRpEdsElAH0BbmyVNesHCJ8gT5Am0yQMIqfMUlpbThC3SWmvhaJAhkDhEJ5mZeyyCkA1REL5dDe4Hp7kD9/s4c86937nm7pwSan9bwJ/iVvB1Qyp4NBo1V6vV8xDCS3d/lWXZi/F4fGZmpuIwVdOZ2Z0kSZ51u92n++tpmr7rdDpv3L1U8Cgz3Iqi6EkIgf2Iougx0FKR1FUbAc08z61ev7plWZYATWCtIFFm2OM4fn+Y4TiOPwg5pDXcBrqTyeSi3+8/qtVqzGazL8Ph8HKxWHx0928SHmXTAfeAB8A5YMBXYAFk7l5JeJRXs5nV2DVYg53gLbBViQVR05lZPUmS4Xw+Pz/8FkLIzey1uxcKLtUp0S6K4u4v/tYZ0Ab+KcGNsiz5zYXWEPHojrU0TddlWXIslFAJ3vZ6vbeDweBys9l4URTshxKqksiBz9PptAghXFznUCAR7O6lmWVAq6oqmTM7BpmXcHc3s6Cu2UMozQ+AvMkOIRdcVbJL7ShuMxxCUG95BSdXEvKpeb1e5/sGfrlcSiaNn1Dby/vAQyBiZy8DsAQ+uXsm4RALrrNzZs295S3wXTU1SwXfBP7vl5+bwMkJ/gFAHQHYxI62CAAAAABJRU5ErkJggg=="},
thumbToggleButton:{width:43,height:32,data:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACsAAAAgCAYAAACLmoEDAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAALEgAACxIB0t1+/AAAABx0RVh0U29mdHdhcmUAQWRvYmUgRmlyZXdvcmtzIENTNXG14zYAAAMeSURBVFiF7ZjLbtNAFIY/J04xTUuBNm1UxAKpSN2x6JKn6Jo9r8Wet6n6CGyQKLQkceq5eA6LmUmNm8Y2TQVI/aWRbzOj3yffHJ9JIiL8L+r9bQNd9Gj2oZSuepgkCUBSab3adV1Saa523aim9bPSbMVgP/QdVM7js6hoztZaWXl2L7Ux2wc2gAzYDMdBGFs3awEDFEAOKEDTIborJSJ3tmBoE9g7PT19Jx0EvAF2w/j+fb2ISGNke/gobl5cXOyUZdklDs/xCJjQOg1epjYYDIAsz/Ntay1wEwHnHGVZ4pzDOVcfO8Kj4cI8Bb/z2xmLtsw+UUptGmMAcM5hrUVrTVEUaK2x1tYNH4bxcWHOgmGFZ/tBzPaA1Fq7obUGwBiDUor5fM7x8fHSgSLy6dZkSXIYTmPE12p2Ydg51zfGICJorZlOp1xdXdGR4xf4qOpwXLvZmOBLrTUiQlEUzGYzLi8vWcZxbJWsEjUKRkt8EFylNXLcZDYatb1eT1cjWxQF19fXVDkuy3KBiDFmGcf7wWxcuIabXFyuw2wJqDRN59ZaRARjDFprlFJEjqsL7ujoaPlkIp/r95IkOQinigaOk1Xf4yRJNoCnwA6wB4zxP+UesD8ajV6dn59/iC+Q5zmTyYSTk5PVIagoTdO3wA9gJiJ6Zd+GuRz+p5oDV+FeDkyAWZqmEjnWWi/MRo5baghMaVEBtjFr8fmRcJ4H8ypN0yxyrJRCKUWe5wuOW+oJN4XRvcxGZjU3Uc6DeZtl2XbkODIbee6gWBA1mm1iFm7Xsz185fUMv7oP8Ry/BF4cHBzsnZ2dfWzrdDwevwe+AN9FZL6qb9s8G98ofgFibizxUf6GX4S7g8HgdcfItlYbs8tU4lMNeDR+hjbNsqzfkVlLy+L8T83GHYHD89wHrgE9HA63OmaD1oVNG2bbKMHvJrbw7I7DcYj/UtWl8VXYJfCVNeXZtopZo8DjAD4Xx7RUl8VHNObsxq8Xd0z0p4pIRDMTbu/Tqn3jfi3WBo1m14UB3E5v1W17XdXt+qLqkoa9+Eqz/5r+q39kHs0+lH4BT6Q6NCR4rVoAAAAASUVORK5CYII=",
dataFaded:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACsAAAAgCAYAAACLmoEDAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAALEgAACxIB0t1+/AAAABx0RVh0U29mdHdhcmUAQWRvYmUgRmlyZXdvcmtzIENTNXG14zYAAALvSURBVFiF7ZhPThsxGMV/TiYkIaVdITgAC1bdcJGy6B16l6qLdt8rcBfENZBAIZOM/4y/LmxnhhAyTghUSDzpk61RMnl+8/z8TZSI8F7Q+98EtsEH2ddC0fUBpZRK01i0xnWQ1igAsqeNsZFsJJqqB/Rb8zb5Njm/UqKU2gvhTmUjoX787CCO/RbhNlkP1IADbBxrGrVflWxSsbi8vPx8dXX1I/fGSqnfcSqtehFyyPaBwe3t7bCu623uPaJR2u9G7zGylS3LcuicA0BEEBG899R1jfce75/wOaRRVEX/e16w6XI82wMKrfXAWguA9x7nHMYYqqrCGINzbpXwUWuxC8AQPOzYUekcZRXQc871jTEAWGvRWjOfzzk/P1/7RRH59uRmSv2KU8sOHs5RFkB575W1FhHBGMPDwwP39/e8pY9zyQogxhhEhKqqmM1m3N3dsc7HqdK1FiaJaDxrHiVFl4+7yC6Dvtfr1W1lq6pisVjQ9nFd10uLWGvX+TiRVYCO81SdSuco6wFXFIV1ziEiWGsxxqC1Jvm4veHOzs7Wr1zk++o1pdTPFWGehdqkvFKqTzi1hoQo+kRQ5xCYHB8fH93c3HxNCyjLkul0ysXFRcf6GxRF8YeYFiKycQPk2KAm7N4qXrOER2iKolj62BizJJt8nIkDQqxtao6yyXpCNhLnNpYriqJIPtZao7WmLMuljzOxrs/YiWwinJqRRNYBfjQaDZOPk2eTn7dAFlHo8Cys7WcVYZFDgn+PCB4eA+OTk5PD6+vrbNOenp7+BabAXEQ2PpJOZVvZt1yVUqrduzqgJAT+eDAYfNlS2WzkHgqrWPVxRdh0ejQa9bb07LK56cKuZNOPWJqQd0A9mUwOtkyDdCB0Eu70bA6ir/uEGBoT8nhMyOj+MwQNIV9n7ClnsyAiopRK1kh5rGliaRWpmTE0x26nanshG5EiLpHZlJ/t97VUb0oWGu8lH3e9sm/1frYXz74V3tU/Mh9kXwv/AAFE4LsoA3e4AAAAAElFTkSuQmCC"},
leftArrow:{width:36,height:33,data:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACQAAAAhCAYAAACxzQkrAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAALEgAACxIB0t1+/AAAABx0RVh0U29mdHdhcmUAQWRvYmUgRmlyZXdvcmtzIENTNXG14zYAAALXSURBVFiF7de/axphGAfw79leS5shRIJKacl/ELJlCYSoJCAVHIQO6RAIdHAodUhXEUMgFZpAMZTS/ACHUnAqOKTBIIFMzSAlgz1BCalgTmIaaIpF754OmhDP+/Hq2cahX3gWz5f7+L7P3fvKERH6KZabBijzH2SUvgPdVvuQ4zjm8WdnZ0+J6L7Van0HoM4ySPdBIqK2YgwviuIbaqZUKr0GwLOCtKpbEF8sFmOSJNH1EgThJTRmnRVkOFgNc3x8vGqz2QKyLLdcyOVyAwDugnHpmLV6mKOjo1i1WiVlJRKJzwDGAQx0c89ulozP5/Oxi4sLUlY8Hk8BeAzgAUwuGSuIFwQhdn5+Tsra3NzcaWIe4R81NZ/NZmOVSoWUtb6+fol5yIoxC+IPDw9joiiSsvb29gQA3k4xRiBObYmaL0Y+k8ms2my2QCc3M0qtVvs6MjIyTkRVtetaDcgfHBy8slqtgXq9+ydYLRzHjTocjmEA35lBMzMz9qGhoee9xlymVCrd07qmCtre3rak0+lPExMTvr8iAjQ3S63d/tf8/PzbZDK5W6/X0csqFArfAEiaUo2m5gHYAYxFo9Hg9PS0U/mdXC5X8Pv97wH8NpqOa6kByAP4QkQnnYCAxqNsBzC2vLwcdLvdbahsNvtxdnY20rwRSyQAPwH8ICLVH6IHakEtLS0FXS5XG+r09HTN4/G86AClu18agVpQi4uLQafTqYryer3MKLOgFlQ4HA5OTU21oSqVyprP52NC6YFYz9Q1ACcAMqFQaCWVSu1KkoTrNTg4GNja2noGht1eL50MvkKFw+EVWZYxOTnZMlPlctkO4A5MHNA6/ddxhYpEIivpdHpXlmXIsoz9/f2dhYWFJHReeixh7SFlLntqdG5u7onFYrFsbGx8AJABIMJghnrR1FqoYTSOHwBQBFCGyaY2AwKAW2gc6oHGG1tzSzAFusn03V/pvgP9ASKtyt7WGsY6AAAAAElFTkSuQmCC",
dataFaded:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACQAAAAhCAYAAACxzQkrAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAALEgAACxIB0t1+/AAAABx0RVh0U29mdHdhcmUAQWRvYmUgRmlyZXdvcmtzIENTNXG14zYAAALRSURBVFiF7ddfS1phHAfw79ez7aJglaZ5F7vbxS52Y5sQ/V9KEHThXQSFr6HrkCKIXsIgegV2U7DGLmQQNZIRzIszDykRbaec2WKNMfV5dpFR6jH1HG0j9gVvfPT4Oc/5Pc/zk1JK/Eux/W1Aaf6DquV+gUjazs7OnmcyGQ/JhtzcAwsY5eTkxNfe3t4DALqu20m+k1LmrYBM3RVJ5ejoyO9wOHqEEBBCwOl0euPx+EurM1X3DJFUDg8P/S6XyyOEKBrTNO1R4Zq/7wREUjk4OPA7nU5PPl/8ZNbX1/cDgYBmFlI3iKSSSCT8nZ2dZZhwOJycmpr6AOA7gFzTQSSVeDzudzgcnlyu+PfC4XBiZmZmB8AxgJ9SSmF4kRrDamcZSUVVVb/L5fKUjq2trSWCweAOAB3AhdUVVhVEUonFYoYYVVXTfX19bwF8bRTmVhBJZW9vzxBjJdls9ri7u/u1lNKw1gxriKQSjUZf2e32spqxGpJdbre7BcB5zSCfz9fa0dHxotGYq+i6/rDSmCFoc3OTkUjkc29v79OmiG5JpW0+GwwGoxsbG8lcLodGvpLJ5DcAFVeSYVGTVAC0AnAvLy97R0dHn5R+RtO0TCAQ+AigntWVB5AB8EVK+aNmUClqaWnJOzIyUoZSVTU2OTn5vg6UxOU596vSKqu6D12hFhcXvcPDw2WodDq9OzY29qbp+5ARamFhwTs0NGSIGh8fbwiqKqgUFQqFvIODg2Wo09PT3YmJCcuomg5XKWWe5AUAfW5ublsIgYGBgSJUW1ubZ3V1NUUyauWArbn9uIkKhULbQgj09/cXoVKpVCsABYBpUF3tZuFxXADQ5+fntyORSPKqhd3a2tqfnZ3VANAsBqixhsq+dF1TXdPT089sNhtXVlY+4boNMT1DpkA3UC0AHhfeOsdlg2apqE2DCigbLmsGAPJWu0XLoGbkfv2Vbkb+ABsAjVfpx82SAAAAAElFTkSuQmCC"},
rightArrow:{width:36,height:33,data:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACQAAAAhCAYAAACxzQkrAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAALEgAACxIB0t1+/AAAABx0RVh0U29mdHdhcmUAQWRvYmUgRmlyZXdvcmtzIENTNXG14zYAAAKzSURBVFiF7de/axNhGAfw76s5o1RI0mga1AwKwU4li/gndKmzuBbpkEGkkBZKpZTOakAUl9JA7CBkKBYDlx9vj9IOQgaRDvUKLUdaiFcJZEiJJnevg2lNrvcjl1xoBh94IOFJ7vnw5n2fuxDGGAYpLl00QBv/QVYxcCCXUYEQYus65XJ5ihBy4vP5PgBoWH3B8DAxxnTTRnClUukVa4Ysy28AcJ2AdPv2CHKJojijKAprzaOjo7dWKKO+ve4h997e3pCqqmjNQCAQLRaLcSuULWmHMQTgYSqVytRqNaZNSZIMV6pvPxmAWwAmkslkvlqtMm3u7+/rovoFQrNZCMDEyspKtlKpMG2KongO1U/QKeoOgInl5eVsuVxm2tzd3W1D9RvUinq0ubkpyrLMtLmzs3OGMupLjJoTQq5KkvSF47ixbnRGIcvyu0gk8pwxVterG07qYDB4gxAy1mhYDl1bMTw8HC0UCr8JITN6KENQqVS65jTmNHw+37Px8fGXAA47BgEg9bruqvYcW1tbn3ie1x3KZiDl4ODgeygUuu8khud5Oj09/R7AiV7dbFOPAHgA4B7s3QLcqVTqaTgcvqstZDIZGovFXgP4CuCH3h4yA7kBeAFcB3C5Qwy3urr6YnR09LG2kMvl6OzsrCnGCtSh4R8mnU7H/X5/VFvI5/N0bm7uDAOgbtTXbA/Zwqyvr8e9Xm9UUZS2AqWUzs/Pt2HMLuQEiFtbW4t7PJ6odkxsbGzQhYWFjjFOgFyJRGLK4/GcWxlBEOji4qItDND7Q/6V4+PjEUVR0JqU0q4wToBILBb7vL29nT19WhQEgS4tLXWFAXo/ZS4AAQCRycnJJ6qqqolE4iOAb1YYw74OHHsOwE0At5vvDwH8NMP0GwT8HZzu5utfABSTz3YHuqgYuL/SAwf6A8+WnrBkttMwAAAAAElFTkSuQmCC",
dataFaded:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACQAAAAhCAYAAACxzQkrAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAALEgAACxIB0t1+/AAAABx0RVh0U29mdHdhcmUAQWRvYmUgRmlyZXdvcmtzIENTNXG14zYAAAK4SURBVFiF7djBS9twFAfw77PtDjqmadLaCR46EDw4KBvZ5mWnMQs9tXj1oLB/QAiCCFL8R3rxpIcWQRantYidG+txh67FhiKOWAWdbDIw+f12aaHGtrZN5mT4IJf8QvLJ+728/BLinOMuRc+/BljjHnRT/J8gIuo5PT2Vz87OQkRk65xuBzAuXdffCIIwDgCVSmWIiFTOuXnrICLqKRQKr3w+3zhjDAAgiuKLw8NDIqL33aDsTpm7WCw+YIyhfvP7/fLBwUGYiFy3DUIkEimmUql90zRRv/l8PrlcLneMsgsyAPyYnJz8vLKyollRkiTJpVKpI5StGuKcMyK6AHA0NTW1ZxgGj8ViT+qPEUVRLhQKaLembD9lnHOTiH4C4NPT058YY4hGo1dQkiTJ+Xy+LRQ59XKtTksfgMc7OztvR0dHResxlUrly9jYWEtUUxARucvl8juPxzPoiLgOFQqFmqKaTlkgEOglokHDMJz0wOv1yrlcziSiD41QTUG6rnucxtRCEISXExMTHwGctw0CgMvLy78C2t3d/aaqKjUaawXimqadDA8PS05iVFXVZmdncwAa3m2ron4IYAiAAKCTbutaXV19NjIyIlgHNjY2NEVR9gDoAH51VEMAfgP4DuAEQMP0NsIsLy+/DgaDgrX+Njc3tbm5uZYYwOE+tL6+HhZFUbaObW1tafPz8zdiAAc6dQ2ztrYWHhgYkE3z6rXS6bS2sLDQFgZwIENE5Eomk2Gv13stM9vb29ri4mLbGMCBBVoikXje399/LTOZTEaLx+MdYQD7yw/X8fFxn3XZkU6nu8I4ASJFUYrZbHa/tlrMZDLa0tJSVxjAZg1VvzD6AARmZmaeMsZ4IpH4CuCoG4xtUBXlAtAL4FF11zmAi26/OhzpQ9VM1bq5yTlnXZ/r/u/HDXHnQH8A3vaJk6XKTsAAAAAASUVORK5CYII="},
playButton:{width:44,height:31,data:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACwAAAAfCAYAAACcai8CAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAALEgAACxIB0t1+/AAAABx0RVh0U29mdHdhcmUAQWRvYmUgRmlyZXdvcmtzIENTNXG14zYAAAKuSURBVFiF7ZdPSxtBGIefWWMToxVTevFkL+1BL0IvPRZ6EYIfoec2n8CzevBQEXIQ6kGQYgOtEKlQm0PrRQIFCT3oRT0UikWDNrVJY3R3dqeHncXUqtVZowj+4GX/sfs++5uXmXeEUorrJOuqAc6rG+BG6wa40YqYviiEsPB/uEkflQ5XB/r6WJnOTmEctoDmbDZ7v1KpTE9MTHQDbUAcuKWfixDfP15KKaMAokDHyMjIIymlsm17f21t7WVfX183cFfDnwhumjesw9Gtra1W13VRSkW7urqezczMLObz+RSQ0NAx/NK7EMdDl0S5XG6RUhKEZVl3ent7h4rF4sdMJpMEOoBW/BEJ6t0YPOws0VSr1W7VAwcRi8UeJJPJV+vr668HBwcfAu349d0MWEIII+gwwAIQjuM0OY7DSZFIJB6nUqlcoVB40d/ff0+DtwDNeqa5NGAAPM/Dtu1TQ0oZ6ezsfDo+Pr44Pz//XEPH8N2+fODTHK4PpVR7T0/P0Orq6qfZ2dknGKwDxgtHIKUUjuOc651areZtbm56JvlDAwclcRZVq9XSwsLC1MDAwBugaJLvQoD/57DjOHY+n88NDw+/3dnZ+Q78BvYBed58DXd4ZWXl89jYWGZ5efkrUAJ+Ar+AGlcFfJzD29vb3yYnJ6fm5ua+aNBdDVrFh7U5bJLOrDDAClBCCFfKQ6Oq1epuLpfLptPpHH87WqkDlYCnDFq2sA67kUjEllLiuu7+0tLSh9HR0XelUqnIoasVYA840KAugAlsWGAPcOLx+N7Gxsb7dDo9XSgUfuAP+S5Q1ucHgKNBg57ZWMK0kRZCRPGX2DbgNn5jI/GH/Wid/gNqmjeMwy6+e2iw4J5NXZ0S0tGjCuNw/RYp6Lw8HQ3bIhkDX5Wu3a75BrjRunbAfwDhv+aNEV4dOgAAAABJRU5ErkJggg=="},
pauseButton:{width:44,height:31,data:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACwAAAAfCAYAAACcai8CAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAALEgAACxIB0t1+/AAAABx0RVh0U29mdHdhcmUAQWRvYmUgRmlyZXdvcmtzIENTNXG14zYAAAFpSURBVFiF7ZjBaoNAEIa/jTEGLDn0UPoAfbo8dk49tdSmoCaz04Mj5BDJ7LZpkOaHRRZ/3W/HGZg1qCpz0uLWAKm6A19bswNepj4QQghAYNjsOEbFk6FenyZUfjKwQRTACqiA0mAicAA6oD8BvuQT8/qkqknDNllvt9sXPSPgCaiBtdO3TFk/J8IFsN7tdhsROXd/Axwtiiunz63clFg1TVNPgNTAnuHTX/J9klj4OcALoGjbtjoczgansvcWTl9IWTy76ESkmAAZITy+BX8ADAzFOgGS5fMqGzjGSN/3v+bz6kcR9oB4fV79n5SYXYTvOezU/8rhuQArQ0soEyBH83h8Y9/sVg5wBKQsy26iqekMRpy+JOCQeswPIVTAA/AIPNu1NIB34BV4w9pLh2+vqu6qzImwAC3wYfOGoTMT4Mvmnc2jwxdTFs9NiTEiR1t46ogkDl8ScE5K3PQQmgx8a83uv8Qd+Nr6BsbOkGx2xPZnAAAAAElFTkSuQmCC"},
galleryButton:{width:45,height:31,data:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAC0AAAAfCAYAAABzqEQ8AAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAALEgAACxIB0t1+/AAAABx0RVh0U29mdHdhcmUAQWRvYmUgRmlyZXdvcmtzIENTNXG14zYAAAOxSURBVFiF7ZjPSiRXFMZ/davK7tLJOBOFZJFVnkEGJEiDCT5EwJ0Q5hXyBFnlzzIQstCVO7HBbBJx0RCEXg2CmAfIgMRMqVXV3VX3Txb3lpad6e4qMTMZmAOHy6W/W/Xduuec79z2jDG8aybeNoH72HvSb8qCukDP8wA85wLwK3MPMM51xcuEKdd4lXn5m6liTY0kq03avch3a+achxXyBlBAAeTOS0LlOp+7p6vdGulGVdnMZDPG1HL3sjbwtN/vP5dSxuY1JqW86PV6XwIfAh8Aj/r9fkdK+b0x5sdxl1J+2+v1ngHzQFiHi1e35HmeF7gHPy2K4kUQBI8nYYfD4Z9RFH0GZICXpunXQRC0p+DjxcXFb4CBMWY4i0uT8PCB1sbGxsfTCAMEQbAIPALM6upqK8/zdp7nE/FSygh7ikUdIk1ICyDMsiyaBdRae9hTKdI0nUvTdCpeSuk5LrWqWeNELIpiriY+BESe534N0vDvJJ1oTUiX1kj3jTEmSZKpGEe6tjUhrQF1fHz8ajQaXbVarWmJeIUtefrs7GwQx/EwDMOJiZhl2RBb7nQdIk0U0WATZbCzs/NdkiQXrwPFcfxye3v7B2AADIFRt9v99eLiIs2yjHE/Pz+/3N/f/43bWj3Tmpa8BeAJ8BGwBDwGIuzmtSN6CfzlPMXmwgK2ZkfYWC/FqHCYBLgCsocuedWX/I39KtdAy5HQ2JBISwJuLrBf3HPrx0kPnUtqhkdT0hqQu7u7n3Q6nc89z4uUUjch5vu+VkplBwcHv2xtbb0qSezt7X26srLyhTGmrZTyKngDDI6Ojg42Nzf/qEukSXgIbL8xf3l5+VwI0Xb1GK21J4SwWi+EyfP8amlp6WfsafhxHH8lhGgrZUO2ivd9nzzPr5aXl38Chg8dHgLw19fX57XWodb6TtJorW9GrXWIC4O1tbV5Y8ycUurm6IW4zX+lFMaYsvmaLJv3JO0BIkmSYJZY5HnulaSvr6/fqiICiNFoNFPhXJ8hAFEUhaipiNV+e6o1VkSlFLMUrtocaa1n4v9LRTSAPjk5GcRxPArDsDUJmKZpjlO409PT4Sx8lmUj7t50How07sGy2+3+3ul0nkVRND8OSJLk+vDw8BhbdyVgGuBr1emmJS/E9r0L2Nazhd14KRYSKxSZGxW2e4tq4DNsyRvN4tI0PBS3Zang9t5XvSNK7t4RS7WchR9Rs/e4T3gUlbEkML6xsmMbJz0NX7vLqx0e/yd7J/+seU/6Tdk/butl0lRMJmgAAAAASUVORK5CYII="},
exitButton:{width:45,height:31,data:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAC0AAAAfCAYAAABzqEQ8AAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAALEgAACxIB0t1+/AAAABx0RVh0U29mdHdhcmUAQWRvYmUgRmlyZXdvcmtzIENTNXG14zYAAARtSURBVFiF7ZjvTxRHGMc/x4FwBAqmKhUQDLxq46uWhERfGJPSFIJpm7ZAeoISTPsP8IIE7iqpWGua1jQ0taAtUgndnsR4IdXEgHLkfIUhGA8v/EgIATU9i5aDnN6xt32xs/FYT909pC1JJ3mSzcx8Zz6z+8zzzKxFURQ2Wkn6twESKf9D/1Ml2Uxni8UC6kKThFZbdBSQhSnCVkmFWYXF1SkGN5jZN63B2oCMubm5loWFhR+ATFGXEgOoB04G0oDMQCDwbSAQ+Fro0kRbrOb5RVEUwyagMoFcv99/UpZlRZZlZXZ29ldgB5ANpIrFabBJwCbRtmN6evonTTc5Ofk9kCvGTDbMYRI6Ddji9/u/C4fDSqxNTU25gJ06cA04Cyj0+Xw/63Xj4+MngS1AqlGORNxjUzQa3SzLMrGWl5f30e3bt78S0DYBuwlIB7Jv3rx5pKio6JBet7y8nCS+oHW93CNdfM63rl27dmFpaUnR261btySgCNgmbOeNGzfOxOt76dKlc8CbwHYgfT3dYyvwBvCO2+12P3z4UNHbyMiIBOwCdl2/fv1MvD4ul+s88Dbwuln3sJhJ4xaLJUWAZwv4XJfL9em+ffv26/v6fL6LoVBouaSk5BN928DAwMXq6upO4A4QAP4CQoqirBjiMAkdG/I08Ne6u7sbysrK3jcyxuDgoNtut3cCd2OBgRVFUaLrAR0bc22oUWEbsL2jo+NgeXn5h8/TX7161V1XV3daAP8RCwxEjbKYhYbVycIGbAZygPz29vbaioqK954BfLmhoeE0MA/cAx7EAgMYZTGVxkXRRl4BHgPLwBKwZLPZrJFIJK5IluWI6BcUmsexwGbKSzswSZJ0sLS0tDISiRDPdu/evb+np8f+MuZaq3ukA9l9fX2fFxcXHzIyxsTERGdVVdUx1uAea9mI6UBWX1/fkYKCgqeA+/v7LwNUVla+q2+bnp7+saam5hgJbkSzPr0KWJKkL3Jzc2tXVlaH1ytXrlxobW39HcBqtYbKyso+iG0vLCz8rKenB7vdfkxUrXrjL4RINLn09vZ+mZ+f/5SPDg0N/dbS0iKhbjqAjKNHj1bv3bu3St93ZmbmVG1tbRvrnFzSgExJkr7Jyck5oG8fHh4+73A4zqImjUVR/Qqwta2trW7Pnj0f6zXz8/Ptdru9FQgqivLYCEcip7yUYDC4rD+teTwel8Ph6EJNzfcEeEA832lubj7r8Xhcel04HE5FPQ0aPuUlFPIOHz7cMTo6ek6b2Ov1Sk6ns4snqfkBajwOiucAcNfpdHZ5vV5J042Njf1SX19/yuz8ibhHBuqpbOuJEycaotFoUlNTUzfwJ3Af1T8foW4seHLNyhK6V48fP16XnJxMY2Njp1jQfUy4R6IbMRPVV22oESWE+lYXY4C1SKAdstKERrtPKkK3KLSGN6LZkCejpl+AMOqNAyAi6uOl5qioeyRAHz1DZzidJ5IRtbuf9jtAW4wsJn7W5C/UrUtG/K+UDfmHaUNC/w2HJ4P1UgFyRgAAAABJRU5ErkJggg=="},
emptyPixel:{width:1,height:1,data:"data:image/gif;base64,R0lGODlhAQABAJEAAAAAAP///////wAAACH5BAEAAAIALAAAAAABAAEAAAICVAEAOw=="},failedPhoto:{width:100,height:25,data:"data:image/gif;base64,R0lGODlheAAUAMQAAP8AAP9wcP8zM//MzP/AwP////8QEP+QkP9QUP/w8P9AQP+wsP8gIP/g4P+AgP9gYP+goAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACH5BAAHAP8ALAAAAAB4ABQAAAX/ICCOZGmeaKqubOu+cCzPdG3feK7vfO//wKCQpQgqjkeGySAAMFfPV3H2FBhchWCBwCU8TIIDQEFYkUllVXZ2JkxZa6fiKmiOBAqlqE5izEtxJHh6Imcifld7eGkicYiAJo97eXeLAG5YYwMNAwMHBAkIIgQNoAEAEJwDZamgdo0mpKZnhq0JTamdjAQFWbavAIGopbeXxKe5q5dvK1kKCVcDDgAIZQwQItUKDVcLbmmGjV1i19nfY2WGZAgNIt4kWexXAQPwJPIA9OXUBOzuZZhaOEuDSd2nBAQcTEPnoBSXQAWQ2FFw8NyZhl0KKCzEKBiAjbBGBALpkSKohAsvtL4YOKoIrQEBFFRzIIafgwVImAlTAFOmxTI3c9LkaG+oE4gkjBqI2HNmTZWZDBUEugAAAy4MEjAwwEVAgiIBOgq7aZULrTJewRLIaoULPCbFIFQVKSjuArJX197iam0lupZ/uRZocKDdgwQJIJR50KDAAGDCBBNucFYEY8dNDifuyIvB4QILEjXq1UvB59CSCwPQrHgZEAELA2AbQru2CV3FbOu2jWe379/AgwsfTry4cRMhAAA7"}},
w={TOUCH_TOGGLEFULLSCREEN:"touch_toggleFullScreen",TOUCH_FULLSCREENCHANGE:"touch_fullScreenChange",TOUCH_RESIZE:"touch_resize",TOUCH_CONTROLBUTTONUSED:"touch_controlButtonUsed",TOUCH_SHOWGALLERYSELECTOR:"touch_showGallerySelector",TOUCH_TOGGLEELEMENT:"touch_toggleElement",DATA_XMLLOADED:"data_xmlLoaded",AUDIO_SETVOLUME:"audio_setVolume",AUDIO_IMAGESOUNDSTART:"audio_imageSoundStart",AUDIO_IMAGESOUNDCOMPLETE:"audio_imageSoundComplete",AUDIO_LOADPROGRESS:"audio_loadProgress",AUDIO_POSITIONUPDATE:"audio_positionUpdate",
AUDIO_STATUSPLAYINGUPDATE:"audio_statusPlayingUpdate",AUDIO_SHOWHIDECONTROLS:"audio_showHideControls",AUDIO_SETCONTROLLABEL:"audio_setControlLabel",AUDIO_SETSTATUSPLAYING:"audio_setStatusPlaying",AUDIO_SETPOSITION:"audio_setPosition",AUDIO_SILENTSTOP:"audio_silentStop",VIDEO_IMAGEVIDEOSTART:"video_imageVideoStart",VIDEO_IMAGEVIDEOCOMPLETE:"video_imageVideoComplete",VIDEO_STOPALL:"video_stopAll",LAYOUT_MANAGERREADY:"layout_managerReady",LAYOUT_SETCURRENTVIEWID:"layout_setCurrentViewID",LAYOUT_VIEWREADY:"layout_viewReady",
LAYOUT_REQUESTCHANGE:"layout_requestChange",LAYOUT_SETWRITABLE:"layout_setWritable",IMAGES_SYNCIMAGESSTART:"images_syncImagesStart",IMAGES_SYNCIMAGES:"images_syncImages",IMAGES_REQUESTGALLERY:"images_requestGallery",IMAGES_SETGALLERY:"images_setGallery",IMAGES_SETGALLERYCOMPLETE:"images_setGalleryComplete",IMAGES_GALLERYPRELOADCOMPLETE:"images_galleryPreloadComplete",IMAGES_CLOSEGALLERY:"images_closeGallery",IMAGES_SETIMAGE:"images_setImage",IMAGES_SETIMAGECHANGEABLE:"images_setImageChangeable",IMAGES_DISPLAYIMAGE:"images_displayImage",
IMAGES_NEW_METADATA_AVAILABLE:"images_newMetadataAvailable",IMAGES_JUMPTOGALLERYUNIQID:"images_jumpToGalleryUniqueID",IMAGES_JUMPTOUNIQID:"images_jumpToUniqueID",IMAGELIBRARY_CHECKEDIN:"imageLibrary_checkedIn",IMAGELIBRARY_ASSETDESTROYED:"imageLibrary_assetDestroyed",AUTOPLAY_REMOVECURRENT:"autoplay_removeCurrent",AUTOPLAY_ENABLEDISABLE:"autoplay_enableDisable",AUTOPLAY_ENABLEDISABLELOOP:"autoplay_enableDisableLoop",AUTOPLAY_TIMEOUTSTARTED:"autoplay_timeoutStarted",AUTOPLAY_TIMEOUTCLEARED:"autoplay_timeoutCleared",
LOADER_SHOWGROUP:"loader_showGroupLoader",LOADER_SHOWSINGLE:"loader_showSingleLoader",LOADER_SETGROUPPROGRESS:"loader_setGroupProgress",LOADER_SETSINGLEPROGRESS:"loader_setSingleProgress",IMAGE_SIZECHANGED:"image_sizeChanged",IMAGE_POSITIONCHANGED:"image_positionChanged",KB_IMAGESTART:"kenBurns_imageEffectStart",KB_IMAGEEND:"kenBurns_imageEffectEnd",GALLERYITEM_GALLERYSELECTED:"gallerySelected",GALLERYITEM_GALLERYDESELECTED:"galleryDeselected",GALLERYITEM_CLICK:"galleryItemClick"},L={create:function(b,
c){return function(){return c.apply(b,arguments)}}};Class.extend({init:function(){}});var S={};S.addTween_raw=function(b,c,e){var h=b;b instanceof p||(b=p(b));var k=b.data("xfsTweener")||{tweenProps:{},isNew:true};k.isNew&&b.data("xfsTweener",k);k.isNew=false;k=k.tweenProps;var n=c.time||1,u=c.transition||"linear";for(c=c.onComplete;e.length>0;){var m=e.shift(),s=e.shift(),v=typeof m!="string",A=v?m[1].call(h):b.css(m);if(isNaN(A))A=Number(A.replace(/[^-\d]+/g,""));var I=v?m[0]:m;if(k[I])k[I].stop(true);
else k[I]=p({val:A});I=k[I];I[0].val=A;A={duration:n*1E3,easing:u};if(c)A.complete=c;I[0].updateScope={origScope:h,tweenScope:b,isGetterSetter:v,prop:m,onComplete:c};A.step=function(aa,ba){var ca=ba.elem.updateScope;ca.isGetterSetter?ca.prop[2].call(ca.origScope,aa):ca.tweenScope.css(ca.prop,aa)};I.animate({val:s},A)}};S.addTween=function(b,c){var e={},h=[],k;for(k in c)if(/^time$|^transition$|^onComplete$/i.test(k))e[k]=c[k];else{typeof b[k+"_get"]=="function"&&typeof b[k+"_set"]=="function"?h.push([k,
b[k+"_get"],b[k+"_set"]]):h.push(k);h.push(c[k])}if(typeof e.transition=="function")e.transition=e.transition.prototype._easingFunctionName||"swing";S.addTween_raw(b,e,h)};S.removeTweens=function(){var b=arguments[0];b instanceof p||(b=p(b));var c=b.data("xfsTweener")||{tweenProps:{},isNew:true};c.isNew&&b.data("xfsTweener",c);c.isNew=false;b=c.tweenProps;for(c=1;c<arguments.length;c++){var e=arguments[c];b[e]&&b[e].stop(true)}};jQuery.easing.jswing=jQuery.easing.swing;jQuery.extend(jQuery.easing,
{def:"easeOutQuad",swing:function(b,c,e,h,k){return jQuery.easing[jQuery.easing.def](b,c,e,h,k)},easeInQuad:function(b,c,e,h,k){return h*(c/=k)*c+e},easeOutQuad:function(b,c,e,h,k){return-h*(c/=k)*(c-2)+e},easeInOutQuad:function(b,c,e,h,k){if((c/=k/2)<1)return h/2*c*c+e;return-h/2*(--c*(c-2)-1)+e},easeInCubic:function(b,c,e,h,k){return h*(c/=k)*c*c+e},easeOutCubic:function(b,c,e,h,k){return h*((c=c/k-1)*c*c+1)+e},easeInOutCubic:function(b,c,e,h,k){if((c/=k/2)<1)return h/2*c*c*c+e;return h/2*((c-=
2)*c*c+2)+e},easeInQuart:function(b,c,e,h,k){return h*(c/=k)*c*c*c+e},easeOutQuart:function(b,c,e,h,k){return-h*((c=c/k-1)*c*c*c-1)+e},easeInOutQuart:function(b,c,e,h,k){if((c/=k/2)<1)return h/2*c*c*c*c+e;return-h/2*((c-=2)*c*c*c-2)+e},easeInQuint:function(b,c,e,h,k){return h*(c/=k)*c*c*c*c+e},easeOutQuint:function(b,c,e,h,k){return h*((c=c/k-1)*c*c*c*c+1)+e},easeInOutQuint:function(b,c,e,h,k){if((c/=k/2)<1)return h/2*c*c*c*c*c+e;return h/2*((c-=2)*c*c*c*c+2)+e},easeInSine:function(b,c,e,h,k){return-h*
Math.cos(c/k*(Math.PI/2))+h+e},easeOutSine:function(b,c,e,h,k){return h*Math.sin(c/k*(Math.PI/2))+e},easeInOutSine:function(b,c,e,h,k){return-h/2*(Math.cos(Math.PI*c/k)-1)+e},easeInExpo:function(b,c,e,h,k){return c==0?e:h*Math.pow(2,10*(c/k-1))+e},easeOutExpo:function(b,c,e,h,k){return c==k?e+h:h*(-Math.pow(2,-10*c/k)+1)+e},easeInOutExpo:function(b,c,e,h,k){if(c==0)return e;if(c==k)return e+h;if((c/=k/2)<1)return h/2*Math.pow(2,10*(c-1))+e;return h/2*(-Math.pow(2,-10*--c)+2)+e},easeInCirc:function(b,
c,e,h,k){return-h*(Math.sqrt(1-(c/=k)*c)-1)+e},easeOutCirc:function(b,c,e,h,k){return h*Math.sqrt(1-(c=c/k-1)*c)+e},easeInOutCirc:function(b,c,e,h,k){if((c/=k/2)<1)return-h/2*(Math.sqrt(1-c*c)-1)+e;return h/2*(Math.sqrt(1-(c-=2)*c)+1)+e},easeInElastic:function(b,c,e,h,k){b=1.70158;var n=0,u=h;if(c==0)return e;if((c/=k)==1)return e+h;n||(n=k*0.3);if(u<Math.abs(h)){u=h;b=n/4}else b=n/(2*Math.PI)*Math.asin(h/u);return-(u*Math.pow(2,10*(c-=1))*Math.sin((c*k-b)*2*Math.PI/n))+e},easeOutElastic:function(b,
c,e,h,k){b=1.70158;var n=0,u=h;if(c==0)return e;if((c/=k)==1)return e+h;n||(n=k*0.3);if(u<Math.abs(h)){u=h;b=n/4}else b=n/(2*Math.PI)*Math.asin(h/u);return u*Math.pow(2,-10*c)*Math.sin((c*k-b)*2*Math.PI/n)+h+e},easeInOutElastic:function(b,c,e,h,k){b=1.70158;var n=0,u=h;if(c==0)return e;if((c/=k/2)==2)return e+h;n||(n=k*0.3*1.5);if(u<Math.abs(h)){u=h;b=n/4}else b=n/(2*Math.PI)*Math.asin(h/u);if(c<1)return-0.5*u*Math.pow(2,10*(c-=1))*Math.sin((c*k-b)*2*Math.PI/n)+e;return u*Math.pow(2,-10*(c-=1))*Math.sin((c*
k-b)*2*Math.PI/n)*0.5+h+e},easeInBack:function(b,c,e,h,k,n){if(n==undefined)n=1.70158;return h*(c/=k)*c*((n+1)*c-n)+e},easeOutBack:function(b,c,e,h,k,n){if(n==undefined)n=1.70158;return h*((c=c/k-1)*c*((n+1)*c+n)+1)+e},easeInOutBack:function(b,c,e,h,k,n){if(n==undefined)n=1.70158;if((c/=k/2)<1)return h/2*c*c*(((n*=1.525)+1)*c-n)+e;return h/2*((c-=2)*c*(((n*=1.525)+1)*c+n)+2)+e},easeInBounce:function(b,c,e,h,k){return h-jQuery.easing.easeOutBounce(b,k-c,0,h,k)+e},easeOutBounce:function(b,c,e,h,k){return(c/=
k)<1/2.75?h*7.5625*c*c+e:c<2/2.75?h*(7.5625*(c-=1.5/2.75)*c+0.75)+e:c<2.5/2.75?h*(7.5625*(c-=2.25/2.75)*c+0.9375)+e:h*(7.5625*(c-=2.625/2.75)*c+0.984375)+e},easeInOutBounce:function(b,c,e,h,k){if(c<k/2)return jQuery.easing.easeInBounce(b,c*2,0,h,k)*0.5+e;return jQuery.easing.easeOutBounce(b,c*2-k,0,h,k)*0.5+h*0.5+e}});var la=Class.extend({fixParsing:true,isMainXML:false,associatedGalleryID:null,galleryInfo:null,notificationFunction:null,url:null,loadedContent:null,doc:null,complete:false,success:false,
init:function(b){this.fixParsing=b},startLoad:function(b,c,e,h,k){this.url=b;this.isMainXML=c;this.associatedGalleryID=e;this.galleryInfo=h;this.notificationFunction=k;c=L.create(this,this.handleComplete);p.xfs_ajax({type:"get",url:b,dataType:"text",complete:c})},handleComplete:function(b,c){this.complete=true;this.success=c=="success";try{if(this.success){var e=this.loadedContent=b&&b.responseText?b.responseText:b;if(e.indexOf("{XFS_v4_TRIAL:")==0){e=e.substr(e.indexOf("}")+1);var h=Number(e.substr(0,
2));e=e.substr(2);for(var k="",n=0;n<e.length/3;n++){var u=e.substr(n*3,3).split("").reverse().join("");k+=String.fromCharCode(Number(u)-h-4)}this.loadedContent=k}this.loadedContent=this.loadedContent.replace(/<(img)\s/gi,"<FAKE$1 ").replace(/<\/(img)>/gi,"</FAKE$1>");if(this.fixParsing)this.loadedContent=this.fixParsingIssues(this.loadedContent);this.doc=p("<wrap>"+this.loadedContent+"</wrap>")}}catch(m){this.success=false}this.notificationFunction.call()},fixParsingIssues:function(b){try{for(var c=
"",e=b,h,k,n,u,m,s;h=e.match(/<[A-Z0-9_:-]+[\s]/i);){k=h[0];n=e.indexOf(k);c+=e.substr(0,n+k.length);for(e=e.substr(n+k.length);u=e.match(/(\s*[A-Za-z0-9_:-]+=")([^"]*)(")/);){m=u[0];s=e.indexOf(m);c+=e.substr(0,s);c+=m.split(">").join("&gt;");e=e.substr(s+m.length)}}return c+e}catch(v){console.log("xml.fixParsingIssues error: "+v.toString())}return b}}),oa={instanceID:0},ta=Class.extend({instanceID:NaN,ss:null,listener:null,errorMessage:"",loaders:[],mainDoc:null,preventCache:true,init:function(){this.instanceID=
oa.instanceID++;this.loaders=[]},startLoad:function(b){b=(b||"").replace(",,","~~~COMMA~~~").split(",");this.listener.call(null,{target:this,type:"loadStart"});for(var c=0;c<b.length;c++){var e=this.getURLInfo(b[c]),h=this.applyPreventCache(e.url.split("~~~COMMA~~~").join(",")),k=new la(this.ss.paramManager.getParam("touchFixParsing","true")!="false");k.startLoad(h,c==0,e.destinationGallery,e.galleryInfo,L.create(this,this.checkForCompletion));this.loaders.push(k)}},checkForCompletion:function(){for(var b=
0;b<this.loaders.length;b++)if(!this.loaders[b].complete)return;this.handleCompletion()},handleCompletion:function(){for(var b=true,c=this.loaders,e=[],h=0;h<c.length;h++){var k=c[h];if(!k.success){e.push(k.url.replace(/api_key=\w+(&?)/gi,"api_key=(removed)$1"));b=false}}if(e.length>0)this.errorMessage+="Error loading XML.  The XML file may need to be uploaded.  Load failed from following URLs: "+e.join(", ")+"<br />";if(b)if(c[0].doc.children("slideshow").length!=1){this.errorMessage+="XML Parse / Transformation Error: XML format is incorrect.  There must be a root /slideshow element.  Verify that you have provided a valid XML path. (This is a fatal error. Slideshow load cannot continue.)<br />";
b=false}if(b){this.mainDoc=c[0].doc;this.transform();this.transform_replaceBlocks();this.assignUniqueIDs();this.randomizeGalleries()}this.listener.call(null,{target:this,type:"loadEnd",success:b,errorMessage:this.errorMessage})},WASquery:function(b){return this.queryList(b)[0]},WASqueryList:function(){return this.mainDoc.find(path)},transform:function(){try{var b=this.mainDoc.find("slideshow>galleries").attributes(),c=b.rssSize;if(c!="largest"&&c!="smallest"&&c!="default")c="default";var e=b.flickrSize;
if(e!="square"&&e!="thumb"&&e!="medium"&&e!="big"&&e!="default"&&e!="standard"&&e!="640")e="standard";if(e=="640")e="z";var h=b.flickrIgnoreLink;if(h!="true")h="false";var k=(b.flickrThumbSize||"").substr(0,1);if(k!="s"&&k!="t"&&k!="m")k="s";var n=b.flickrVideoSize;if(n!="site"&&n!="mobile"&&n!="hd"&&n!="orig")n="mobile";var u,m,s,v,A,I,aa=this;for(b=1;b<this.loaders.length;b++){var ba=this.loaders[b],ca=ba.associatedGalleryID,fa=ba.galleryInfo,T=ba.doc;if(T.children("rss").length==1){u=this.transform_getDestGallery(ca,
fa);m=T.find("rss>channel>generator").text()=="http://www.flickr.com/";u.attrNoOverwrite({thumb:T.find("rss>channel>image>url").text(),title:T.find("rss>channel>title").text(),description:T.find("rss>channel>description").text(),fullPathPrefix:"",thumbPathPrefix:""});T.find("rss>channel>item").each(function(){A=p("<FAKEimg />");I=p(this);A.attr("src",I.childrenNS("media\\:content").attr("url"));if(A.attr("src")==undefined){var W=0,$=9999,pa=null,X=I.childrenNS("media\\:group").childrenNS("media\\:content");
X.each(function(){var ga=p(this);if(c=="default"&&(ga.attr("isDefault")=="true"||ga.attr("isDefault")=="1")){A.attr("src",ga.attr("url"));return false}else if(c=="largest"&&ga.attr("width")>W){W=Number(ga.attr("width"));pa=ga.attr("url")}else if(c=="smallest"&&ga.attr("width")<$){$=Number(ga.attr("width"));pa=ga.attr("url")}});if(pa!=null)A.attr("src",pa);else if(A.attr("src")==undefined)if(X.length>0)A.attr("src",X.attr("url"));else{X=I.children("enclosure");if(X.length>0&&(X.attr("url")||"").indexOf("image/")==
0)A.attr("src",X.attr("url"));else throw Error("No image source found in the RSS data source.  Source format is invalid or unsupported.");}}if(I.childrenNS("media\\:thumbnail").length>0)A.attr("thumb",I.childrenNS("media\\:thumbnail").attr("url"));else{X=A.attr("src");X.indexOf("app.onlinephotofiler.com")!=-1&&k!="m"&&A.attr("thumb",X.replace(/\.jpg$/i,".Small.jpg"))}if(m&&e!="default"){X="_"+e.substr(0,1)+".";if(e=="standard")X=".";A.attr("src",A.attr("thumb").replace(/_[st]\./,X))}A.attr("title",
I.childrenNS(m?"media\\:title":"title").first().text());v=I.children("description").first().text();if(m)v=aa.unFlickrDescription(v);v!=null&&v!=""&&A.attr("caption",v);X=I.children("link").first().text();A.attr("rssLink",X);h!="true"&&A.attr("link",X);u.append(A)})}else if(T.children("rsp").children("err").length>0){var ha="Flickr API Error(s) Occurred:<br /><br />";T.find("rsp>err").each(function(){var W=p(this);ha+=W.attr("code")+" - "+W.attr("msg")});aa.ss.staticBaker.SlideshowAlert.show(ha,"Data Error")}else if(T.children("rsp").children("photos").length>
0||T.children("rsp").children("photoset").length>0){u=this.transform_getDestGallery(ca,fa);u.attrNoOverwrite({title:"(Flickr API / No title specified)",description:"",fullPathPrefix:"",thumbPathPrefix:""});s=T.find("rsp>photos>photo");if(s.length==0)s=T.find("rsp>photoset>photo");s.each(function(){A=p("<FAKEimg />");I=p(this);var W="http://farm"+I.attr("farm")+".static.flickr.com/"+I.attr("server")+"/"+I.attr("id")+"_"+I.attr("secret"),$=W+"_"+k+".jpg";W=W+(e=="standard"||e=="default"?".jpg":"_"+
e.substr(0,1)+".jpg");A.attr({src:W,thumb:$});$=I.attrUpTheTree("owner",1,"noOwnerFound");I.attr("media")=="video"&&A.attr("video","http://www.flickr.com/photos/"+$+"/"+I.attr("id")+"/play/"+n+"/"+I.attr("secret")+"/");A.attr("title",I.attr("title"));A.attr("caption","");if(I.children("description").length>0)A.attr("caption",I.children("description").first().text());else I.attr("description")!=undefined&&A.attr("caption",I.attr("description"));$="http://www.flickr.com/photos/"+$+"/"+I.attr("id");
A.attr("flickrLink",$);h!="true"&&A.attr("link",$);u.append(A)})}else if(T.children("feed").length>0)aa.ss.staticBaker.SlideshowAlert.show("Support for ATOM-format dynamic data sources is unavailable.  If using a Flickr feed, see manual for instructions on formatting feed URLs properly.","Data Error");else if(T.children("galleries").length>0){var na=this.mainDoc.find("slideshow>galleries").first();na.append(T.find("galleries>gallery"));na.attr(T.children("galleries").attributes())}else if(T.children("gallery").length>
0){var Z=T.children("gallery").first();u=this.transform_getDestGallery(ca,fa);u.attrNoOverwrite(Z.attributes());u.append(Z.children())}else T.children("slideshow").length==0&&T.children("WASgalleries").length==0&&aa.ss.staticBaker.SlideshowAlert.show("Unrecognized format for data source at: "+ba.url+"<br/><br/>Make sure all data sources are valid.")}var wa=function(W){W.children().each(function(){var $=p(this);if($.attr("touchEnabled")=="false"){$.remove();return true}wa($)})};wa(this.mainDoc.find("slideshow>galleries"));
var ra=navigator.userAgent,xa=/iPhone|iPod/i.test(ra)&&/OS\s3_[01]/.test(ra),Da=/Android\s1/i.test(ra);s=xa||Da;var Ia=this.ss.paramManager.getParam("touchVideo","auto");if(Ia=="false"||Ia=="auto"&&!s)this.mainDoc.find("slideshow>galleries>gallery").children().filter("[video]").remove();this.mainDoc.find("slideshow>galleries>gallery").each(function(){u=p(this);u.attrNoOverwrite({thumb:"",title:"",description:"",fullPathPrefix:""});u.children().each(function(){I=p(this);if(/\.swf$/i.test(I.attr("src"))){I.remove();
return true}var W=(I.attr("title")||"").split("{capt}").join("{desc}");if(W.indexOf("{desc}")!=-1){W=W.split("{desc}");I.attr({title:W[0],caption:W[1]})}if(I.attr("caption")){W=String(I.attr("caption"));for(var $=W.match(/\{setAtt\:([^=]+)=([^\}]*)\}/gi),pa=0;$!=null&&pa<$.length;pa++){var X=$[pa],ga=X.match(/\{setAtt\:([^=]+)=([^\}]*)\}/i);I.attr(ga[1],ga[2]);W=W.split(X).join("")}$!=null&&I.attr("caption",W)}})});var ya={touchSpecific:/^touch_(.+)/i,childAtts:/^touch_allChildren_(.+)/i,childOverrideAtts:/^touch_allChildrenOverride_(.+)/i,
descendantAtts:/^touch_allDescendants_(.+)/i,descendantOverrideAtts:/^touch_allDescendantsOverride_(.+)/i,descendantRemoveNodes:/^touch_removeDescendantNodes_(.+)/i},G=function(W,$,pa,X,ga,Fa){if(W.length==1){var sa,da,Ba;$=$||{};pa=pa||{};X=X||{};ga=ga||{};Fa=Fa||{};var cb={},db={},eb=p.extend({},X),Ya=p.extend({},ga),La=W.attributes(),Ga={};for(da in La){Ba=La[da];if(sa=da.match(ya.childAtts))cb[sa[1]]=Ba;else if(sa=da.match(ya.childOverrideAtts))db[sa[1]]=Ba;else if(sa=da.match(ya.descendantAtts)){if(X[sa[1]]===
undefined)eb[sa[1]]=Ba}else if(sa=da.match(ya.descendantOverrideAtts)){if(ga[sa[1]]===undefined)Ya[sa[1]]=Ba}else if(sa=da.match(ya.descendantRemoveNodes))Fa[String(sa[1]).toLowerCase()]=Ba;else if(sa=da.match(ya.touchSpecific))Ga[sa[1]]=Ba}for(da in $)Ga[da]=$[da];for(da in X)Ga[da]=X[da];for(da in pa)if(La[da]!==undefined)Ga[da]=pa[da];for(da in ga)if(La[da]!==undefined)Ga[da]=ga[da];for(da in Ga){Ba=Ga[da];Ba=="{removeAtt}"?W.removeAttr(da):W.attr(da,Ba)}W.children().each(function(){var fb=p(this);
Fa[this.nodeName.toLowerCase()]?fb.remove():G(fb,cb,db,eb,Ya,Fa)})}};G(this.mainDoc.find("slideshow>styles"));G(this.mainDoc.find("slideshow>galleries"))}catch(ia){this.ss.staticBaker.SlideshowAlert.show("XML Transformation error.  Make sure that any dynamic data sources are properly formatted.<br />Details: "+ia)}},transform_getDestGallery:function(b,c){var e=null;if(b!=null){e=this.mainDoc.find("slideshow>galleries>gallery[id="+b+"]").first();if(e.length!=1){this.ss.staticBaker.SlideshowAlert.show("The data source with a gallery linkage ID of '"+
b+"' could not be mapped to an existing gallery.  The data source's contents will instead be added to a new gallery.  The linkage ID on the data source should be double-checked.","Warning");e=null}}if(e==null){var h=this.mainDoc.find("slideshow>galleries").first();e=p("<gallery></gallery>");h.append(e)}c!=null&&e.attr(c);return e},transform_replaceBlocks:function(){},assignUniqueIDs:function(){this.mainDoc.find("slideshow>galleries>gallery").each(function(b){var c=p(this);c.attrNoOverwrite({_uniqid:String(b)}).attr({_uniqidFull:"gallery_"+
String(b)});c.children().each(function(e){p(this).attrNoOverwrite({_uniqid:String(e)}).attr({_uniqidFull:"img_"+String(b)+"_"+String(e)})})})},randomizeGalleries:function(){var b=this.mainDoc.find("slideshow>galleries").first();b.attr("randomize")=="true"&&b.randomize()},applyPreventCache:function(b){if(this.preventCache&&b.substr(0,8)!="file:///")b+=b.indexOf("?")!=-1?b.substr(b.length-1)=="&"?"nocache="+(new Date).getTime():"&nocache="+(new Date).getTime():"?nocache="+(new Date).getTime();return b},
getURLInfo:function(b){var c={url:b,destinationGallery:null,galleryInfo:{}};if(b.indexOf("{gallery:")==0){b=b.substr(String("{gallery:").length);c.destinationGallery=b.substr(0,b.indexOf("}"));c.url=b.substr(b.indexOf("}")+1).split(" ").join("%20")}b=[/([&?])xfs4t=([^&]+)/i,/([&?])xfs4ti=([^&]+)/i,/([&?])xfs4d=([^&]+)/i];for(var e=["thumb","title","description"],h=0;h<b.length;h++){var k=c.url.match(b[h]);if(k&&k.length==3){c.galleryInfo[e[h]]=unescape(k[2].split("+").join(" "));c.url=c.url.replace(b[h],
"$1t"+h+"="+h)}}return c},unFlickrDescription:function(b){if(b!=undefined){b=b.split("<").join("&lt;").split(">").join("&gt;");var c=b.indexOf("&lt;/p&gt;");c=b.indexOf("&lt;/p&gt;",c+1);b=b.substr(c+10);b=b.split("&lt;").join("<");b=b.split("&gt;").join(">");b=b.replace(/<br\s\/>\s*<br\s\/>/gi,"<br />");return this.String_trim(b)}},String_ltrim:function(b){for(var c=b.length,e=0;e<c;e++)if(b.charCodeAt(e)>32)return b.substring(e);return""},String_rtrim:function(b){for(var c=b.length;c>0;c--)if(b.charCodeAt(c)>
32)return b.substring(0,c+1);return""},String_trim:function(b){return this.String_ltrim(this.String_rtrim(b))}});eval("var console = {log:function(){return false;}};");var ja={log:function(){if(console&&console.log)if(arguments.length==1)console.log(arguments[0]);else if(arguments.length==2)console.log(arguments[0],arguments[1]);else if(arguments.length==3)console.log(arguments[0],arguments[1],arguments[2]);else if(arguments.length==4)console.log(arguments[0],arguments[1],arguments[2],arguments[3]);
else arguments.length==5?console.log(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4]):console.log("[note that args have been joined]",arguments)}};/iPhone|iPod|iPad/i.test(navigator.userAgent);/Android/i.test(navigator.userAgent);var Aa=Class.extend({ss:null,errorImageData:H.failedPhoto.data,library:{},loaders:{},loaded_list:{},init:function(b){this.library={};this.loaders={};this.loaded_list={};this.ss=b},load:function(b){b=b;if(!b||b=="")b="INVALID";if(this.loaders[b])ja.log((this.library[b]?
"Image already loadED: ":"Image already loadING: ")+b);else{var c=this,e=p(new Image).load(function(h){L.create(c,c.loadComplete)(h,b)}).error(function(h){L.create(c,c.loadError)(h,b)}).attr("src",b);this.loaders[b]=e}return this.loaders[b]},loadComplete:function(b,c){this.checkIn(c,b.target)},loadError:function(b,c){var e=this.errorImageData,h=new Image;h.src=e;this.checkIn(c,h);c!="Failed"&&this.ss.staticBaker.ErrorManager.showError("Error loading image/asset from [check that file is uploaded and accessible]:<br />&nbsp; &nbsp; &nbsp;"+
c)},isCheckedIn:function(b){return this.library[b]!==undefined},checkIn:function(b,c){if(!b||b=="")ja.log("ImageLibrary: Unable to do checkIn; url is undefined.");else{this.loaded_list[b]||(this.loaded_list[b]={url:b});if(this.library[b])ja.log("ImageLibrary: Duplicate image not being checked in: "+b);else this.library[b]=c;p(c).unbind("load");this.ss.uiSetup.holder.trigger(w.IMAGELIBRARY_CHECKEDIN,{url:b})}},checkOut:function(b,c,e){b=this.library[b];if(!b){b=new Image;b.src=this.errorImageData}if(c!==
undefined&&e!==undefined){b.width=c;b.height=e}return b},destroyAsset:function(b){if(this.library[b]){delete this.library[b];delete this.loaders[b];delete this.loaded_list[b];this.ss.uiSetup.holder.trigger(w.IMAGELIBRARY_ASSETDESTROYED,{url:b})}},getLoadedList:function(){return p.extend(true,{},this.loaded_list)}}),Ha=Class.extend({params:{},init:function(b){this.params={};this.params=b},getParam:function(b,c){if(this.params&&this.params[b])return this.params[b];return c}}),t=Class.extend({styles:{},
init:function(b){this.styles={};this.parseStyles(b.xmlManager.mainDoc)},parseStyles:function(b){var c=this;b.children("slideshow").children("styles").children().each(function(){var e=String(this.nodeName).toLowerCase();c.styles[e]=p(this).attributes()})},addExtraStyles:function(b,c){b=b.toLowerCase();var e={},h;for(h in c)e[h.toLowerCase()]=c[h];this.styles[b]=p.extend(this.styles[b]||{},e)},getStyle:function(b,c,e,h){b=b.toLowerCase();c=c.toLowerCase();if(h&&h.elementDescriptor)if(h=h.elementDescriptor.attr(c))return h;
return this.styles[b]&&this.styles[b][c]||e},getStyle_number:function(){var b=Number(this.getStyle.apply(this,arguments));if(isNaN(b))return arguments[2];return b},getManyStyles:function(b,c){var e={},h;for(h in c){var k=c[h],n=this.getStyle(b,h,k);if(k=="true")n=n!="false";else if(k=="false")n=n=="true";e[h]=n}return e}}),F=Class.extend({ss:null,holder:null,bg:null,layoutManagerImages:null,layoutManager:null,loader:null,gallerySelection:null,gsScrollbar:null,videoOverlay:null,errorDisplay:null,modalHolder:null,
init:function(b){this.ss=b;b=p("#"+b.paramManager.getParam("id"));if(b.length!=1)alert("XFS v4 Touch: Fatal slideshow error.  No valid holder ID was passed.");else{this.holder=b;b.css({position:"relative",overflow:"hidden"});b.bind("selectstart",function(c){c.preventDefault()});b[0].style.webkitTouchCallout="none";b.css("-webkit-user-select","none");this.bg=N.createSprite("full","bg");this.layoutManagerImages=N.createSprite("full","layoutManagerImages");this.layoutManager=N.createSprite("full","layoutManager");
this.loader=b.find("div[xfsType=ldr]").css({zIndex:30});this.gallerySelection=N.createSprite("","gallerySelection").css({left:0,bottom:"100%",right:0,height:"100%",zIndex:40});this.gsScrollbar=N.createSprite("","gsScrollbar").css({right:0,top:5,bottom:0,width:8,zIndex:41}).hide();this.videoOverlay=N.createSprite("full").css({backgroundColor:"#000",zIndex:50}).hide();p('<div align="center" style="position: absolute; left: 0; right: 0; top: 47%; padding: 0 10px; margin-top: -18px; color: #FFF; font-size: 28px; -webkit-text-size-adjust: none !important; font-family: Georgia, Helvetica, _serif;">'+
this.ss.paramManager.getParam("touchVideoLoadingText","Loading Video...")+"</div>").appendTo(this.videoOverlay);this.errorDisplay=N.createSprite("full","errorDisplay").css({zIndex:60});this.modalHolder=N.createSprite("full","modalHolder").css({zIndex:70}).hide();b.prepend(this.layoutManager).prepend(this.layoutManagerImages).prepend(this.bg).append(this.gallerySelection).append(this.gsScrollbar).append(this.videoOverlay).append(this.errorDisplay).append(this.modalHolder)}}}),M=Class.extend({ss:null,
ui:null,display:null,textDiv:null,btnToggle:null,btnDismiss:null,smallHeight:20,expanded:false,logText:"",init:function(b){this.ss=b;this.setupUI();this.ss.staticBaker.ErrorManager.realMethod=L.create(this,this._showError)},setupUI:function(){var b=this.ui=this.ss.uiSetup.errorDisplay;this.display=b;b.css({left:0,right:0,bottom:0,top:"",height:this.smallHeight,overflow:"hidden",fontFamily:"Arial",fontSize:"11px"}).hide();var c,e=N.createSprite().css({left:0,right:0,top:0,height:this.smallHeight,backgroundColor:"#900",
padding:3});this.btnToggle=c=p('<a href="#" style="color:#FFF">Details...</a>').click(L.create(this,function(h){h.preventDefault();this.toggleExpanded()}));this.btnDismiss=c=p('<a href="#" style="color:#FFF; padding-left: 20px;">Dismiss</a>').click(L.create(this,function(h){h.preventDefault();this.display.hide()}));e.append(p('<span style="padding-right: 20px; font-style: italic; color: #FFF;">Image / Asset Loading Error!</span>')).append(this.btnToggle).append(this.btnDismiss);b.append(e);this.textDiv=
c=N.createSprite().css({left:0,right:0,top:this.smallHeight,bottom:0,overflow:"auto",backgroundColor:"#FFF",color:"#333",padding:6});b.append(c)},_showError:function(b){this.logText+=(this.logText.length>0?"<br />":"")+b;b=this.textDiv;b.html(this.logText);b.stop().animate({scrollTop:b.attr("scrollHeight")-b.height()},500);this.ss.paramManager.getParam("showErrorBar")!="false"&&this.display.show()},toggleExpanded:function(){this.expanded=!this.expanded;this.display.css(this.expanded?{height:"",top:0}:
{height:this.smallHeight,top:""});this.btnToggle.text(this.expanded?"Collapse":"Details...");this.expanded?this.btnDismiss.hide():this.btnDismiss.show()}}),R=Class.extend({ss:null,ui:null,currentlyVisible:false,liveDialogs:[],liveDialog:null,init:function(b){this.ss=b;this.liveDialogs=[];this.setupUI();this.ss.staticBaker.SlideshowAlert.realMethod=L.create(this,this.showAlert);this.ss.staticBaker.GalleryPasswordPanel.realMethod=L.create(this,this.showPasswordPanel)},setupUI:function(){this.ui=this.ss.uiSetup.modalHolder;
this.ui.hide();this.ui.append(N.createSprite("full").css({backgroundColor:"#FFF"}).alpha(0.7));p("head").first().append(p('<style type="text/css">.xfs4t_ma_box{ position:absolute;background-color:#EEE; border:1px solid #888; -webkit-box-shadow:0 2px 6px #666; -webkit-border-radius:10px; width:270px; color:#333; font-family:Arial,_sans; font-size:13px; text-align:center}.xfs4t_ma_t{ font-weight:bold; padding:6px 10px; font-size:14px}.xfs4t_ma_c{ padding:3px 10px; line-height:16px; color:#333; text-shadow:0 1px 1px #CCC}.xfs4t_ma_btn{ background-color:#222;display:inline-block;padding:5px 15px 5px; margin:10px 10px;color:#fff;text-decoration:none;font-weight:bold;line-height:1;-webkit-border-radius:5px;-webkit-box-shadow:0 1px 3px #999;text-shadow:0 -1px 1px #222;border-bottom:1px solid #222;position:relative;cursor:pointer}.xfs4t_ma_pwdti{ width:98%;font-size:14px;margin:2px auto}</style>'))},
showAlert:function(b,c){var e=p(this._getBoxCode(c||"Information",b,["OK"]));this.liveDialogs.push(e);var h=this;e.appendTo(this.ui).find("span.xfs4t_ma_btn").click(function(){e==h.liveDialog&&h.closeDialog(e)});this.updateOverallVisibility();e.show();this._positionBox(e);this.liveDialog=e},showPasswordPanel:function(b,c){var e=this.ss.styleManager.getStyle("GalleryPasswordPanel","promptLabel","Please Enter Gallery Password:"),h=this.ss.styleManager.getStyle("GalleryPasswordPanel","okLabel","OK"),
k=this.ss.styleManager.getStyle("GalleryPasswordPanel","cancelLabel","Cancel"),n=this.ss.styleManager.getStyle("GalleryPasswordAlert","baseTitle","Error"),u=this.ss.styleManager.getStyle("GalleryPasswordAlert","baseLabel","Incorrect Password"),m=p(this._getBoxCode(e,'<input type="password" class="xfs4t_ma_pwdti" />',[h,k]));this.liveDialogs.push(m);var s=this;m.appendTo(this.ui).find("span.xfs4t_ma_btn").click(function(){if(m==s.liveDialog){var v=true,A=false;if(p(this).index()==0)if(m.find("input.xfs4t_ma_pwdti").val()==
b)A=true;else{v=false;s.showAlert(u,n)}v&&s.closeDialog(m);A&&c.call()}});this.updateOverallVisibility();m.show();this._positionBox(m,"pass");this.liveDialog=m;m.find("input").first().focus();return m},closeDialog:function(b){b.remove();for(var c=0;c<this.liveDialogs.length;c++)if(this.liveDialogs[c]==b){this.liveDialogs.splice(c,1);break}this.liveDialog=this.liveDialogs[this.liveDialogs.length-1];this.updateOverallVisibility()},_getBoxCode:function(b,c,e){for(var h="",k=0;k<e.length;k++)h+='<span class="xfs4t_ma_btn">'+
e[k]+"</span> ";return'<div class="xfs4t_ma_box"><div class="xfs4t_ma_t">'+b+'</div><div class="xfs4t_ma_c">'+c+"</div><div>"+h+"</div></div>"},_positionBox:function(b,c){var e=Math.round(Math.max(3,(this.ui.width()-b.outerWidth())/2)),h=c=="pass"?this.ui.height()-b.outerHeight()-20:(this.ui.height()-b.outerHeight())/2;b.css({left:e,bottom:Math.round(Math.max(10,h))});setTimeout(function(){b.fadeTo(400,0.95)},1)},updateOverallVisibility:function(){var b=this.liveDialogs.length>0;if(this.currentlyVisible!=
b)(this.currentlyVisible=b)?this.ui.show():this.ui.hide()}}),f=Class.extend({ldr:null,singleVisible:false,groupVisible:false,updateVisibilityTimeout:NaN,init:function(b){this.ldr=b.uiSetup.loader;b.eventDispatcher.bindObject([w.LOADER_SHOWSINGLE,L.create(this,this.handleShowSingle),w.LOADER_SHOWGROUP,L.create(this,this.handleShowGroup)])},show:function(){this.ldr.show()},hide:function(){this.ldr.hide()},handleShowSingle:function(b,c){(this.singleVisible=c.value)?this.updateVisibilityMomentarily():
this.updateVisibilityNow()},handleShowGroup:function(b,c){(this.groupVisible=c.value)?this.updateVisibilityMomentarily():this.updateVisibilityNow()},updateVisibilityMomentarily:function(){clearTimeout(this.updateVisibilityTimeout);this.updateVisibilityTimeout=setTimeout(L.create(this,this.updateVisibilityNow),250)},updateVisibilityNow:function(){this.singleVisible||this.groupVisible?this.show():this.hide()}}),ma=Class.extend({ss:null,ui:null,fsEnabled:false,fsScrollFloater:null,origPositioning:{},
origViewportSettings:{},delegatedListeners:{},init:function(b){this.origPositioning={};this.origViewportSettings={};this.delegatedListeners={};this.ss=b;this.ui=b.uiSetup.holder;b.uiSetup.holder.bind(w.TOUCH_TOGGLEFULLSCREEN,L.create(this,this.toggleFullScreen));this.delegatedListeners={scroll:L.create(this,this.handleScroll),orientationchange:L.create(this,this.handleOrientationChange)}},callAllowed:true,toggleFullScreen:function(){if(this.callAllowed){this.callAllowed=false;var b=this;setTimeout(function(){b.callAllowed=
true},500);if(this.fsEnabled=!this.fsEnabled){window.XFS4Touch_inFS=true;p(window).bind("gesturestart touchmove touchstart",this.eventBlocker);this.fsScrollFloater=N.createSprite().css({left:0,top:0,zIndex:-100});p("body").append(this.fsScrollFloater);this.origPositioning=this.ui.cssValueObj(["position","left","top","right","bottom","z-index","width","height"]);/iPhone|iPod/i.test(navigator.userAgent);this.ui.css({position:"absolute",left:0,top:1,"z-index":1048575,width:"",height:""}).addClass("WASdevice_scale");
this.validateFSSize(true);this.invalidateFSSize();var c,e=p("meta[name=viewport]").attr("content")||"";this.origViewportSettings={width:(c=e.match(/width=([^;]+);/i))&&c[1]||"980",minimumScale:(c=e.match(/minimum-scale=([^;]+);/i))&&c[1]||"0.25",maximumScale:(c=e.match(/maximum-scale=([^;]+);/i))&&c[1]||"1.6",userScalable:(c=e.match(/user-scalable=([^;]+);/i))&&c[1]||"1"};c="width=device-width; initial-scale=1.0; minimum-scale=1.0; maximum-scale=1.0; user-scalable=no;";if(p("meta[name=viewport]").length==
0)p("head").append(p('<meta id="xfs5t_viewportMeta" name="viewport" content="'+c+'" />'));else p("#xfs5t_fsTouchMeta").length==0&&p("meta[name=viewport]").attr("content",c);p(window).scrollTop(1).scrollLeft(0);p(window).bind(this.delegatedListeners)}else{window.XFS4Touch_inFS=false;p(window).unbind("gesturestart touchstart touchmove",this.eventBlocker);this.fsScrollFloater.remove();this.ui.css(this.origPositioning).css({webkitTransform:"",webkitTransition:""}).removeClass("WASdevice_scale");p(window).unbind(this.delegatedListeners);
c="width="+this.origViewportSettings.width+"; minimum-scale="+this.origViewportSettings.minimumScale+"; maximum-scale="+this.origViewportSettings.maximumScale+"; user-scalable="+this.origViewportSettings.userScalable+";";p("meta[name=viewport]").attr("content",c)}this.ss.uiSetup.holder.trigger(w.TOUCH_FULLSCREENCHANGE)}},handleOrientationChange:function(){this.ui.css({left:1});var b=this;setTimeout(function(){b.ui.css({left:0});p(window).scrollTop(1).scrollLeft(0)},1);this.invalidateFSSize()},handleScroll:function(b){b.preventDefault();
setTimeout(function(){p(window).scrollTop(1).scrollLeft(0)},1);this.invalidateFSSize()},eventBlocker:function(b){b.preventDefault();b.stopPropagation()},invalidateFSSize_timeout:NaN,invalidateFSSize:function(){clearTimeout(this.invalidateFSSize_timeout);this.invalidateFSSize_timeout=setTimeout(L.create(this,this.validateFSSize),200)},lastValidatedW:NaN,lastValidatedH:NaN,lastValidatedScale:NaN,validateFSSize:function(b){if(this.fsEnabled){p(window).scrollTop(1).scrollLeft(0);var c=window.innerWidth,
e=window.innerHeight,h=navigator.userAgent;Math.abs(window.orientation)==90&&/iPad|iPhone|iPod/i.test(h)&&/OS\s3_[012]/.test(h);if(!(b!==true&&c==this.lastValidatedW&&e==this.lastValidatedH&&1==this.lastValidatedScale)){this.lastValidatedW=c;this.lastValidatedH=e;this.lastValidatedScale=1;console.log("newW = window.innerWidth: "+c);this.ui.css({width:c,height:e});this.fsScrollFloater.css({width:c,height:e*2});this.redrawControls();this.ui.find(".iScrollEnabled").each(function(){var k=p(this);k.data("iScroll")&&
k.data("iScroll").refresh()});this.ss.eventDispatcher.trigger(w.TOUCH_RESIZE)}}},redrawControls:function(){}}),Ca=Class.extend({format:"centerRelative",startX:0,startY:0,startZoom:1,endX:0,endY:0,endZoom:1.2,mouseZoom:NaN,delay:500,duration:5E3,easing:"Easing(Quadratic.easeInOut)",init:function(b,c,e,h,k,n,u,m,s,v,A){if(b!==undefined)this.startX=b;if(c!==undefined)this.startY=c;if(e!==undefined)this.startZoom=e;if(h!==undefined)this.endX=h;if(k!==undefined)this.endY=k;if(n!==undefined)this.endZoom=
n;if(u!==undefined)this.delay=u;if(m!==undefined)this.duration=m;if(s)this.easing=s;if(v!==undefined)this.mouseZoom=v;if(A!==undefined)this.format=A}}),J=Class.extend({effects:{},idList:[],cycleCounter:0,imageSpecificKBCounter:0,imageSpecificEffectMap:{},init:function(){this.idList=[];this.effects={};this.imageSpecificEffectMap={};this.effects.__default=new Ca},applyXML:function(b){b&&b.children().each(function(){var c=p(this).attributes();if(!c.id||c.id=="")return true;var e=this.effects[c.id]=new Ca;
this.idList.push(c.id);var h={},k;for(k in c)if(c.hasOwnProperty(k)&&k!="id")h[k]=this.formatValue(c[k]);p.extend(e,h)})},formatValue:function(b){var c;if(b==="NaN")return NaN;if(b&&String(b).length>0&&!isNaN(b))return Number(b);if(b&&(c=b.match(/Easing\(([^\.]+)\.([^\)]+)\)/i))){b=S.easingFunctions.linear;var e=c[1];c=c[2];if(e=="Linear")return b;if(/^Circ|^Expo|^Quad/i.test(e))e=e.substr(0,4);if(/^Quart|^Quint/i.test(e))e=e.substr(0,5);return c+e}return b},getEffect:function(b){if(b&&b.indexOf("KBEffect(")==
0)if(this.imageSpecificEffectMap[b])b=this.imageSpecificEffectMap[b];else{var c=b.substring(9,b.length-1).split(", ").join(",").split(","),e=["format","startX","startY","startZoom","endX","endY","endZoom","delay","duration","easing","mouseZoom"],h=p("<kbEffect></kbEffect>"),k="_imageSpecific_"+this.imageSpecificKBCounter++;h.attr("id",k);for(var n=0;n<c.length&&n<e.length;n++)h.attr(e[n],c[n]);this.applyXML(p("<kenburns></kenburns>").append(h));b=this.imageSpecificEffectMap[b]=k}else if(b&&/^Random$/i.test(b)&&
this.idList.length>0){b=Math.round(Math.random()*this.idList.length-1);b=Math.max(0,Math.min(b,this.idList.length-1));b=this.idList[b]}else if(b&&/^Cycle$/i.test(b)&&this.idList.length>0){b=this.cycleCounter++%this.idList.length;b=Math.max(0,Math.min(b,this.idList.length-1));b=this.idList[b]}return this.effects[b]||this.effects.__default}}),Ma=function(b,c){ja.log("Jumping to: ",b," ...window: ",c);var e=c;if(b&&b!=""){if(!e||e=="")e="_self";try{if(e=="_self")self.location.href=b;else if(e=="_parent")parent.location.href=
b;else if(e=="_top")top.location.href=b;else if(e=="_blank")window.open(b);else if(top.frames[e])top.frames[e].location.href=b;else if(self.frames[e])self.frames[e].location.href=b;else throw Error("Invalid url target specified.");}catch(h){alert("Error: Unable to launch end-jump URL.  Details: "+h.toString())}}},hb=Class.extend({ss:null,autoplayEnabled:true,loopEnabled:true,currentGalleryObj:null,currentImageObj:null,currentAutoplayDelay:"",audioExists:false,audioIsComplete:false,videoExists:false,
videoIsComplete:false,kbExists:false,kbIsComplete:false,delayExists:false,delayIsComplete:false,autoplayTimeout:NaN,overriddenAutoplaytimeoutDelay:NaN,init:function(b){this.ss=b;this.setupListeners();this.setInitialStatus()},setupListeners:function(){var b=this,c=function(e){return L.create(b,e)};this.ss.eventDispatcher.bindObject([w.LAYOUT_VIEWREADY,c(this.setCurrentViewID),w.IMAGES_SETGALLERY,c(this.setGallery),w.IMAGES_SYNCIMAGES,c(this.imageSync_setAutoplayImage),w.AUTOPLAY_ENABLEDISABLE,c(this.enableDisable),
w.AUTOPLAY_ENABLEDISABLELOOP,c(this.enableDisableLoop),w.AUTOPLAY_REMOVECURRENT,c(this.removeCurrent),w.AUDIO_IMAGESOUNDSTART,c(this.soundStart),w.AUDIO_IMAGESOUNDCOMPLETE,c(this.soundComplete),w.KB_IMAGESTART,c(this.kbStart),w.KB_IMAGEEND,c(this.kbComplete),w.VIDEO_IMAGEVIDEOSTART,c(this.videoStart),w.VIDEO_IMAGEVIDEOCOMPLETE,c(this.videoComplete)])},setInitialStatus:function(){var b=this.ss.xmlManager.mainDoc.find("slideshow>galleries"),c=b.attr("autoplay")=="true";b=b.attr("autoplayLoop")=="true";
this.ss.eventDispatcher.trigger(w.AUTOPLAY_ENABLEDISABLE,{target:this,value:c}).trigger(w.AUTOPLAY_ENABLEDISABLELOOP,{target:this,value:b})},setCurrentViewID:function(){},setGallery:function(b,c){this.removeCurrent();this.currentGalleryObj={id:c.id,gallery:c.gallery}},imageSync_setAutoplayImage:function(b,c,e){e=e===true;if(!this.currentGalleryObj||c.image.parent()[0]!=this.currentGalleryObj.gallery[0])ja.log("AutoplayManager: Unable to process the old imageSync; it's from a different gallery.");
else{this.currentImageObj={id:c.id,image:c.image};e||this.removeCurrent();b=this.currentImageObj.image.attrUpTheTree("autoplayDelay",2,"");if(!b||String(b)=="")b="";this.currentAutoplayDelay=b=b.toLowerCase();if(b=="stop"||b=="{stop}"||b=="")this.ss.eventDispatcher.trigger(w.AUTOPLAY_ENABLEDISABLE,{target:this,value:false});c=this.currentAutoplayDelay.split(",");for(e=0;e<c.length;e++){var h=c[e];if(!isNaN(Number(h))){c=Number(h);if(!isNaN(this.overriddenAutoplayTimeoutDelay))c=this.overriddenAutoplayTimeoutDelay;
this.delayExists=true;this.delayIsComplete=false;this.autoplayTimeout=setTimeout(L.create(this,this.delayComplete),c);this.ss.eventDispatcher.trigger(w.AUTOPLAY_TIMEOUTSTARTED,{target:this,value:c});break}}b=="jump"&&this.checkForProgress()}},enableDisable:function(b,c){this.autoplayEnabled=c.value;this.ss.autoplayEnabled=this.autoplayEnabled;this.ss.autoplayNotEnabled=!this.autoplayEnabled;if(this.autoplayEnabled&&/^\{stop\}$|^stop$|^$/i.test(this.currentAutoplayDelay))this.progressNext();else if(c.target!=
this&&this.currentImageObj!=null){clearTimeout(this.autoplayTimeout);this.ss.eventDispatcher.trigger(w.AUTOPLAY_TIMEOUTCLEARED,{target:this});this.delayIsComplete=this.delayExists=false;this.imageSync_setAutoplayImage(null,{id:this.currentImageObj.id,image:this.currentImageObj.image},true)}},enableDisableLoop:function(b,c){this.loopEnabled=c.value},removeCurrent:function(){clearTimeout(this.autoplayTimeout);this.ss.eventDispatcher.trigger(w.AUTOPLAY_TIMEOUTCLEARED,{target:this});this.kbIsComplete=
this.kbExists=this.videoIsComplete=this.videoExists=this.audioIsComplete=this.audioExists=this.delayIsComplete=this.delayExists=false},soundStart:function(b,c){if(this.currentImageObj&&c.image==this.currentImageObj.image)this.audioExists=true},soundComplete:function(b,c){if(this.currentImageObj&&c.image==this.currentImageObj.image){this.audioIsComplete=this.audioExists=true;this.checkForProgress()}},kbStart:function(b,c){if(this.currentImageObj&&c.image==this.currentImageObj.image)this.kbExists=true},
kbComplete:function(b,c){if(this.currentImageObj&&c.image==this.currentImageObj.image){this.kbIsComplete=this.kbExists=true;this.checkForProgress()}},videoStart:function(b,c){if(this.currentImageObj&&c.image==this.currentImageObj.image)this.videoExists=true},videoComplete:function(b,c){if(this.currentImageObj&&c.image==this.currentImageObj.image){this.videoIsComplete=this.videoExists=true;this.checkForProgress()}},delayComplete:function(){this.delayIsComplete=this.delayExists=true;this.checkForProgress()},
checkForProgress:function(){for(var b=this.currentAutoplayDelay.split(","),c=0;c<b.length;c++){var e=b[c];if(e=="jump"&&this.currentImageObj!=null){e=N.getImageLink(this.currentImageObj.image);var h=N.getImageLinkTarget(this.currentImageObj.image);if(e!=null&&e!=""){e=N.parseLink({id:this.currentImageObj.id,image:this.currentImageObj.image,link:e});try{Ma(e,h)}catch(k){ja.log("--- Error executing image jump (navigateToURL) event. ---")}}}else if(e=="soundcomplete"||e=="audiocomplete"){if(this.audioExists){this.audioIsComplete&&
this.progressNext();break}}else if(e=="pancomplete"||e=="kbcomplete"){if(this.kbExists){this.kbIsComplete&&this.progressNext();break}}else if(e=="videocomplete"){if(this.videoExists){this.videoIsComplete&&this.progressNext();break}}else if(!isNaN(Number(e)))if(this.delayExists){this.delayIsComplete&&this.progressNext();break}}},progressNext:function(){this.removeCurrent();this.autoplayEnabled&&this.getNextImage()},getNextImage:function(){if(!this.currentImageObj||!this.currentGalleryObj)ja.log("AutoplayManager.getNextImage: Error!  No currentimageobj or currentgalleryobj. This: ",
this);else{var b=this.currentImageObj.id,c=this.currentImageObj.image,e=this.currentGalleryObj.id,h=this.currentGalleryObj.gallery;if(c.next().length>0)this.ss.eventDispatcher.trigger(w.IMAGES_SETIMAGE,{target:this,id:b+1,image:c.next()});else if(h.attr("autoplayLoop")=="true")this.ss.eventDispatcher.trigger(w.IMAGES_SETIMAGE,{target:this,id:0,image:c.parent().children().first()});else if(h.next().length>0)this.ss.eventDispatcher.trigger(w.IMAGES_REQUESTGALLERY,{target:this,id:e+1,gallery:N.getGallery({slideshow:this.ss,
id:e+1})});else if(this.loopEnabled)if(e==0)this.ss.eventDispatcher.trigger(w.IMAGES_SETIMAGE,{target:this,id:0,image:c.parent().children().first()});else{b=N.getGallery({slideshow:this.ss,id:0});this.ss.eventDispatcher.trigger(w.IMAGES_REQUESTGALLERY,{target:this,id:0,gallery:b})}}}}),N={getDefaultGalleryID:function(b){var c=0;b.slideshow.xmlManager.mainDoc.find("slideshow>galleries>gallery").each(function(e){if(p(this).attr("initial")=="true"){c=e;return false}});return c},getGallery:function(b){var c=
b.id;b=b.slideshow.xmlManager.mainDoc.find("slideshow>galleries>gallery").eq(c);if(b.length==0)return null;if(b.attr("randomize")=="true"||b.parent().attr("randomizeEveryGallery")=="true")b.randomize();return b},getGalleryPassword:function(b){b=b.gallery.attr("password");return!b||b==""?null:N.unencodePassword(b)},unencodePassword:function(b){var c=b.match(/^\{([^\}]+)\}$/);if(c&&b.length%3==2){b=c[1].split("").reverse().join("");for(c="";b.length>0;){c+=String.fromCharCode(b.substr(0,3));b=b.substr(3)}return c}return b},
getDefaultImage:function(b){b=b.gallery.children();var c=b.filter("[tempInitial=true]").first();if(c.length==0)c=b.filter("[initial=true]").first();else c.removeAttr("tempInitial");if(c.length==0)c=b.first();return{id:c.index(),image:c}},getImage:function(b){return b.gallery.children().eq(b.id)},getImageURL:function(b){if(!b||b.length<1)return null;var c=b.attr("src");if(/^https?:\/\/|^file:\/\/|\{noprefix\}/i.test(c))return c.replace(/^\{noprefix\}/i,"");return(b.parent().attr("fullPathPrefix")||
"")+c},getThumbURL:function(b,c){c=c===true;var e=b.attr("thumb")||b.attr("src");if(/^https?:\/\/|^file:\/\/|\{noprefix\}/i.test(e))return e.replace(/^\{noprefix\}/i,"");var h=b.parent().attr("thumbPathPrefix")||b.parent().attr("fullPathPrefix")||"",k=c?"ALL":"skipThumb";return N.parseLink({id:b.index(),image:b,link:h+e},k)},getVideoURL:function(b,c){c=c===true;var e=b.attr("video");if(!e)return null;if(/^https?:\/\/|^rtmps?:\/\/|^file:\/\/|\{noprefix\}/i.test(e))return e.replace(/^\{noprefix\}/i,
"");var h=b.parent().attr("videoPathPrefix")||"",k=c?"ALL":"skipVideo";return N.parseLink({id:b.index(),image:b,link:h+e},k)},getImageLink:function(b){var c=b.attr("link")||b.parent().attr("defaultLink")||"";return N.parseLink({id:b.index(),image:b,link:c})},getImageLinkTarget:function(b){return b.attrUpTheTree("linkTarget",2,null)},parseLink:function(b,c){var e=b.link,h="",k=b.image.attributes(),n=b.image.attr("_uniqid")+"->"+b.image.parent().attr("_uniqid");e=e.replace(/\{image\.index\}|\{image\.id\}/gi,
b.id+1);e=e.replace(/\{image\.index0\}|\{image\.id0\}/gi,b.id);e=e.split("{image.uniqID}").join(n);e=e.split("{image.rawID}").join("{image.id}");e=e.split("{image.total}").join(b.image.parent().children().length);e=e.split("{image.srcFull}").join(N.getImageURL(b.image));if(c!="skipThumb"&&c!="ALL")e=e.split("{image.thumbFull}").join(N.getThumbURL(b.image,true));if(c!="skipVideo"&&c!="ALL")e=e.split("{image.videoFull}").join(N.getVideoURL(b.image,true));var u,m,s;for(e=e.split("{metadata.").join("{image.metadata_");e.indexOf("{image.")!=
-1;){n=e.indexOf("{image.");h+=e.substring(0,n);e=e.substring(n+7);n=e.indexOf("}");u=e.substring(0,n);s=null;m=u.indexOf("|");if(m!=-1){s=u.substr(m+1);u=u.substring(0,m)}e=e.substring(n+1);h+=k.hasOwnProperty(u)?k[u]:s!=null?s:u.indexOf("metadata_")==0?"":"null"}h+=e;h=h.split("{id}").join(b.id+1);return h=h.split("{total}").join(b.image.parent().children().length)},parseStringAtts:function(b){var c="{"+b.prefix+".",e=b.string,h="";for(b=b.xmlNode.attributes();e.indexOf(c)!=-1;){var k=e.indexOf(c);
h+=e.substring(0,k);e=e.substring(k+c.length);k=e.indexOf("}");var n=e.substring(0,k),u=null,m=n.indexOf("|");if(m!=-1){u=n.substr(m+1);n=n.substring(0,m)}e=e.substring(k+1);h+=b.hasOwnProperty(n)?b[n]:u!=null?u:n.indexOf("metadata_")==0?"":"null"}h+=e;return h},getImageTitle:function(b,c){var e=b.attrUpTheTree(["title","defaultTitle"],1,"");return N.parseLink({image:b,id:c,link:e})},getImageCaption:function(b,c){var e=b.attrUpTheTree(["caption","defaultCaption"],1,"");e=N.parseLink({image:b,id:c,
link:e});return e.split("<br />\n").join("<br />")},getAudioInfo:function(b){var c=b.attr("audio")||"";b=b.attrUpTheTree(["audioLabel","defaultAudioLabel"],1,"");if(c=="")c=null;return{url:c,label:b}},createSprite:function(b,c){var e=p('<div style="position: absolute;"></div>');b=="full"&&e.css({left:0,right:0,bottom:0,top:0});c&&e.attr({xfsType:c});return e},getChainValue:function(b,c){for(var e=b,h=c.split(".");h.length>0;)e=e[h.shift()];return e}},ib=0,jb=Class.extend({instanceID:NaN,ss:null,loaded_list:{},
preload_in_progress:false,preload_list:{},preload_list_order:[],xml_url_ref_list:{},currentGalleryObj:null,currentImageObj:null,currentGallery:null,currentImage:null,imageDisplayExists:false,imagesLocked:false,multipleGalleriesExist:false,imageChangeable:true,changeToWhenLoadedObj:null,updatePreloadTotalTimeout:null,openDefaultInterval:null,transitionInProgress:false,initNextSmartLoadingTeimout:null,smartLoadingPausedAtMax:false,passWin:null,styleName:"ImageManager",preloadMode:"smart",destroyOldBitmaps:false,
smartLoadMax:10,init:function(b){this.instanceID=ib++;this.loaded_list={};this.preload_list={};this.preload_list_order=[];this.xml_url_ref_list={};this.setGallery_lowPrioritizeHandler_queue=[];this.ss=b;this.multipleGalleriesExist=this.ss.xmlManager.mainDoc.find("slideshow>galleries>gallery").length>1;this.loaded_list=this.ss.imageLibrary.getLoadedList();this.setupStyles();this.setupListeners()},setupStyles:function(){this.preloadMode=this.ss.styleManager.getStyle(this.styleName,"preloadMode","smart");
if(this.preloadMode=="preloadAll")this.preloadMode="all";this.destroyOldBitmaps=this.ss.styleManager.getStyle(this.styleName,"destroyOldBitmaps","true")!="false";this.smartLoadMax=Number(this.ss.styleManager.getStyle(this.styleName,"smartLoadMax",10))},setupListeners:function(){var b=this,c=function(e){return L.create(b,e)};this.ss.eventDispatcher.bindObject([w.IMAGES_CLOSEGALLERY,c(this.closeGallery),w.IMAGES_REQUESTGALLERY,c(this.requestGallery),w.IMAGES_SETGALLERY,c(this.setGallery_lowPrioritizeHandler),
w.IMAGES_SETIMAGECHANGEABLE,c(this.events_setImageChangeable),w.IMAGES_SETIMAGE,c(this.setImage),w.IMAGES_SYNCIMAGESSTART,c(this.events_syncImagesStart),w.IMAGES_SYNCIMAGES,c(this.events_syncImages),w.IMAGELIBRARY_CHECKEDIN,c(this.imageCheckedIn),w.IMAGELIBRARY_ASSETDESTROYED,c(this.imageAssetDestroyed),w.IMAGES_JUMPTOGALLERYUNIQID,c(this.events_jumpToGalleryUniqid),w.IMAGES_JUMPTOUNIQID,c(this.events_jumpToUniqid),w.LAYOUT_VIEWREADY,c(this.events_viewReady)])},closeGallery:function(){this.currentGalleryObj=
null;this.ss.eventDispatcher.trigger(w.AUTOPLAY_REMOVECURRENT,{target:this});this.changeToWhenLoadedObj=this.currentImageObj=null;this.preload_in_progress=false;this.preload_list={};this.preload_list_order=[]},requestGallery:function(b,c){if(!c.id&&c.id!==0)this.ss.staticBaker.SlideshowAlert.show("A RequestGallery call must specify an ID value in the extraInfo object.","Error");else if(!(this.currentGalleryObj&&this.currentGalleryObj.id==c.id)){if(!c.gallery)c.gallery=N.getGallery({slideshow:this.ss,
id:c.id});if(c.gallery)if(c.gallery.children().length==0)this.ss.staticBaker.SlideshowAlert.show("This gallery (title = "+c.gallery.attr("title")+") cannot be opened because there are no images in it.  Please make sure you have added at least one image to the gallery.","Error");else{var e=N.getGalleryPassword(c);if(e&&e!=""){this.passWin&&this.passWin.length==1&&this.ss.modalManager.closeDialog(this.passWin);this.passWin=this.ss.staticBaker.GalleryPasswordPanel.show(e,L.create(this,function(){c.gallery.removeAttr("password");
this.ss.eventDispatcher.trigger(w.IMAGES_SETGALLERY,c)}))}else this.ss.eventDispatcher.trigger(w.IMAGES_SETGALLERY,c)}else this.ss.staticBaker.SlideshowAlert.show("The requested gallery cannot be opened.  It doesn't exist, is corrupted, or is not well-formed.","Error")}},setGallery_lowPrioritizeHandler_queue:[],setGallery_lowPrioritizeHandler_timeout:NaN,setGallery_lowPrioritizeHandler:function(){clearTimeout(this.setGallery_lowPrioritizeHandler_timeout);this.setGallery_lowPrioritizeHandler_queue.push(arguments);
this.setGallery_lowPrioritizeHandler_timeout=setTimeout(L.create(this,this.setGallery_lowPrioritizeHandler_handleTimeoutExpiration),1)},setGallery_lowPrioritizeHandler_handleTimeoutExpiration:function(){this.setGallery.apply(this,this.setGallery_lowPrioritizeHandler_queue.shift());if(this.setGallery_lowPrioritizeHandler_queue.length>0)this.setGallery_lowPrioritizeHandler_timeout=setTimeout(L.create(this,this.setGallery_lowPrioritizeHandler_handleTimeoutExpiration),1)},setGallery:function(b,c){clearInterval(this.openDefaultInterval);
if(!(this.currentGalleryObj&&this.currentGalleryObj.id==c.id&&this.currentGalleryObj.gallery==c.gallery)){this.currentGalleryObj&&this.closeGallery(null);this.currentGalleryObj={id:c.id,gallery:c.gallery};this.smartLoadingPausedAtMax=false;this.currentGallery=this.currentGalleryObj;var e=this;this.currentGalleryObj.gallery.children().each(function(){var k=p(this),n=/^3d$|^preloadThumbs$/i.test(e.preloadMode)?N.getThumbURL(k):N.getImageURL(k);if(n)e.xml_url_ref_list[n]=k});if(/^all$|^3d$|^preloadThumbs$/i.test(this.preloadMode)){this.ss.eventDispatcher.trigger(w.IMAGES_SETIMAGECHANGEABLE,
{target:this,value:false});this.preload_in_progress=true;this.preload_list={};this.preload_list_order=[];e=this;this.currentGalleryObj.gallery.children().each(function(k){var n=p(this),u=/^3d$|^preloadThumbs$/i.test(e.preloadMode)?N.getThumbURL(n):N.getImageURL(n),m={w:0,h:0};if(!e.loaded_list[u]){e.preload_list[u]={id:k,image:n,url:u,hq:null,dims:m,loader:null,loaded:false};e.preload_list_order.push(u)}});if(this.preload_list_order.length>0){var h=this.preload_list_order[0];this.preload_list[h].loader=
this.startImageLoad(h,this.preload_list[h].hq,this.preload_list[h].dims)}this.groupLoaderReveal(true);this.scheduleUpdateGroupPreload()}else{this.ss.eventDispatcher.trigger(w.IMAGES_SETIMAGECHANGEABLE,{target:this,value:true});this.openInitialImage()}this.ss.eventDispatcher.trigger(w.IMAGES_SETGALLERYCOMPLETE,{target:this})}},events_setImageChangeable:function(b,c){this.imageChangeable=c.value;this.imagesLocked=!this.imageChangeable},setImage:function(b,c){if(this.imageChangeable){if(c.checkForNewImage!==
false)if(this.currentImageObj&&this.currentImageObj.id==c.id&&this.currentImageObj.image==c.image)return;if(this.currentGalleryObj!=null){this.ss.eventDispatcher.trigger(w.AUTOPLAY_REMOVECURRENT,{target:this});var e=/^3d$/i.test(this.preloadMode)?N.getThumbURL(c.image):N.getImageURL(c.image),h={w:0,h:0};if(this.loaded_list[e]!=null){this.changeToWhenLoadedObj=null;this.singleLoaderReveal(false);this.ss.eventDispatcher.trigger(w.IMAGES_DISPLAYIMAGE,{target:this,id:c.id,image:c.image,url:e})}else{this.changeToWhenLoadedObj=
{id:c.id,image:c.image,url:e};this.singleLoaderReveal(true);this.startImageLoad(this.changeToWhenLoadedObj.url,null,h)}}}},imageCheckedIn:function(b,c){var e=c.url;if(this.preload_list[e])this.preload_list[e].loaded=true;this.loaded_list[e]||(this.loaded_list[e]={url:e});var h;if(this.preloadMode=="all"||this.preload_in_progress)for(e=0;e<this.preload_list_order.length;e++){h=this.preload_list_order[e];if(!this.loaded_list[h]==null&&this.preload_list[h])if(this.preload_list[h].loader)break;else this.preload_list[h].loader=
this.startImageLoad(h,this.preload_list[h].hq,this.preload_list[h].dims)}else if(this.changeToWhenLoadedObj&&e==this.changeToWhenLoadedObj.url){this.singleLoaderReveal(false);this.ss.eventDispatcher.trigger(w.IMAGES_SETIMAGE,{target:this,url:this.changeToWhenLoadedObj.url,id:this.changeToWhenLoadedObj.id,image:this.changeToWhenLoadedObj.image,checkForNewImage:false})}/^smart$|^3d$|^preloadThumbs$/i.test(this.preloadMode)&&this.doSmartLoading()},imageAssetDestroyed:function(b,c){var e=c.url;if(this.preload_list[e])this.preload_list[e].loaded=
false;this.loaded_list[e]&&delete this.loaded_list[e]},doSmartLoading:function(){clearTimeout(this.initNextSmartLoadingTimeout);if(this.transitionInProgress)this.initNextSmartLoadingTimeout=setTimeout(L.create(this,this.doSmartLoading),100);else{this.smartLoadingPausedAtMax=false;var b;if(this.changeToWhenLoadedObj)b=this.changeToWhenLoadedObj.image;else if(this.currentImageObj)b=this.currentImageObj.image;if(b)for(var c=0;b=b.next();){if(!b||b.length==0)break;var e=N.getImageURL(b),h={w:0,h:0};if(e&&
e!=""&&!this.loaded_list[e]){setTimeout(L.create(this,this.startImageLoad),Number(this.ss.styleManager.getStyle(this.styleName,"smartLoadDelay",50)),e,null,h);break}if(this.smartLoadMax>0&&c++==this.smartLoadMax){this.smartLoadingPausedAtMax=true;break}}}},events_syncImagesStart:function(){this.transitionInProgress=true},events_syncImages:function(b,c){this.transitionInProgress=false;this.currentImage=this.currentImageObj={id:c.id,image:c.image};this.smartLoadingPausedAtMax&&this.doSmartLoading()},
events_jumpToGalleryUniqid:function(b,c){var e=Number(c.id.match(/^gallery_(\d+)$/i)[1]);if(!isNaN(e)){var h=this;this.ss.xmlManager.mainDoc.find("slideshow>galleries>gallery[_uniqid="+e+"]").first().each(function(){var k=p(this).index();h.ss.eventDispatcher.trigger(w.IMAGES_REQUESTGALLERY,{id:k})})}},events_jumpToUniqid:function(b,c){var e=c.id,h=/^img_(\d+)_(\d+)$/i,k=Number(e.match(h)[1]);e=Number(e.match(h)[2]);if(!(isNaN(k)||isNaN(e))){var n=this;this.ss.xmlManager.mainDoc.find("slideshow>galleries>gallery[_uniqid="+
k+"]>FAKEimg[_uniqid="+e+"]").first().each(function(){var u=p(this),m=u.index(),s=u.parent().index();if(n.currentGalleryObj&&n.currentGalleryObj.id==s){n.currentImageObj==null&&u.attr("tempInitial","true");n.ss.eventDispatcher.trigger(w.IMAGES_SETIMAGE,{id:m,image:u})}else{u.attr("tempInitial","true");n.ss.eventDispatcher.trigger(w.IMAGES_REQUESTGALLERY,{id:s})}})}},events_viewReady:function(){ja.log("ImageManager.events_viewReady: Dude, we have a new view.");var b=this.imageDisplayExists;if(!this.currentGalleryObj&&
b)if(!kb.getInitialImage()){this.openDefaultInterval=setTimeout(L.create(this,this.openDefaultGallery),100);ja.log("   ...opening default gallery.")}},destroyOldBitmapIfRequested:function(b){this.destroyOldBitmaps&&this.ss.paramManager.getParam("destroyOldBitmaps")!="false"&&setTimeout(this.ss.imageLibrary.destroyAsset,500,b)},startImageLoad:function(b){return this.ss.imageLibrary.load(b)},openDefaultGallery:function(){if(this.ss.styleManager.getStyle("GallerySelectorTouch","initiallyOpen","false")!=
"true")if(this.ss.styleManager.getStyle(this.styleName,"openDefaultGallery","true")!="false"){var b=N.getDefaultGalleryID({slideshow:this.ss}),c=N.getGallery({slideshow:this.ss,id:b});this.ss.eventDispatcher.trigger(w.IMAGES_REQUESTGALLERY,{target:this,id:b,gallery:c})}},openInitialImage:function(){if(this.ss.styleManager.getStyle(this.styleName,"openDefaultImage","true")!="false"){var b=N.getDefaultImage({gallery:this.currentGalleryObj.gallery});this.ss.eventDispatcher.trigger(w.IMAGES_SETIMAGE,
{target:this,id:b.id,image:b.image})}},scheduleUpdateGroupPreload:function(){if(isNaN(this.updatePreloadTotalTimeout))this.updatePreloadTotalTimeout=setInterval(L.create(this,this.updateGroupPreload),300)},unscheduleUpdateGroupPreload:function(){clearInterval(this.updatePreloadTotalTimeout);this.updatePreloadTotalTimeout=NaN},updateGroupPreload:function(b){b=b!==false;if(!this.preload_in_progress&&b)this.unscheduleUpdateGroupPreload();else{b=true;var c=0;getNumObjChildren(this.preload_list);for(var e in this.preload_list){var h=
this.preload_list[e];if(h.loaded)c++;else{b=false;if(h.hasOwnProperty("loader")&&h.loader)c+=0.5}}this.groupLoaderUpdate(b?100:50);if(b){this.unscheduleUpdateGroupPreload();this.groupLoaderReveal(false);this.preload_in_progress=false;this.preload_list={};this.preload_list_order=[];this.ss.eventDispatcher.trigger(w.IMAGES_SETIMAGECHANGEABLE,{target:this,value:true});this.ss.eventDispatcher.trigger(w.IMAGES_GALLERYPRELOADCOMPLETE,{target:this});this.openInitialImage()}}},getNumObjChildren:function(b){var c=
0,e;for(e in b)c++;return c},formatProgressObj:function(){return null},singleLoaderReveal:function(b){this.ss.eventDispatcher.trigger(w.LOADER_SHOWSINGLE,{target:this,value:b})},singleLoaderUpdate:function(b){this.ss.eventDispatcher.trigger(w.LOADER_SETSINGLEPROGRESS,{target:this,progressPercent:b})},groupLoaderReveal:function(b){this.ss.eventDispatcher.trigger(w.LOADER_SHOWGROUP,{target:this,value:b})},groupLoaderUpdate:function(b){this.ss.eventDispatcher.trigger(w.LOADER_SETGROUPPROGRESS,{target:this,
progressPercent:b})}}),kb={getInitialImage:function(){return null}},Na=Class.extend({ss:null,init:function(b){this.ss=b}}),Za=0,Oa=Class.extend({instanceID:NaN,ss:null,ui:null,currentViewID:null,lockImages:false,fsControlsVisible:undefined,init:function(b){this.instanceID=Za++;this.ss=b;this.ui=b.uiSetup.layoutManager;this.setupListeners();this.createCommonUIStuff();this.ss.paramManager.getParam("touchMode","inline")=="fs"?this.createFullScreenUI():this.createInlineUI()},setupListeners:function(){},
createCommonUIStuff:function(){var b=navigator.userAgent;b=".xfs4t_edgeControlBG{    width: 94px;    height: 35px;    background-image: -webkit-gradient(linear, 0% 0%, 0% 100%, from(#666666), to(#333333));    -webkit-border-top-left-radius: 7px;    -webkit-border-top-right-radius: 7px;    border: 1px solid #333;"+(/iPad|iPhone|iPod/i.test(b)&&/OS\s3_[012]/.test(b)?"    -webkit-box-shadow: 0 1px 5px #000;":"    -webkit-box-shadow: inset 0 1px 0 rgba(255,255,255,0.4), inset 0 -1px 0 rgba(0,0,0,0.1), 0 1px 5px rgba(0,0,0,0.75);")+
"}.xfs4t_edgeControlDivider{    height: 100%;    border-right: 2px groove rgba(150,150,150,0.7);}.xfs4t_caption a, .xfs4t_caption a:link { color: #FFF; } .xfs4t_caption a:visited { color: #CCC; }";p("head").first().append(p('<style type="text/css">'+b+"</style>"))},createInlineUI:function(){new ua.GallerySelector(this.ss,this.ss.uiSetup.gallerySelection);var b=this.ss.xmlManager.mainDoc.find("slideshow>ui>views>view[type=touch]").first().children();if(b.length==0)b=p("<ImagesStandardTouch />");var c=
this,e={imagesstandardtouch:Qa,imagesswipetouch:ab,thumbnailstouch:$a,topcontrolbartouch:Ta,edgearrowstouch:Ua,captiontouch:Pa,dotbartouch:Ea,gallerybartouch:lb},h=function(n,u){var m=n.attr("style");if(m){var s={},v=/\s*([a-z0-9-]+)\:\s*(.+)/i;p(m.split(";")).each(function(){var A=this.match(v);if(A&&A.length==3)s[A[1]]=A[2]});u.css(s)}if(m=n.attr("toggleid"))u.attr("toggleid",m);if(m=n.attr("toggleState"))u.attr("toggleState",m);if(m=n.attr("class"))u.addClass(m);if(m=n.attr("id"))u.attr("id",m)},
k=function(n,u,m){var s=["left","top","right","bottom","width","height","minHeight","maxHeight","minWidth","maxWidth"];s=s.concat(u);for(u=0;u<s.length;u++){var v=s[u],A=p.isArray(v),I=A?v[1]:v;v=n.attr(A?v[0]:v);if(v!==undefined){if(String(v).length>0&&!isNaN(v))v=Number(v);A?m.attr(I,v):m.css(I,v)}}};b.each(function(){var n=p(this),u=this.nodeName.toLowerCase(),m=n.attr("x"),s=n.attr("left"),v=n.attr("right"),A=n.attr("width"),I=n.attr("y"),aa=n.attr("top"),ba=n.attr("bottom"),ca=n.attr("height");
if(m!==undefined&&s===undefined&&v===undefined)n.attr("left",m);else s!==undefined&&v!=undefined&&A!==undefined&&n.removeAttr("width");if(I!==undefined&&aa===undefined&&ba===undefined)n.attr("top",I);else aa!==undefined&&ba!==undefined&&ca!==undefined&&n.removeAttr("height");if(e[u]!==undefined){m=new e[u](c.ss,c,n);h(n,m.ui);u!="edgearrowstouch"&&u!="topcontrolbartouch"&&k(n,[],m.ui);c.ui.append(m.ui)}else if(/PreviousButtonTouch|NextButtonTouch|PlayPauseButtonTouch|SelectGalleryButtonTouch/i.test(u)){s=
p('<div class="controlButton" controlid="'+{previousbuttontouch:"previousButton",nextbuttontouch:"nextButton",playpausebuttontouch:"playPauseButton",selectgallerybuttontouch:"selectGalleryButton"}[u]+'" style="position:absolute;"><img class="controlImage" /></div>');k(n,[["image","controlImage"],["image2","controlImage2"]],s);h(n,s);c.ui.append(s)}else if(/CaptionToggleButtonTouch|ThumbToggleButtonTouch/i.test(u)){s=/^caption/i.test(u)?"caption":"thumbs";u=s=="caption"?"{builtin.captionToggleButton.data}":
"{builtin.thumbToggleButton.data}";m=s=="caption"?"{builtin.captionToggleButton.dataFaded}":"{builtin.thumbToggleButton.dataFaded}";s=p('<div class="toggleButton" toggleid="'+s+'" style="position:absolute;"><img class="toggleImage" /></div>');s.attr("toggleImageVisible",n.attr("image")||u);s.attr("toggleImageHidden",n.attr("image2")||m);k(n,[],s);h(n,s);c.ui.append(s)}else if(/GenericElementToggleButtonTouch/i.test(u)){u="{builtin.captionToggleButton.data}";m="{builtin.captionToggleButton.dataFaded}";
s=p('<div class="toggleButton" style="position:absolute;"><img class="toggleImage" /></div>');s.attr("toggleImageVisible",n.attr("image")||u);s.attr("toggleImageHidden",n.attr("image2")||m);k(n,[],s);h(n,s);c.ui.append(s)}else if(u=="dynamictexttouch"){u=p('<div class="dynamicText" style="position:absolute; -webkit-text-size-adjust: none !important;" dynamicText_init="'+(n.attr("initText")||"")+'">'+(n.attr("text")||"")+"</div>");k(n,[["hideWhenEmpty","dynamicText_hideWhenEmpty"],["hideWhenEmptyValue",
"dynamicText_hideWhenEmptyValue"]],u);m=["fontFamily","fontSize","fontWeight","fontStyle","textDecoration","color","textAlign"];for(s=0;s<m.length;s++){v=m[s];if(A=n.attr(v))u.css(v,A);else v=="textAlign"&&u.css(v,"left")}h(n,u);c.ui.append(u)}else if(u=="rawhtml")c.ui.append(n.attr("encoded")=="false"?n.children():n.text());else if(u=="rawcss"){n='<style type="text/css">'+n.text()+"</style>";p("head").first().append(n)}});this.doPostCreationStuff()},createFullScreenUI:function(){var b=this;setTimeout(function(){b.ss.eventDispatcher.trigger(w.TOUCH_TOGGLEFULLSCREEN)},
1);setTimeout(function(){b.createFullScreenUI_continue()},450)},createFullScreenUI_continue:function(){var b=new ua.GallerySelector(this.ss,this.ss.uiSetup.gallerySelection);this.ui.append((this.ss.styleManager.getStyle("TouchFullScreen","imageMode","swipe")=="swipe"?new ab(this.ss,this):new Qa(this.ss,this)).ui);var c=this.ss.styleManager.getStyle("ThumbnailsTouch","show","true")!="false",e=this.ss.styleManager.getStyle("ThumbnailsTouch","initiallyVisible","true")!="false",h=this.ss.styleManager.getStyle("CaptionTouch",
"show","true")!="false",k=this.ss.styleManager.getStyle("CaptionTouch","initiallyVisible","false")=="true",n=p('<div style="position: absolute; bottom: 0; left: 0; right: 0; overflow: hidden;"></div>').appendTo(this.ui);if(c){var u=p('<div style="position: relative; width: 100%; height: 0; z-index: 1; padding: 0; background-color: rgba(255,255,255,0.5); overflow: hidden; -webkit-transition: height 0.35s ease-out;" contentHeight="70" expanded="false"></div>');u.appendTo(n);var m=p('<div style="width: 100%; wasposition: relative; height: 70px; padding: 0; background-color: rgba(255,255,255,0.5); overflow: visible;"></div>');
m.appendTo(u);var s=p("<div></div>");m.append(s);var v=new iScroll(s[0],{desktopCompatibility:true,hScrollbar:false,momentum:true});s.addClass("iScrollEnabled").data("iScroll",v);var A=[],I=function(){if(A&&A.length>0){var G=A.shift();G.img.bind("load error",I).attr("src",G.src)}},aa=H.emptyPixel.data;this.ss.eventDispatcher.bind(w.IMAGES_SETGALLERY,function(G,ia){s.children().remove();A=[];var W=0;ia.gallery.children().each(function(){var $=p(this),pa=N.getThumbURL($),X=p('<img src="'+aa+'" width="70" height="70" style="float: left;" />');
A.push({img:X,src:pa});var ga={id:$.index(),image:$,target:s};X.click(function(Fa){Fa.stopPropagation();Da.ss.eventDispatcher.trigger(w.IMAGES_SETIMAGE,ga);Da.ss.stopAutoplay()});s.append(X);W+=X.attr("width")});s.css({width:W,height:70});I();setTimeout(function(){v.refresh()},0)})}var ba=this,ca=function(){ba.ss.eventDispatcher.trigger(w.TOUCH_CONTROLBUTTONUSED)};if(h){var fa=p('<div class="xfs4t_caption tapToToggleControls" style="wasposition: relative; z-index: 1; -webkit-text-size-adjust: none !important; width: 100%; margin-bottom: -1px; background-color: rgba(0,0,0,0.8); font-family: \'Helvetica Neue\', Helvetica, Verdana, _sans; color: #FFF; height: 0; overflow: hidden; -webkit-transition: height 0.35s ease-out;" expanded="false"><div class="refreshScaler" style="left: 0; top: 0; width:100%; WASwidth: 400%; WAS-webkit-transform: scale(0.25); WAS-webkit-transform-origin: 0 0;"><p class="xfs4t_caption_title refreshText dynamicText" style="margin: 0 0 -5px 0; padding: 5px; font-size: 14px; font-weight: bold;">{image.title}</p><p class="xfs4t_caption_caption dynamicText" style="margin: 0; padding: 5px 5px 6px 5px; font-size: 12px;">{image.caption}</p></div></div>');
m=function(){var G=Math.ceil(fa.children().outerHeight());if(fa.attr("contentHeight")!=G){fa.attr("contentHeight",G);fa.attr("expanded")=="true"&&fa.cssHeight(G);setTimeout(arguments.callee,300)}};fa.bind("DOMSubtreeModified",m);setTimeout(m,300);fa[0].addEventListener("DOMSubtreeModified",m,false);fa.prependTo(n).trigger("DOMSubtreeModified")}var T=function(G){var ia=G.attr("expanded")=="true"?"false":"true",W=Number(ia=="true"?G.attr("contentHeight"):0);G.attr("expanded",ia).cssHeight(W);return ia==
"true"};if(c||h){var ha=p('<div class="tapToToggleControls" align="center" style="position: relative; wasbackground-color: #F00; width: 100%; z-index: 0; overflow: hidden; height: 33px; padding: 5px 5px 0 5px; margin-bottom: 0px"><div class="xfs4t_edgeControlBG toggleableControl" style="width: '+(c&&h?"94":"47")+'px; height: 38px; background-color: #333;"></div></div>');m=ha.children().first();if(h){h=H.captionToggleButton;h=p('<div class="'+(c?"xfs4t_edgeControlDivider":"")+'" style="display: inline-block; width:'+
h.width+'px; height:100%"><div class="btnImage" style="width:'+h.width+"px; height:"+h.height+"px; background-image: url("+h.dataFaded+');"></div></div>');h.appendTo(m);var na=h;h="ontouchstart"in window?"touchend":"mouseup";na.bind(h,function(G){if(G&&G.originalEvent){if(G.originalEvent.touches&&G.originalEvent.touches.length>1||G.originalEvent.targetTouches&&G.originalEvent.targetTouches.length>1||G.originalEvent.changedTouches&&G.originalEvent.changedTouches.length>1||G.originalEvent.iScrollTainted)return;
G.preventDefault();G.stopPropagation()}G=T(fa);na.find(".btnImage").css("background-image","url("+H.captionToggleButton[G?"data":"dataFaded"]+")");ca()});k&&na.trigger(h);fa.bind("touchstart touchmove",function(G){if(ba.ss.fullScreenManager.fsEnabled){G.preventDefault();G.stopPropagation()}});fa.bind("touchend",function(G){var ia=p(G.target).parents("a").andSelf().filter("a");if(ba.ss.fullScreenManager.fsEnabled&&ia.length>0){top.location=ia.attr("href");console.log("blankit link");G.stopPropagation();
G.preventDefault();G.originalEvent.alreadyUsed=true}})}if(c){h=H.thumbToggleButton;h=p('<div style="display: inline-block; width:'+h.width+'px; height:100%"><div class="btnImage" style="width:'+h.width+"px; height:"+h.height+"px; background-image: url("+h.dataFaded+');"></div></div>');h.appendTo(m);var Z=h;h="ontouchstart"in window?"touchend":"mouseup";Z.bind(h,function(G){if(G&&G.originalEvent){if(G.originalEvent.touches&&G.originalEvent.touches.length>1||G.originalEvent.targetTouches&&G.originalEvent.targetTouches.length>
1||G.originalEvent.changedTouches&&G.originalEvent.changedTouches.length>1||G.originalEvent.iScrollTainted)return;G.preventDefault();G.stopPropagation()}G=T(u);setTimeout(function(){s.hide().opacity(0.9).show().fadeTo(400,1)},G?350:0);Z.find(".btnImage").css("background-image","url("+H.thumbToggleButton[G?"data":"dataFaded"]+")");ca()});e&&Z.trigger(h)}ha.prependTo(n)}h=H.leftArrow;m=p('<div class="tapToToggleControls toggleableControl" align="right" style="position: absolute; top:50%; left: 0; width: 44px; z-index: 10; overflow: hidden; margin-top: -18px; height: 48px;"><div class="xfs4t_edgeControlBG toggleableControl" style="-webkit-border-radius: 7px; position: absolute; left: -13px; top: 5px; width: 50px; height: 35px; background-color: #333; padding-right: 1px; padding-top: 1px;"><div class="btnImage" style="width:'+
h.width+"px; height:"+h.height+'px; "></div></div></div>');c=new ua.PreviousOrNextButton("Previous",this.ss,h.data,h.dataFaded,m,function(){ca()});m.find(".btnImage").append(c.ui);m.prependTo(this.ui);h=H.rightArrow;m=p('<div class="tapToToggleControls toggleableControl" align="left" style="position: absolute; top:50%; right: 0; width: 44px; z-index: 10; overflow: hidden; margin-top: -18px; height: 48px;"><div class="xfs4t_edgeControlBG" style="-webkit-border-radius: 7px; position: absolute; right: -13px; top: 5px; width: 50px; height: 35px; background-color: #333; padding-left: 1px; padding-top: 1px;"><div class="btnImage" style="width:'+
h.width+"px; height:"+h.height+'px; "></div></div></div>');c=new ua.PreviousOrNextButton("Next",this.ss,h.data,h.dataFaded,m,function(){ca()});m.find(".btnImage").append(c.ui);m.prependTo(this.ui);c=this.ss.xmlManager.mainDoc.find("slideshow>galleries>gallery").length>1;e=p('<div class="tapToToggleControls toggleableControl" align="center" style="position: absolute; left: 0; right: 0; top: 0; z-index: 10;  overflow: hidden; height: 43px; padding: 0 5px 5px 5px; margin-top: -5px;"><div class="xfs4t_edgeControlBG" style="-webkit-border-radius: 7px; height: 32px; width: '+
(c?"138":"91")+'px; background-color: #333; padding-top: 5px;"></div></div>');m=e.children().first();h=H.playButton;h=p('<div class="xfs4t_edgeControlDivider" style="display: inline-block; width:'+h.width+'px; height:100%; position: relative;"><div class="btnImage" style="width:'+h.width+"; height:"+h.height+'; position: absolute; top: 0px;"></div></div>');h.appendTo(m);k=new ua.PlayPauseButton(this.ss,H.pauseButton.data,H.playButton.data,h,function(){ca()});h.find(".btnImage").append(k.ui);if(c){h=
H.galleryButton;h=p('<div class="xfs4t_edgeControlDivider" style="display: inline-block; width:'+h.width+'px; height:100%"><div class="btnImage" style="width:'+h.width+"px; height:"+h.height+"px; background-image: url("+h.data+');"></div></div>');h.appendTo(m);var wa=h}h=H.exitButton;h=p('<div style="display: inline-block; width:'+h.width+'px; height:100%"><div class="btnImage" style="width:'+h.width+"px; height:"+h.height+"px; background-image: url("+h.data+');"></div></div>');h.appendTo(m);m=h;
ba=this;var ra=true;m.bindValidTap(function(G){if(ba.ss.paramManager.getParam("touchMode","inline")=="fs")history.go(-1);else if(ra){G.kill();setTimeout(function(){ba.ss.eventDispatcher.trigger(w.TOUCH_TOGGLEFULLSCREEN)},1);ra=false;setTimeout(function(){ra=true},800);ca()}});c&&wa.bindValidTap(function(){b.show();ca()});this.ui.append(e);var xa=true;this.fsControlsVisible=xa;var Da=this,Ia=NaN,ya=function(){xa=!xa;Da.fsControlsVisible=xa;var G=Da.ui.find(".toggleableControl");G.css({webkitTransition:"opacity 0.3s linear"});
clearTimeout(Ia);if(xa){G.show();setTimeout(function(){G.alpha(1)},0)}else{G.alpha(0);Ia=setTimeout(function(){G.hide()},300)}G.attr("toggleableControlVisible",xa?"true":"false");xa&&ca()};this.ui.bind("click",function(G){if(G.originalEvent)if(!(G.originalEvent.touches&&G.originalEvent.touches.length>1||G.originalEvent.targetTouches&&G.originalEvent.targetTouches.length>1||G.originalEvent.iScrollTainted||G.originalEvent.iScrollDetectedMove||G.originalEvent.alreadyUsed)){if(!Da.ss.fullScreenManager.fsEnabled)if(!G.originalEvent._fake)return;
ya()}});this.ui.find(".tapToToggleControls").bind("touchend",function(G){if(G.originalEvent)G.originalEvent.touches&&G.originalEvent.touches.length>1||G.originalEvent.targetTouches&&G.originalEvent.targetTouches.length>1||G.originalEvent.iScrollTainted||G.originalEvent.iScrollDetectedMove||G.originalEvent.alreadyUsed||ya()});(function(){var G=this;this.toggleTime=Number(ba.ss.styleManager.getStyle("TouchFullScreen","controlHideTimeout","3500"));if(isNaN(this.toggleTime))this.toggleTime=3500;if(this.toggleTime<
1)this.toggleTime=-1;this.toggleTimeout=NaN;this.toggleTimeout_handleExpiration=function(){xa&&ya()};this.setToggleTimeout=function(){clearTimeout(G.toggleTimeout);if(G.toggleTime>0)G.toggleTimeout=setTimeout(G.toggleTimeout_handleExpiration,G.toggleTime)};ba.ss.eventDispatcher.bind(w.TOUCH_CONTROLBUTTONUSED,this.setToggleTimeout);this.setToggleTimeout()})();this.doPostCreationStuff()},doPostCreationStuff:function(){this.wireUpDynamicText();this.ss.staticBaker.ToggleableElementManager.init(this.ss,
this);this.ss.staticBaker.GenericControlManager.init(this.ss,this);this.dispatch_managerReady();this.currentViewID="mainView";this.notifyViewOpened()},wireUpDynamicText:function(){this.ss.staticBaker.DynamicTextManager.init(this.ss,this.ui)},notifyViewOpened:function(){this.ss.eventDispatcher.trigger(w.LAYOUT_VIEWREADY,{target:this,view:null,currentViewID:this.currentViewID});this.lockImages&&this.ss.eventDispatcher.trigger(w.LAYOUT_SETWRITABLE,{target:this,value:true})},dispatch_managerReady:function(){this.ss.eventDispatcher.trigger(w.LAYOUT_MANAGERREADY,
{target:this})}}),qa={setElementPositioning:function(b,c,e){var h=e;if(e==="f")h={left:0,top:0,right:0,bottom:0};if(b=b.elementDescriptor)for(var k in h)if(e=b.attr(k))h[k]=e;c.css(h)},hexToRGBA:function(b,c){var e=b.replace("#","");if(e.length==3)e=e.substr(0,1)+e.substr(0,1)+e.substr(1,1)+e.substr(1,1)+e.substr(2,1)+e.substr(2,1);return"rgba("+Number("0x"+e.substr(0,2))+", "+Number("0x"+e.substr(2,2))+", "+Number("0x"+e.substr(4,2))+", "+c+")"}},Ta=Class.extend({ss:null,layoutManager:null,elementDescriptor:null,
ui:null,init:function(b,c,e){this.ss=b;this.layoutManager=c;this.elementDescriptor=e;b=(this.elementDescriptor&&this.elementDescriptor.attr("buttons")||"play,gallery,caption").replace(/,\s/,",").split(",");this.ui=c=p('<div class="tapToToggleControls toggleableControl" align="center" style="position: absolute; left: 0; right: 0; top: 0; z-index: 10;  overflow: hidden; height: 43px; padding: 0 5px 5px 5px; margin-top: -5px;"><div class="xfs4t_edgeControlBG" style="-webkit-border-radius: 7px; height: 32px; width: 138px; background-color: #333; padding-top: 5px;"></div></div>');
c=c.children().first();e=0;for(var h,k,n=this,u=0;u<b.length;u++){h=b[u];if(h=="play"){h=H.playButton;k=p('<div class="xfs4t_edgeControlDivider" style="display: inline-block; width:'+h.width+'px; height:100%; position: relative;"><div class="btnImage" style="width:'+h.width+"; height:"+h.height+'; position: absolute; top: 0px;"></div></div>');k.appendTo(c);var m=new ua.PlayPauseButton(this.ss,H.pauseButton.data,H.playButton.data,k,function(){});k.find(".btnImage").append(m.ui);e+=h.width+2}else if(h==
"gallery"&&this.ss.xmlManager.mainDoc.find("slideshow>galleries>gallery").length>1){h=H.galleryButton;k=p('<div class="xfs4t_edgeControlDivider" style="display: inline-block; width:'+h.width+'px; height:100%"><div class="btnImage" style="width:'+h.width+"px; height:"+h.height+"px; background-image: url("+h.data+');"></div></div>');k.appendTo(c);k.bindValidTap(function(){n.ss.eventDispatcher.trigger(w.TOUCH_SHOWGALLERYSELECTOR)});e+=h.width+2}else if(h=="caption"){h=H.captionToggleButton;k=p('<div class="xfs4t_edgeControlDivider toggleButton" toggleid="caption" toggleImageVisible="{builtin.captionToggleButton.data}" toggleImageHidden="{builtin.captionToggleButton.dataFaded}" style="display: inline-block; width:'+
h.width+'px; height:100%"><div class="toggleImage" style="width:'+h.width+"px; height:"+h.height+"px; background-image: url("+h.data+');"></div></div>');k.appendTo(c);e+=h.width+2}else if(h=="thumbs"){h=H.thumbToggleButton;k=p('<div class="xfs4t_edgeControlDivider toggleButton" toggleid="thumbs" toggleImageVisible="{builtin.thumbToggleButton.data}" toggleImageHidden="{builtin.thumbToggleButton.dataFaded}" style="display: inline-block; width:'+h.width+'px; height:100%"><div class="toggleImage" style="width:'+
h.width+"px; height:"+h.height+"px; background-image: url("+h.data+');"></div></div>');k.appendTo(c);e+=h.width+2}}c.children().last().removeClass("xfs4t_edgeControlDivider");c.cssWidth(e-2);b=e-2+0;this.ui.css({left:"50%",width:b,marginLeft:-b/2})}}),Ua=Class.extend({ss:null,layoutManager:null,elementDescriptor:null,ui:null,init:function(b,c,e){this.ss=b;this.layoutManager=c;this.elementDescriptor=e;e=H.leftArrow;b=p('<div class="tapToToggleControls toggleableControl" align="right" style="position: absolute; top:50%; left: 0; width: 44px; z-index: 10; overflow: hidden; margin-top: -18px; height: 48px;"><div class="xfs4t_edgeControlBG toggleableControl" style="-webkit-border-radius: 7px; position: absolute; left: -13px; top: 5px; width: 50px; height: 35px; background-color: #333; padding-right: 1px; padding-top: 1px;"><div class="btnImage" style="width:'+
e.width+"px; height:"+e.height+'px; "></div></div></div>');c=new ua.PreviousOrNextButton("Previous",this.ss,e.data,e.dataFaded,b,function(){});b.find(".btnImage").append(c.ui);e=H.rightArrow;c=p('<div class="tapToToggleControls toggleableControl" align="left" style="position: absolute; top:50%; right: 0; width: 44px; z-index: 10; overflow: hidden; margin-top: -18px; height: 48px;"><div class="xfs4t_edgeControlBG" style="-webkit-border-radius: 7px; position: absolute; right: -13px; top: 5px; width: 50px; height: 35px; background-color: #333; padding-left: 1px; padding-top: 1px;"><div class="btnImage" style="width:'+
e.width+"px; height:"+e.height+'px; "></div></div></div>');e=new ua.PreviousOrNextButton("Next",this.ss,e.data,e.dataFaded,c,function(){});c.find(".btnImage").append(e.ui);this.ui=b.add(c)}}),Va=Class.extend({ToggleableElementManager:null,GenericControlManager:null,DynamicTextManager:null,SlideStyles:null,IndividualSlideStatic:null,ErrorManager:null,SlideshowAlert:null,GalleryPasswordPanel:null,init:function(){var b={};p.extend(b,{ss:null,layoutManager:null,itemVisibilities:{},init:function(m,s){this.itemVisibilities=
{};this.ss=m;this.layoutManager=s;var v=this;this.layoutManager.ui.find(".toggleElement").each(function(){var A=p(this),I=A.attr("toggleid"),aa=v.itemVisibilities[I]!==undefined?v.itemVisibilities[I]:A.attr("toggleState")=="true";v.itemVisibilities[I]=aa;A.attr("toggleType");A.attr("toggleState",aa?"true":"false").opacity(aa?1:0);aa?A.show():A.hide();setTimeout(function(){A.css("-webkit-transition")||A.css("-webkit-transition","opacity 0.35s ease-out")},1)});this.layoutManager.ui.find(".toggleButton").each(function(){var A=
p(this),I=A.attr("toggleid");v.updateButtonImage(A,v.itemVisibilities[I]||false);A.bindValidTap(function(aa){v.userRequestedToggle(I);aa.alreadyUsed=aa.originalEvent.alreadyUsed=true})})},updateButtonImages:function(m,s){var v=this;this.layoutManager.ui.find(".toggleButton[toggleid="+m+"]").each(function(){v.updateButtonImage(p(this),s)})},updateButtonImage:function(m,s){var v=m.attr(s?"toggleImageVisible":"toggleImageHidden")||"{builtin.failedPhoto.data}",A=v.match(/^\{builtin\.([^\}]+)/);if(A&&
A[1])v=N.getChainValue(H,A[1]);m.find(".toggleImage").add(m.filter(".toggleImage")).each(function(){var I=p(this);I.is("div")?I.css("backgroundImage","url("+v+")"):I.attr("src",v)})},userRequestedToggle:function(m){var s=this.itemVisibilities[m]!==undefined?!this.itemVisibilities[m]:false;this.itemVisibilities[m]=s;this.layoutManager.ui.find(".toggleElement[toggleid="+m+"]").each(function(){var v=p(this);s&&v.show();setTimeout(function(){v.attr("toggleState",s?"true":"false").opacity(s?1:0)},1);s||
setTimeout(function(){v.attr("toggleState")=="false"&&v.hide()},350)});this.updateButtonImages(m,s)}});var c={};p.extend(c,{ss:null,layoutManager:null,currentImageObj:null,autoplayEnabled:true,prevImageID:undefined,nextImageID:undefined,styles:{prev:{},next:{}},init:function(m,s){this.styles={prev:{},next:{}};this.ss=m;this.layoutManager=s;this.initializeElements();this.setupStyles();this.setupListeners()},initializeElements:function(){var m=L.create(this,this.handleUserClick);this.layoutManager.ui.find(".controlButton").each(function(){var s=
p(this),v=s.attr("controlid");s.bindValidTap(function(A){m.call(null,A,{controlid:v})})});this.updateButtonImages("previousButton",2);this.updateButtonImages("nextButton",2);this.updateButtonImages("selectGalleryButton",1)},handleUserClick:function(m,s){m.kill();m.alreadyUsed=m.originalEvent.alreadyUsed=true;var v=s.controlid;if(v=="previousButton"){if(this.prevImageID){this.styles.prev.disableAutoplayOnClick&&this.ss.stopAutoplay();this.ss.eventDispatcher.trigger(w.IMAGES_JUMPTOUNIQID,{id:this.prevImageID,
target:this})}}else if(v=="nextButton"){if(this.nextImageID){this.styles.next.disableAutoplayOnClick&&this.ss.stopAutoplay();this.ss.eventDispatcher.trigger(w.IMAGES_JUMPTOUNIQID,{id:this.nextImageID,target:this})}}else if(v=="playPauseButton")this.ss.eventDispatcher.trigger(w.AUTOPLAY_ENABLEDISABLE,{target:this,value:!this.autoplayEnabled});else v=="selectGalleryButton"&&this.ss.eventDispatcher.trigger(w.TOUCH_SHOWGALLERYSELECTOR)},updateButtonImages:function(m,s){if(m=="selectGalleryButton")s=1;
var v=this;this.layoutManager.ui.find(".controlButton[controlid="+m+"]").each(function(){v.updateButtonImage(m,p(this),s)})},updateButtonImage:function(m,s,v){var A=s.attr(v==1?"controlImage":"controlImage2")||"{builtin.failedPhoto.data}";if(A=="{builtin.failedPhoto.data}"){if(m=="previousButton")A=v==1?"{builtin.leftArrow.data}":"{builtin.leftArrow.dataFaded}";if(m=="nextButton")A=v==1?"{builtin.rightArrow.data}":"{builtin.rightArrow.dataFaded}";if(m=="playPauseButton")A=v==1?"{builtin.playButton.data}":
"{builtin.pauseButton.data}";if(m=="selectGalleryButton")A="{builtin.galleryButton.data}"}if((m=A.match(/^\{builtin\.([^\}]+)/))&&m[1])A=N.getChainValue(H,m[1]);s.find(".controlImage").add(s.filter(".controlImage")).each(function(){var I=p(this);I.is("div")?I.css("backgroundImage","url("+A+")"):I.attr("src",A)})},setupStyles:function(){this.styles.prev=this.ss.styleManager.getManyStyles("PreviousButtonTouch",{disableAutoplayOnClick:"true",enableGalleryJumping:"false",enableLooping:"false"});this.styles.next=
this.ss.styleManager.getManyStyles("NextButtonTouch",{disableAutoplayOnClick:"true",enableGalleryJumping:"false",enableLooping:"false"})},setupListeners:function(){this.ss.eventDispatcher.bind(w.IMAGES_SYNCIMAGESSTART,L.create(this,this.handleSyncImages));this.ss.eventDispatcher.bind(w.AUTOPLAY_ENABLEDISABLE,L.create(this,this.handleAutoplayEnableDisable));this.ss.autoplayManager&&this.setAutoplayEnabled(this.ss.autoplayManager.autoplayEnabled)},handleAutoplayEnableDisable:function(m,s){this.setAutoplayEnabled(s.value)},
setAutoplayEnabled:function(m){this.autoplayEnabled=m;this.updateButtonImages("playPauseButton",this.autoplayEnabled?2:1)},handleSyncImages:function(m,s){this.currentImageObj={id:s.id,image:s.image};var v=this.getPreviousImageID("Previous"),A=this.getPreviousImageID("Next");if(v!=this.prevImageID){this.prevImageID=v;this.updateButtonImages("previousButton",this.prevImageID==null?2:1)}if(A!=this.nextImageID){this.nextImageID=A;this.updateButtonImages("nextButton",this.nextImageID==null?2:1)}},getPreviousImageID:function(m){var s=
this.currentImageObj.image,v=this.styles[m=="Previous"?"prev":"next"];if(m=="Previous"){m=s.prev();if(m.length>0)return m.attr("_uniqidFull");if(v.enableGalleryJumping){m=s.parent().prev().children().last();if(m.length>0)return m.attr("_uniqidFull");if(v.enableLooping){m=s.parent().parent().children().last().children().last();if(m.length>0)return m.attr("_uniqidFull")}}}else{m=s.next();if(m.length>0)return m.attr("_uniqidFull");if(v.enableGalleryJumping){m=s.parent().next().children().first();if(m.length>
0)return m.attr("_uniqidFull");if(v.enableLooping){m=s.parent().parent().children().first().children().first();if(m.length>0)return m.attr("_uniqidFull")}}}return null}});var e={ss:null,ui:null,currentGalleryObj:null,currentImageObj:null,updateTimeout:NaN};e.init=function(m,s){var v=e;v.ss=m;v.ui=s;v=this;v.ui.find(".dynamicText").each(function(){var A=p(this);A.attr("dynamicText_orig",A.html());var I=A.attr("dynamicText_init");I!==undefined&&A.text(I)});v.ss.eventDispatcher.bind(w.IMAGES_SETGALLERY,
v.handleSetGallery);v.ss.eventDispatcher.bind(w.IMAGES_SYNCIMAGESSTART,v.handleSyncImages)};e.handleSetGallery=function(m,s){e.currentGalleryObj={id:s.id,gallery:s.gallery};e.updateTextMomentarily()};e.handleSyncImages=function(m,s){e.currentImageObj={id:s.id,image:s.image};e.updateTextMomentarily()};e.updateTextMomentarily=function(){clearTimeout(e.updateTimeout);updateTimeout=setTimeout(e.updateText,100)};e.updateText=function(){e.ui.find(".dynamicText").each(function(){var m=p(this),s=m.attr("dynamicText_orig"),
v=e.evaluateText(s);m.html(v);s=true;if(m.attr("dynamicText_hideWhenEmpty")!="false"){s=v.length>0;v=m.attr("dynamicText_hideWhenEmptyValue");if(v!==undefined)s=e.evaluateText(v).length>0;s?m.show():m.hide()}})};e.evaluateText=function(m){m=m||"";m=m.split("{metadata.").join("{image.metadata_");var s=e.currentImageObj;if(s!=null){var v=s.image;if(m.indexOf("{image.link}")!=-1)m=m.split("{image.link}").join(N.getImageLink(v));if(m.indexOf("{image.caption}")!=-1)m=m.split("{image.caption}").join(N.getImageCaption(v,
v.index(),e.ss));if(m.indexOf("{image.title}")!=-1)m=m.split("{image.title}").join(N.getImageTitle(v,v.index(),e.ss));m=N.parseLink({id:s.id,image:v,link:m})}else m=m.replace(/\{image\.[^\}]+\}/gi,"");s=e.currentGalleryObj;if(s!=null){v=s.gallery;m=m.split("{gallery.index}").join("{gallery.id}").split("{gallery.index0}").join("{gallery.id0}");if(m.indexOf("{gallery.id}")!=-1)m=m.split("{gallery.id}").join(s.id+1);if(m.indexOf("{gallery.id0}")!=-1)m=m.split("{gallery.id0}").join(s.id);if(m.indexOf("{gallery.uniqID}")!=
-1)m=m.split("{gallery.uniqID}").join(v.attr("_uniqid"));m=m.split("{gallery.rawID}").join("{gallery.id}");if(m.indexOf("{gallery.total}")!=-1)m=m.split("{gallery.total}").join(v.parent().children().length);m=N.parseStringAtts({prefix:"gallery",xmlNode:v,string:m})}else m=m.replace(/\{gallery\.[^\}]+\}/gi,"");return m};var h={scaleMode:"scaleDown",horizontalAlign:"center",verticalAlign:"middle",allowLinksInFS:false,ready:false,init:function(m){var s=h;s.ready=true;var v=m.styleManager.getStyle("IndividualSlideTouch",
"scaleMode","scaleUpAndDown");/showAvailable|none|scaleDown|scaleUpAndDown|fillArea/.test(v)||(v="scaleDown");if(v=="none")v="showAvailable";s.scaleMode=v;v=m.styleManager.getStyle("IndividualSlideTouch","horizontalAlign","center");/center|left|right/i.test(v)||(v="center");s.horizontalAlign=v.toLowerCase();v=m.styleManager.getStyle("IndividualSlideTouch","verticalAlign","middle");/top|middle|bottom/.test(v)||(v="middle");s.verticalAlign=v.toLowerCase();s.allowLinksInFS=m.paramManager.getParam("touchLinksFS",
"false")=="true"}},k={};k.realMethod=null;k.showError=function(m){k.realMethod(m)};var n={};p.extend(n,{realMethod:null,show:function(m,s){n.realMethod(m,s)}});var u={};p.extend(u,{realMethod:null,show:function(){return u.realMethod.apply(null,arguments)}});this.ToggleableElementManager=b;this.GenericControlManager=c;this.DynamicTextManager=e;this.SlideStyles=h;this.IndividualSlideStatic={sid:0,vsid:undefined};this.ErrorManager=k;this.SlideshowAlert=n;this.GalleryPasswordPanel=u}}),Pa=Class.extend({ss:null,
layoutManager:null,elementDescriptor:null,ui:null,init:function(b,c,e){this.ss=b;this.layoutManager=c;b=(this.elementDescriptor=e)&&this.elementDescriptor.attributes()||{bottom:"0",left:"0",right:"0",visible:"true"};c=b.visible!="false";this.ui=p('<div class="xfs4t_caption toggleElement" toggleid="caption" style="position: absolute; wasz-index: 1; -webkit-text-size-adjust: none !important; background-color: rgba(0,0,0,0.8); font-family: \'Helvetica Neue\', Helvetica, Verdana, _sans; color: #FFF; text-align: left; overflow: hidden; -webkit-transition: all 0.35s ease-out; opacity: '+
(c?"1":"0")+';" toggleState="'+c+'"><p class="xfs4t_caption_title refreshText dynamicText" style="margin: 0; padding: 5px; font-size: 14px; font-weight: bold;">{image.title}</p><p class="xfs4t_caption_caption dynamicText" style="margin: 0; padding: 0 5px 5px 5px; font-size: 12px;">{image.caption}</p></div>');c=["left","top","right","bottom","width","height","minHeight","maxHeight","minWidth","maxWidth"];for(e=0;e<c.length;e++){var h=c[e];b[h.toLowerCase()]&&this.ui.css(h,b[h.toLowerCase()])}}}),$a=
Class.extend({ss:null,layoutManager:null,elementDescriptor:null,ui:null,currentGalleryObj:null,currentImageObj:null,thumbHolder:null,styleName:"ThumbnailsTouch",styles:{},init:function(b,c,e){this.thumbsQueue=[];this.styles={};this.ss=b;this.layoutManager=c;this.elementDescriptor=e;this.styles={backgroundColor:this.ss.styleManager.getStyle(this.styleName,"backgroundColor","#000000",this),backgroundAlpha:this.ss.styleManager.getStyle_number(this.styleName,"backgroundAlpha",0.6,this),enableTouch:this.ss.styleManager.getStyle(this.styleName,
"enableTouch","true",this)!="false",showArrows:this.ss.styleManager.getStyle(this.styleName,"showArrows","false",this)=="true",arrowColor:this.ss.styleManager.getStyle(this.styleName,"arrowColor","#FFFFFF",this),arrowSize:this.ss.styleManager.getStyle_number(this.styleName,"arrowSize",8,this),arrowPadding:this.ss.styleManager.getStyle_number(this.styleName,"arrowPadding",20,this),arrowThickness:this.ss.styleManager.getStyle_number(this.styleName,"arrowThickness",2,this),tileWidth:this.ss.styleManager.getStyle_number(this.styleName,
"tileWidth",70,this),tileHeight:this.ss.styleManager.getStyle_number(this.styleName,"tileHeight",70,this),spacing:this.ss.styleManager.getStyle_number(this.styleName,"spacing",10,this),addFloater:this.ss.styleManager.getStyle(this.styleName,"addFloater","false",this)=="true",disableAutoplayOnClick:this.ss.styleManager.getStyle(this.styleName,"disableAutoplayOnClick","true",this)!="false"};this.createUI()},createUI:function(){this.ui=N.createSprite();var b,c=this.elementDescriptor&&this.elementDescriptor.attributes()||
{top:0,bottom:0,width:90};if(c.left&&c.right&&(c.top||c.bottom)){b={left:c.left,right:c.right,height:c.height||90};b[c.bottom?"bottom":"top"]=c.bottom||c.top}else{b={top:c.top||0,bottom:c.bottom||0,width:c.width||90};if(!c.right&&!c.left)c.right="0";b[c.right?"right":"left"]=c.right||c.left}this.ui.addClass("xfs4t_thumbnailsElement").css(b);b=c.visible!="false";this.ui.addClass("toggleElement").attr({toggleid:"thumbs",toggleState:b?"true":"false"});setTimeout(L.create(this,this.createUI_continue),
1)},createUI_continue:function(){var b=this,c=this.ui.outerWidth(),e=this.ui.outerHeight(),h=c>e?"h":"v";this.styles.orientation=h;var k=N.createSprite(),n=N.createSprite(),u=k.add(n),m=this.styles.arrowSize,s=this.styles.arrowPadding,v=this.styles.arrowThickness,A=m+s*2,I=1,aa=qa.hexToRGBA(this.styles.backgroundColor,this.styles.backgroundAlpha);if(this.styles.showArrows){if(h=="h"){k.css({height:e,width:A,left:0,top:0});n.css({height:e,width:A,right:0,top:0});u.each(function(T){var ha=p(this),na=
'<canvas width="'+A+'" height="'+e+'" style="position:absolute;"></canvas>',Z=p(na).appendTo(ha)[0].getContext("2d"),wa=T==0?A-s:s;T=T==0?s:A-s;Z.moveTo(wa,e/2-m);Z.lineTo(T,e/2);Z.lineTo(wa,e/2+m);Z.strokeStyle=b.styles.arrowColor;Z.lineWidth=v;Z.stroke();Z=p(na).addClass("highlight").hide().prependTo(ha)[0].getContext("2d");Z.fillStyle=qa.hexToRGBA(b.styles.arrowColor,0.2);Z.fillRect(0,0,A,e)})}else{k.css({width:c,height:A,top:0,left:0});n.css({width:c,height:A,bottom:0,left:0});u.each(function(T){var ha=
p(this),na='<canvas width="'+c+'" height="'+A+'" style="position:absolute;"></canvas>',Z=p(na).appendTo(ha)[0].getContext("2d"),wa=T==0?A-s:s;T=T==0?s:A-s;Z.moveTo(c/2-m,wa);Z.lineTo(c/2,T);Z.lineTo(c/2+m,wa);Z.strokeStyle=b.styles.arrowColor;Z.lineWidth=v;Z.stroke();Z=p(na).addClass("highlight").hide().prependTo(ha)[0].getContext("2d");Z.fillStyle=qa.hexToRGBA(b.styles.arrowColor,0.6);Z.fillRect(0,0,c,A)})}u.css({backgroundColor:aa});this.ui.append(u);u="ontouchstart"in window?"touchstart":"mousedown";
var ba="ontouchstart"in window?"touchend touchcancel":"mouseup",ca=L.create(this,this.events_scrollBack),fa=L.create(this,this.events_scrollForward);k.bind(u,true,ca).bind(ba,false,ca);n.bind(u,true,fa).bind(ba,false,fa)}else I=A=0;this.thumbHolderOuter=N.createSprite().css({backgroundColor:aa,overflow:"hidden"}).appendTo(this.ui).addClass("xfs4t_thumbHolderOuter");h=="h"?this.thumbHolderOuter.css({height:e,left:A+I,right:A+I}):this.thumbHolderOuter.css({width:c,top:A+I,bottom:A+I});this.thumbHolder=
N.createSprite("full").appendTo(this.thumbHolderOuter).addClass("xfs4t_thumbHolder");h=new iScroll(this.thumbHolder[0],{desktopCompatibility:true,onScrollEnd:L.create(this,this.events_onScrollEnd),_hScrollbar:false,momentum:true,alwaysTrapTouches:true,scrollbarColor:"rgba(255,255,255,0.5)"});this.thumbHolder.addClass("iScrollEnabled").data("iScroll",h);h.enabled=this.styles.enableTouch;this.setupListeners();if(this.ss.imageManager.currentGallery){this.events_setGallery();this.ss.imageManager.currentImage&&
this.events_syncImages()}},setupListeners:function(){this.ss.eventDispatcher.bindObject([w.IMAGES_SETGALLERY,L.create(this,this.events_setGallery),w.IMAGES_SYNCIMAGESSTART,L.create(this,this.events_syncImagesStart)]);var b=this;this.thumbsQueue_load=function(){if(b.thumbsQueue&&b.thumbsQueue.length>0){var c=b.thumbsQueue.shift();c.img.bind("load error",b.thumbsQueue_load).attr("src",c.src)}}},thumbsQueue:[],events_closeGallery:function(){this.currentGalleryObj=this.currentImageObj=this.currentSlideRef=
null;this.thumbHolder.find("img").attr("src",H.emptyPixel.data);this.thumbHolder.children().remove();this.thumbsQueue=[]},events_setGallery:function(b,c){this.events_closeGallery();this.currentGalleryObj=c?{id:c.id,gallery:c.gallery}:this.ss.imageManager.currentGallery;var e=H.emptyPixel.data,h=this.thumbsQueue,k=this,n=this.styles.orientation,u=this.ui.is(":hidden");u&&this.ui.show();var m=n=="h"?this.thumbHolder.outerHeight():this.thumbHolder.outerWidth();u&&this.ui.hide();var s=this.styles.tileWidth,
v=this.styles.tileHeight,A=this.styles.spacing,I=n=="h"?v:s,aa=n=="h"?s:v,ba=Math.max(1,Math.floor((m-A*2)/I)),ca=(m-(ba*I+(ba-1)*A))/2,fa=ca,T=A;this.currentGalleryObj.gallery.children().each(function(ha){var na=p(this),Z=N.getThumbURL(na),wa=ha%ba,ra=null;if(k.styles.addFloater)ra=p('<div class="xfs4t_thumb_floater" floaterid="'+ha+'" style="position:absolute"></div>').appendTo(k.thumbHolder);ha=p('<img class="xfs4t_thumb" src="'+e+'" thumbid="'+ha+'" width="'+s+'" height="'+v+'" />');h.push({img:ha,
src:Z});ha.css({position:"absolute"}).appendTo(k.thumbHolder);ra=ra?ra.add(ha):ha;var xa={id:na.index(),image:na,target:k};ha.click(function(Da){Da.stopPropagation();k.noteUserInteraction();k.ss.eventDispatcher.trigger(w.IMAGES_SETIMAGE,xa);k.styles.disableAutoplayOnClick&&k.ss.stopAutoplay()});n=="h"?ra.y(fa).x(T):ra.x(fa).y(T);fa+=I+A;if(wa==ba-1){fa=ca;T+=aa+A}});this.thumbsQueue_load();n=="h"?this.thumbHolder.css({width:T,height:m}):this.thumbHolder.css({width:m,height:T});if(this.thumbHolder.data("iScroll")){u&&
this.ui.show();this.thumbHolder.data("iScroll").refresh();setTimeout(function(){u&&k.ui.hide()},20)}},events_syncImagesStart:function(b,c){this.currentImageObj=c?{id:c.id,image:c.image}:this.ss.imageManager.currentImage;var e="xfs4t_thumb_selected",h="xfs4t_thumb_visited";this.thumbHolder.find("."+e).removeClass(e);var k=this.thumbHolder.find("[thumbid="+this.currentImageObj.id+"]");k.addClass(e).addClass(h);var n=k;e="xfs4t_thumb_floater_selected";h="xfs4t_thumb_floater_visited";this.thumbHolder.find("."+
e).removeClass(e);k=this.thumbHolder.find("[floaterid="+this.currentImageObj.id+"]");k.addClass(e).addClass(h);k=n;if(!this.userIsInteracting){var u=this.ui.is(":hidden");u&&this.ui.show();e=this.thumbHolder.data("iScroll");if(this.styles.orientation=="h"){k=k.x()+k.width()/2-this.thumbHolder.parent().outerWidth()/2;e?this.scroller_scrollTo(Math.min(0,-k),0):this.thumbHolder.parent().scrollLeft(k)}else{k=k.y()+k.height()/2-this.thumbHolder.parent().outerHeight()/2;e?this.scroller_scrollTo(0,Math.min(0,
-k)):this.thumbHolder.parent().scrollTop(k)}var m=this;setTimeout(function(){u&&m.ui.hide()},1)}},userInteractionTimeout:NaN,userIsInteracting:false,noteUserInteraction:function(){var b=this;this.userIsInteracting=true;clearTimeout(this.userInteractionTimeout);this.userInteractionTimeout=setTimeout(function(){b.userIsInteracting=false},4E3)},events_onScrollEnd:function(){this.scroller_lastScrollWasProgrammatic||this.noteUserInteraction();this.scroller_lastScrollWasProgrammatic=false},scroller_lastScrollWasProgrammatic:false,
scroller_scrollTo:function(b,c){this.scroller_lastScrollWasProgrammatic=true;this.thumbHolder.data("iScroll").scrollTo(b,c)},scrollArrowInterval:100,scrollingBack:false,events_scrollBack:function(b){var c=b.data;if(this.scrollingBack=c){var e=this,h=this.thumbHolder.data("iScroll");setTimeout(function(){if(e.styles.orientation=="h")h?e.scroller_scrollTo(Math.min(0,h.x+50),0):e.thumbHolder.parent().scrollLeft(e.thumbHolder.parent().scrollLeft()-50);else h?e.scroller_scrollTo(0,Math.min(0,h.y+50)):
e.thumbHolder.parent().scrollTop(e.thumbHolder.parent().scrollTop()-50);e.noteUserInteraction();e.scrollingBack&&setTimeout(arguments.callee,e.scrollArrowInterval)},e.scrollArrowInterval)}b=p(b.currentTarget).find(".highlight");c?b.show():b.hide()},scrollingForward:false,events_scrollForward:function(b){var c=b.data;if(this.scrollingForward=c){var e=this,h=this.thumbHolder.data("iScroll");setTimeout(function(){if(e.styles.orientation=="h")h?e.scroller_scrollTo(Math.max(h.maxScrollX,h.x-50),0):e.thumbHolder.parent().scrollLeft(e.thumbHolder.parent().scrollLeft()+
50);else h?e.scroller_scrollTo(0,Math.max(h.maxScrollY,h.y-50)):e.thumbHolder.parent().scrollTop(e.thumbHolder.parent().scrollTop()+50);e.noteUserInteraction();e.scrollingForward&&setTimeout(arguments.callee,e.scrollArrowInterval)},e.scrollArrowInterval)}b=p(b.currentTarget).find(".highlight");c?b.show():b.hide()}}),Ea=Class.extend({ss:null,layoutManager:null,elementDescriptor:null,ui:null,currentGalleryObj:null,currentImageObj:null,styleName:"DotBarTouch",styles:{},cssClasses:{item:"xfs4t_dotbar_i",
itemSelected:"xfs4t_dotbar_iS",itemVisited:"xfs4t_dotbar_iV"},init:function(b,c,e){this.styles={};this.ss=b;this.layoutManager=c;this.elementDescriptor=e;this.styles={size:this.ss.styleManager.getStyle_number(this.styleName,"size",20,this),spacing:this.ss.styleManager.getStyle_number(this.styleName,"spacing",10,this),color:this.ss.styleManager.getStyle(this.styleName,"color","#FFF",this),disableAutoplayOnClick:this.ss.styleManager.getStyle(this.styleName,"disableAutoplayOnClick","true",this)!="false"};
this.createUI()},createUI:function(){var b=this.styles.size,c=b+"px",e=this.styles.color;b="."+this.cssClasses.item+" { display: inline-block; width: "+c+"; height: "+c+"; -webkit-border-radius: "+b/2+"px; wasborder: 1px solid "+e+"; font-size: 0; line-height: 0; color: rgba(0,0,0,0); background-color: "+qa.hexToRGBA(e,0.4)+"; margin-right: "+this.styles.spacing+"px; }";b+="."+this.cssClasses.itemSelected+" { background-color: "+qa.hexToRGBA(e,1)+"; }";p("head").first().append('<style type="text/css">'+
b+"</style>");e=this.elementDescriptor&&this.elementDescriptor.attributes()||{bottom:40,left:0,right:0};this.ui=N.createSprite().attr({align:"center",xfsElementType:"dotBar"}).addClass("xfs4t_dotbarElement").css("-webkit-text-size-adjust","none !important");b=["left","top","right","bottom","width","height","minHeight","maxHeight","minWidth","maxWidth"];for(c=0;c<b.length;c++){var h=b[c];e[h.toLowerCase()]&&this.ui.css(h,e[h.toLowerCase()])}this.setupListeners();if(this.ss.imageManager.currentGallery){this.events_setGallery();
this.ss.imageManager.currentImage&&this.events_syncImages()}},setupListeners:function(){this.ss.eventDispatcher.bindObject([w.IMAGES_SETGALLERY,L.create(this,this.events_setGallery),w.IMAGES_SYNCIMAGESSTART,L.create(this,this.events_syncImagesStart)])},events_closeGallery:function(){this.currentGalleryObj=this.currentImageObj=this.currentSlideRef=null;this.ui.children().remove()},events_setGallery:function(b,c){this.events_closeGallery();this.currentGalleryObj=c?{id:c.id,gallery:c.gallery}:this.ss.imageManager.currentGallery;
var e=this;this.currentGalleryObj.gallery.children().each(function(h){var k=p(this);h=p('<div class="'+e.cssClasses.item+'" thumbid="'+h+'">'+(h+1)+"</div>");h.appendTo(e.ui);var n={id:k.index(),image:k,target:e};h.click(function(u){u.stopPropagation();e.ss.eventDispatcher.trigger(w.IMAGES_SETIMAGE,n);e.styles.disableAutoplayOnClick&&e.ss.stopAutoplay()})})},events_syncImagesStart:function(b,c){this.currentImageObj=c?{id:c.id,image:c.image}:this.ss.imageManager.currentImage;var e=this.cssClasses.itemSelected,
h=this.cssClasses.itemVisited;this.ui.find("."+e).removeClass(e);this.ui.find("[thumbid="+this.currentImageObj.id+"]").addClass(e).addClass(h)}}),lb=Class.extend({ss:null,layoutManager:null,elementDescriptor:null,ui:null,currentGalleryObj:null,restartAutoplayOnNextSetGallery:false,styleName:"GalleryBarTouch",styles:{},cssClasses:{element:"xfs4t_gb",item:"xfs4t_gb_i",itemSelected:"xfs4t_gb_iS",itemVisited:"xfs4t_gb_iV"},init:function(b,c,e){this.styles={};this.ss=b;this.layoutManager=c;this.elementDescriptor=
e;this.styles={backgroundColor:this.ss.styleManager.getStyle(this.styleName,"backgroundColor","#000",this),backgroundAlpha:this.ss.styleManager.getStyle_number(this.styleName,"backgroundAlpha",0.8,this),color:this.ss.styleManager.getStyle(this.styleName,"color","#FFF",this),restartAutoplay:this.ss.styleManager.getStyle(this.styleName,"restartAutoplay","true",this)!="false"};this.createUI()},createUI:function(){var b=this.styles.color,c="";c+="."+this.cssClasses.element+" { background-color: "+qa.hexToRGBA(this.styles.backgroundColor,
this.styles.backgroundAlpha)+"; padding: 3px; -webkit-text-size-adjust: none !important; font-family: 'Helvetica Neue', Helvetica, Verdana, _sans; font-size: 12px; }";c+="."+this.cssClasses.item+" { display: inline-block; padding: 4px 10px; color: "+qa.hexToRGBA(b,0.7)+"; }";c+="."+this.cssClasses.itemSelected+" { color: "+qa.hexToRGBA(b,1)+"; }";p("head").first().append('<style type="text/css">'+c+"</style>");b=this.elementDescriptor&&this.elementDescriptor.attributes()||{bottom:40,left:0,right:0};
this.ui=N.createSprite().attr({xfsElementType:"galleryBar"}).addClass(this.cssClasses.element);c=["left","top","right","bottom","width","height","minHeight","maxHeight","minWidth","maxWidth"];for(var e=0;e<c.length;e++){var h=c[e];b[h.toLowerCase()]&&this.ui.css(h,b[h.toLowerCase()])}var k=this;this.ss.xmlManager.mainDoc.find("slideshow>galleries>gallery").each(function(n){var u=p(this).attr("title")||"(No Title)";p('<div gid="'+n+'" class="'+k.cssClasses.item+'">'+u+"</div>").appendTo(k.ui).click(function(){k.restartAutoplayOnNextSetGallery=
k.styles.restartAutoplay;k.ss.eventDispatcher.trigger(w.IMAGES_REQUESTGALLERY,{target:this,id:n})})});this.setupListeners();this.ss.imageManager.currentGallery&&this.events_setGallery()},setupListeners:function(){this.ss.eventDispatcher.bind(w.IMAGES_SETGALLERY,L.create(this,this.events_setGallery))},events_setGallery:function(b,c){this.currentGalleryObj=c?{id:c.id,gallery:c.gallery}:this.ss.imageManager.currentGallery;var e=this.cssClasses;this.ui.find("."+e.itemSelected).removeClass(e.itemSelected);
this.ui.find("[gid="+this.currentGalleryObj.id+"]").addClass(e.itemVisited).addClass(e.itemSelected);this.restartAutoplayOnNextSetGallery&&this.ss.startAutoplay();this.restartAutoplayOnNextSetGallery=false}}),ua={};ua.GallerySelector=Class.extend({ss:null,ui:null,selectedClass:"",scroll:null,restartAutoplayOnNextSetGallery:false,init:function(b,c){this.ss=b;this.ui=c;this.createUI();this.setupListeners()},createUI:function(){var b=this.ss.styleManager.getStyle("GallerySelectorTouch","type","text")==
"image";this.selectedClass=b?"xfs4t_gs_iiS":"xfs4t_gs_iS";p("head").append("<style type=\"text/css\">.xfs4t_gs { background-color: rgba(0,0,0,0.92); -webkit-text-size-adjust: none !important; }.xfs4t_gs, .xfs4t_gs td { font-family: 'Helvetica Neue', Helvetica, Verdana, _sans; color: #FFF !important; font-size: 12px;  }.xfs4t_gs table, .xfs4t_gs tr, .xfs4t_gs td, .xfs4t_gs th, .xfs4t_gs tbody {padding:0;margin:0}.xfs4t_gs_i{ margin-bottom:5px; border: 1px solid rgba(255,255,255,0.1); padding: 5px; }.xfs4t_gs_i .leftSide { padding-right: 7px; }.xfs4t_gs_ii{ margin-bottom:5px; border: 1px solid rgba(255,255,255,0.1); }.xfs4t_gs_ii img { width: 100%; }.xfs4t_gs_iS { background-color: rgba(255,255,255,0.1); }.xfs4t_gs_iiS { border-color: rgba(255,255,255,1); }.xfs4t_gs_i_t { font-size: 14px; font-weight: bold; }</style>");
this.ui.addClass("xfs4t_gs").css({overflow:"hidden"});var c=p('<div style="left: 0; right: 0; padding: 5px;"></div>').appendTo(this.ui),e=this,h=this.ss.xmlManager.mainDoc.find("slideshow>galleries>gallery"),k=h.length;h.each(function(u){var m=p(this),s=m.attr("thumb")||"",v='<table cellpadding="0" cellspacing="0" width="100%"><tr>';if(s!="")v+='<td valign="top" class="leftSide"><img src="'+s+'"'+(b?' width="100%"':"")+" /></td>";if(!b||s==""){s=m.attr("title")||"(No Title)";m=m.attr("description")||
"";v+='<td valign="top" align="left" width="100%"><div class="rightSide"><p class="xfs4t_gs_i_t" wasstyle="font-size: 14px; font-weight: bold;">'+s+'</p><p wasstyle="font-size: 12px;" class="xfs4t_gs_i_d">'+m+"</p></div></td>"}v+="</tr></table>";p('<div class="xfs4t_gs_i'+(b?"i":"")+'" style="'+(u==k-1?"margin-bottom: 0":"")+'">'+v+"</div>").appendTo(c).bind("click",function(A){if(!("ontouchstart"in window&&!A.originalEvent._fake)){e.hide();setTimeout(function(){e.restartAutoplayOnNextSetGallery=
e.ss.styleManager.getStyle("GallerySelectorTouch","restartAutoplay","true")!="false";e.ss.eventDispatcher.trigger(w.IMAGES_REQUESTGALLERY,{target:this,id:u})},500)}})});var n=new iScroll(c[0],{alwaysTrapTouches:true,hScrollbar:false,vScrollbar:true,momentum:true,scrollbarColor:"rgba(255,255,255,0.5)",scrollbarWrapper:this.ss.uiSetup.gsScrollbar[0]});this.scroll=n;c.addClass("iScrollEnabled").data("iScroll",n);setTimeout(function(){n.refresh()},0);e.ss.styleManager.getStyle("GallerySelectorTouch",
"initiallyOpen","false")=="true"?setTimeout(function(){e.show();setTimeout(function(){e.ui.css({webkitTransition:"bottom 0.45s cubic-bezier(0,0,0.1,1)"})},50)},50):e.ui.css({webkitTransition:"bottom 0.45s cubic-bezier(0,0,0.1,1)"})},setupListeners:function(){this.ss.eventDispatcher.bind(w.IMAGES_SETGALLERY,L.create(this,this.handleGallerySet));this.ss.eventDispatcher.bind(w.TOUCH_RESIZE,L.create(this,this.popResizeBuggies));this.ss.eventDispatcher.bind(w.TOUCH_SHOWGALLERYSELECTOR,L.create(this,this.show))},
handleGallerySet:function(b,c){this.ui.find("."+this.selectedClass).removeClass(this.selectedClass);this.ui.find(".xfs4t_gs_i").addClass("justatest").eq(c.id).addClass(this.selectedClass);this.restartAutoplayOnNextSetGallery&&this.ss.startAutoplay();this.restartAutoplayOnNextSetGallery=false},show:function(){this.ss.stopAutoplay();this.ss.uiSetup.gsScrollbar.show();var b=this;b.ui.css("bottom",0);setTimeout(function(){b.scroll.refresh()},1)},hide:function(){this.ss.uiSetup.gsScrollbar.hide();this.ui.css("bottom",
"100%")},popResizeBuggies:function(){setTimeout(L.create(this,this.popResizeBuggies_real),100)},popResizeBuggies_real:function(){var b=this;setTimeout(function(){b.scroll.refresh()},1)}});ua.PreviousOrNextButton=Class.extend({type:"Previous",ss:null,img1:null,img2:null,callback:null,ui:null,styles:{},enabled:true,currentImageObj:null,init:function(b,c,e,h,k,n){this.styles={};this.type=b;this.ss=c;this.img1=e;this.img2=h;this.callback=n;this.styles=this.ss.styleManager.getManyStyles(b+"ButtonTouch",
{disableAutoplayOnClick:"true",enableGalleryJumping:"false",enableLooping:"false"});this.ui=p("<img />");this.ss.eventDispatcher.bind(w.IMAGES_SYNCIMAGESSTART,L.create(this,this.handleSyncImages));var u=this;(k||this.ui).bindValidTap(function(m){m.kill();u.enabled&&u.jumpToPrev();u.callback&&u.callback.call()});this.setEnabled(false)},handleSyncImages:function(b,c){this.currentImageObj={id:c.id,image:c.image};this.setEnabled(this.getPreviousImageID()!=null)},jumpToPrev:function(){if(this.enabled){var b=
this.getPreviousImageID();if(b!=null){this.styles.disableAutoplayOnClick&&this.ss.stopAutoplay();this.ss.eventDispatcher.trigger(w.IMAGES_JUMPTOUNIQID,{id:b})}}},setEnabled:function(b){var c=!this.ui.attr("src")||this.enabled!=b;this.enabled=b;if(c)this.ui.attr("src",b?this.img1:this.img2)},getPreviousImageID:function(){var b=this.currentImageObj.image;if(this.type=="Previous"){var c=b.prev();if(c.length>0)return c.attr("_uniqidFull");if(this.styles.enableGalleryJumping){c=b.parent().prev().children().last();
if(c.length>0)return c.attr("_uniqidFull");if(this.styles.enableLooping){c=b.parent().parent().children().last().children().last();if(c.length>0)return c.attr("_uniqidFull")}}}else{c=b.next();if(c.length>0)return c.attr("_uniqidFull");if(this.styles.enableGalleryJumping){c=b.parent().next().children().first();if(c.length>0)return c.attr("_uniqidFull");if(this.styles.enableLooping){c=b.parent().parent().children().first().children().first();if(c.length>0)return c.attr("_uniqidFull")}}}return null}});
ua.PlayPauseButton=Class.extend({ss:null,img1:null,img2:null,callback:null,ui:null,autoplayEnabled:true,init:function(b,c,e,h,k){this.ss=b;this.img1=c;this.img2=e;this.callback=k;this.ui=p("<img />");this.ss.eventDispatcher.bind(w.AUTOPLAY_ENABLEDISABLE,L.create(this,this.handleAutoplayEnableDisable));var n=this;(h||this.ui).bindValidTap(function(u){u.originalEvent.alreadyUsed=true;n.ss.eventDispatcher.trigger(w.AUTOPLAY_ENABLEDISABLE,{target:n,value:!n.autoplayEnabled});n.callback&&n.callback.call()});
this.ss.autoplayManager&&this.setAutoplayEnabled(this.ss.autoplayManager.autoplayEnabled)},handleAutoplayEnableDisable:function(b,c){this.setAutoplayEnabled(c.value)},setAutoplayEnabled:function(b){var c=!this.ui.attr("src")||this.autoplayEnabled!=b;this.autoplayEnabled=b;if(c)this.ui.attr("src",this.autoplayEnabled?this.img1:this.img2)}});var Wa=Class.extend({ss:null,ui:null,imgDescriptor:null,imgDisplay:null,sid:NaN,inactiveClickAreaEnabled:true,width:NaN,height:NaN,img:null,vid:null,videoBtn:null,
imgLoaded:false,isVideo:false,videoSrc:"",link:"",linkTarget:"",init:function(b,c,e,h,k){this.ss=b;this.imgDescriptor=c;this.imgDisplay=e;this.width=h;this.height=k;this.sid=this.ss.staticBaker.IndividualSlideStatic.sid++;this.ss.staticBaker.SlideStyles.ready||this.ss.staticBaker.SlideStyles.init(this.ss);this.createUI()},createUI:function(){this.ui=N.createSprite().css({overflow:"hidden",width:this.width,height:this.height}).addClass("xfs4t_slideWrap");this.ui.data("slideData",this);var b=this.imgDescriptor.image,
c=N.getImageURL(b),e=N.getVideoURL(b),h=N.getImageLink(b);b=h?N.getImageLinkTarget(b)||"":"";if(this.ss.paramManager.getParam("touchLinks","true")=="false")h="";this.isVideo=e!=null;this.videoSrc=e;this.link=h;this.linkTarget=b;var k=p(new Image);k.addClass("xfs4t_photo");k.css({position:"absolute"}).hide();k.load(L.create(this,this.handlePhotoLoad)).error(function(){k.attr("src",H.failedPhoto.data)});this.addPhotoTapListeners(k);k.attr("src",c);this.img=k;this.ui.append(k);if(this.isVideo){this.videoBtn=
c=p('<img width="100" height="100" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABkCAYAAABw4pVUAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAALEgAACxIB0t1+/AAAABx0RVh0U29mdHdhcmUAQWRvYmUgRmlyZXdvcmtzIENTNXG14zYAAAAVdEVYdENyZWF0aW9uIFRpbWUAMTEvOC8xMLjbU+gAABeOSURBVHic7V17UBRXuv91zyM4IA/lEbigSAAfccBBV1FI4mWDGnysZXxtIWv+sUjWcmuJ91bY3Su7lbq1q3uTtTZrNlJJxaQIGy1ShkWDpfERVh5GJcAAIYiSKBhg5CERBoGZ7vtHd8+cbnqmBxiYIff+qqa6aab7nPl+/X3fOd/5zjkUvB/xAKIAzOWPOgCRLt7bDsAMoA1AD3+8NQV1dBsoT1dABgZwJCyCXfCU5Cg9lwMrcy4c2wF8A46cmgnXdArgDYTowJGwjP8AXL3ID5ycOwILMRHSc/JaLf+pAadRHoMnCVkIYA04MmbBLmRacg7JNTltkYMcAQx/jZFcE86HwJFSCaB5wr9sEvAEISngiIjHWBLIIw2ATktLC4qLi/MzGAyBycnJIRRFISEhIdiVgoxGYzfLsrh27dqDmpqahy0tLQOXL1/uA0eC8GFljiw4c1YJoMJtv9wFTCchqQA2AgiGvPBVAGi9Xj87MzMzMjU1NcRgMATrdDqNOythNptHa2pqusvLyx8UFha219fXPwJHhBXyJHUD+AxAuTvr4QjTQchCAFtg1wgRAeBI8M/MzIzcsWPH/JiYmIBpqJMNra2t/UVFRXd5cn6AnRQpQbcAlGCKTdlUEuILYBOA5yFPhDo7OzsqKysrOiUlJXwK6+EyKioqOgoKCr7Lz89vA2CBPDEXAZwFMDgVdZgqQpIA7AXXgiKJUAFQ5+bmxuTk5CwJDQ3VTVH5k4LJZDIfPXr068OHD7eCI8YKMTFmAB8C+MrdZbubEKlWCNqgAqcR815//fVEbyVCCpPJZM7Ly6vLz8+/BzsxgtZMiba4k5BgAPvBdeZEGqHX6/0LCgpWJiYmutQ68jbU1dV1Z2VlXed9jFRj2gG8Dc75TxruImQ+gIOwmygVADUA9fHjx/XZ2dmL3VSOLFiWHXONotxvjfPz85tefvnlenCkkBpjBvAmgLuTLcMdtU4F5y8EEyVoRUBxcXGKO1pNLMvCYrEwAwMDI21tbYNNTU0PjUbjw7q6uh+ampoGe3t7R7VaLRUZGekTFxen0+v1/kuWLAlYtGhRQEREhJ+fn5+apmnaHSS1trb2b926taK+vr4fYm1hwfmVSTWPJ1tDgQzBcavB+Yr5f/nLX1ZMtA/BsiysVivT29v7uLy8vPOjjz5qq6ysfNjV1TUMcW8bEMesgLFhFyo0NFS7du3aOTt37oxKSUkJCwkJ8ZkMQWazefTVV1+9mZ+ffxd2bREc/qRImQwhJBmCZmhOnjy5fNeuXbHjfRjLsmAYhjWZTObi4uJ7x48f/85oNAqdNmmoAxDHoqQYQwqIpndsbKxu//790bt27VoQGhqqU6lUE5LDqVOnbu/evbsawCjEfmXCpEyUECkZagCazz77LDkjI2PeeB82MjLCfPXVV6ZDhw41lpWV9Y6OjpJmgCRDGhRUIoQ8l4ZpVADoTZs2hfz+979/2mAwBE9Ea0pLS+9t3LjxGjhSSL8yIVImQsgYMsLCwnTnz59/ZjytKMEsVVVVdeXk5NRVV1f3Q9zWlyMCEJPgjBDpuay2CL9j+fLlAW+//XbSihUrQsarMXV1dd3r16+/2tXVZcYkSRkvIfMB/BckZFRWVqaNx3kzDIO7d+/+sG/fvhuXLl3qxtiOl9Q0kceJQholloulqZ577rm5H3zwwcp58+b50zQt8xh5tLa29q9Zs+ayDCn/jXG0vsZDSDCAPHBNW8FMaWtra9Nc1QyWZTE8PGw9cuRI/ZEjR24PDQ2NwLFWAJMnwRGkWiPSFgDqN954Y8mBAweWaLVal1mpq6vrXrZs2WUAI7CTYgbwOlzsp7hKiC+A/wA3hEr6jNWu+gyWZdHW1vZo27ZtFdXV1Q8hfouk5mk6IWfGVADUy5cvDywpKXkmPDzc11XfwvuUKoh9ShuAN+BCj95V9jdB3ANXnzx5crmrZDAMg88//7wtJibmfHV1da+kslJSphuCeRRCIla+bqPV1dV9CQkJF65fv25iGMbZM2zIyMiYd/LkyeXgXlohdBQJToaKULnwnSQAu2DvZ2iys7Ojc3NzE10pwGKxMMeOHWvcu3dvjdVqJVVZIALwDBGOIBppHBoasr733ntt8fHx2qeffnoOTdOKqrJ06dI5nZ2dj6qrq3+AXesXALgPoMPZvUqE+IILiWjBk6HX6wOLioqe0Wg0imSOjo4yhw4d+urQoUPNLMsKWiHnK7wRIl92+vRpk7+/P7tq1aoQV0hJS0t78syZM/dNJtMI8awlAK6CsxCyUBLqNnADTGr+o6mqqvp3V6K1FouF+dWvfnX9r3/9qxDCFjTDU75iMmAB4MKFC70Wi2V07dq1YUqkaDQa1fr160Pfeuutb2H/rYL/bXR0nzNCFgLYA7vf0Bw/fjwhPT1dMSfKarUyr732WvXf/va3bzGWDNeMsXfB9vJcvXr1oUajYVJTU8MoBU8fFBTkEx4eTp89e/YB7FZhAbjRxx65e5w98D/BkaICZ6qCjEZjhlLNGYZh//znP9f/5je/acLY3utM0goSZO9eTdO0trCwcPnOnTufcqWvkpCQUFpfX98He4ilGcD/yH3XESEpAF6CuL/xU6X+BsuyKCsr+z49Pb3CYrEM48dBhgARKRRFaSsrK59dtWrVk0pNYr5/cgni/skHkMlocUTvJtjb5ars7Ox5rnT+7t+/P5Cenl5psVjIgmeav3AEMoJgZVnWsnnz5mudnZ2KfYvExMTg7OzsebA3gyk4aAbLUUtqhwaAtqura5OSIx8eHrauXLnygtFoJFVTaFH9WEB2INUANKtWrZr7r3/963mlHr3JZDKHhYWdBaclgnw+gERL5B6yhiiUzs3NjVEig2EYHDlypN5oNEoDhD8GzSBBDgFYAVi+/PLL3g8//PCWUscxNDRUl5ubGwN7NIACJ2sRpBqyEFyIZFzacefOnR/0ev2FoaGhx7C3qiZqqqShDAGOQvCegM2cg/ex9+/f3xgREeHr7CYHWvIGiFwvqYYI2kEBoLOzs6OUyLBarczLL798QxIonIzAbD92+/bt4bD3gchQBDmu4QlINcX6yiuv3LBarU5/c2hoqC47OzsK4lxlkZaQhAhZ6DZzlZWVFe20ViyL8vLyzosXLwohdHf4DBshRUVFG4xG4/qlS5cGgtNYDezkyCVgTydEMbCSkpIuo9GoGNHlZUqaLQM42QMQEyJkodvSO5UyCkdHR5mDBw8aIY5NTdacCAJWAYBerw81Go2br169+hy4EI4QxhE0RgXPkDJGS/bv319jtVqdvpApKSnher3eH3ZSZoGTPQAxIctACCMzM9Npj5xlWdy8edNEjPS507aL/AdFUUhNTY2wWCzbT5w4kQTgCdg1RiCFfOumCyJSvvzyy4dNTU19SjfxsiVfJGFejCwhNAB6x44d8509lGEY9o9//GMTpqZVJfvGq1Qq6qWXXoofGBjYevjw4afBaQtpyjxBjM10MQxjycvLa1BqcfGyJes5hhAD8Tel1+tnKw3JdnV1DV64cKEb7o/eKvoFX19fzWuvvZbQ19e3ZevWrRGQJ2W6HD+pJUxxcbGpt7d3yNkNMTExAXq9fjbElsAA4g/R5BlXzNU///nPe3x2iMdC6YGBgT6ffvrp2tu3b2/gHb+gMdPt+G2ksCxrLS0tbZPLpiTBy5isXzxgJ2QR8Q86NTU1xNnDrFYr8+67796Dl/TGn3rqqQCj0ZhRW1v7U3D+RUrMdDh+W17AsWPHvmUYxikjvIxJQhYBdkIiiX/QBoPBadyqu7v7cWNj4yNMT0KCS6AoComJicEWi+XFkpKSZIhJmWrHT8qAuXHjRn9fX9+wsxt4GZOERIK/EM9/hwJApaWlBSmlgFZVVXWNjIx41Fw5gkqlojZv3hztAccv8iU3b940OfuyTqfTpKWlBUGsufE0uEwSAXRcXJyf01JZFqdPn74PL49Xecjx20gpKCi4p+RHeFmTLd0oGtwKCTbHZzAYAp09xGq1MufOneuGJBlgYvWfekyj4xfF2crKynqV/Agva7LsuYKG2C4mJyc7deiDg4OWnp4ecuB+RmAaHT8LgL1///7j4eFhq7Mv8rImCYmiQcRRAChOdPn+++8HMDYJekZgGhy/SEu6u7ud9kdkZK0TkrjAV4BSmpTf3Nws5BrNWDhx/FL/MlFtYQGwbW1tTkcTeVmT5URKw+9OK8CyLBobGx9iBmqHHBw4fikp44VNQ+7cufPIhe+LyqCJiy4VXltb2y8t2LV6ei8Ex3/nzp0Ner0+ABMnRDRVorGxsd/hN8Wwyd/1fHseDQ0Ngg/50SEmJiawrq5us9FoXIeJmyzbS9rc3Dyg1PSVYlyEUBSFjo6OkXGV8H8YDx48GLesxq0hUzHd2FvQ0dEx+OKLL15KSEi4ADeYY41GM275jvuGqKioJ8Z7j7djcHBw9MiRI8aIiIizn376aSfclNwXHh4+blmpx3vD0qVLZ9fX1z8c733eCKvVypaWlt7dsmXLDYinSUyUEFGPPz4+3mkWihwEDXFZPZOSkqTd/Rlnw1iWFdI7z23ZsuUa7Gk55JzzyWbOUIsXL/Z3tUpCWVINUazAkiVLAjCDyejo6Bj85S9/eaO4uLgL9tlS0jmOwOTIAAAqOjrazwWfKyqHBrd4ivAPVimVJTY21h8zkAzCT3xWXFz8PTitIHOQ3TnPkQJARUVFOY2c87Imy2tXQ7IKp1K7OSwsTEdRFMWyLKklXtsvceInpmKyqciUBwUF+Tj7soyszTS4GaK2Sl27du2Bs4f4+fmpw8PDfeDlWqLgJ6ZysikFgIqNjdX5+Pg4naHGy5p8IdpocDN5bBdramqctqBomqZTU1O92rF3dHQMbtu27Ytly5ZdamhoeIixTnsqpkmI5JGRkRGqNMOKlzVJSI+gIQKYlpaWAaelUhR2794tzU/1Ckyzn5CDLS9h27ZtkUoOnZc1mSDSpoZ9LXQWAHv58uU+s9k86mxcfc2aNWEajUY1OjpKkuIxPzLNfsIRbGTodDp1QkLCXGdfNpvNo/wawmS9bgn9kHbiH0xNTY3TllZwcLDPokWLfCHWkGnXFA/6CSlIc0WvXLky0N/fX+vsBl7G5MvSDtg7ht8Q/2DKy8udOnaapulXXnllAcQjbNMKD/kJZ7Cl4e7bty9aado0L2OSkG8AuyBvEf9gCgsL2+UeYiuZovCzn/1snlardcfomhRkOs0YeIGfkINNOyiKUr3wwgtRSv6Dl7F0aXMbIcKWDQwAtr6+/lFra6vTwZWwsDDdxo0bQyEeg3Y3KTZYrVb2zJkz3/n5+RXn5uY2Yqx5kuttTwdsZABQ7dmzJzwgIMBpULG1tbWfX+KcfPFqALGpqSW+wBQVFd119lCVSkX97ne/Wwz3J54JdbACnJ8wGo0Pli1bVuphP+EINjIoilLl5eUtVZq7zsuWrHOt8D85QlgAViWzBXDTfX/yk58Ewj2JAQJsdejo6BjYvn3754mJiZ83NDT0wfN+QgpSO+gNGzYEu7KQGy9bsu42Qkjh6QAcBrfgjBqAtry8/DmlWVQ3btwwJScnf8EwDDmRcTJCkmYUCnWUph55ejxfqJttguw333yTvnDhwiBnN1VUVHSkpqaWwe73BgHkgg9hkRpiBmfHbGaroKDgO6VaJSUlhWzYsCEE7jNdNg0hPtKlWL0hhdVmqgCodu7c+WRcXJxTMgCAlyn5G0S7+kgFN6Fp0W1tbY/0ev3n/f390vUGPS20qQJJBimnWc5umsi06GZwzS/bxPijR49+rVS7yMjI2X/4wx+EZZymoinsTRC1qgCoPvroI0NISIhTMgCAlyX5wt6CZD8SOYFNaGmNkZERa0ZGxpVLly49gN3x/igS6giQZKgBaJ599tmQy5cvp6lUqilbWqMC3AqaNi3Jy8urU6qpVqtVFRYWrpkzZ44PxHmyPyYtITVDHRERofvkk09SlMgAAF6GpHZ0YxyrAZ0F0R/Iz8+/V1dXpzgpPjQ0VHfmzJnVGo1Gi7FzMGY6yN+i1mg0mpKSkjXBwcGKpqqurq6b34OE9K1nHRUihwpIfElWVtZ1pYIpikJycvKT77zzTgLEebIzmRSyCa4CT8Y//vGP5QaDIcSVPDVedlLfIbv7m7MRrR7Y1+GgTCaTJTw8XLVixQqn80f4lP+5FEWNlpWVkYNdLGae+SKjuLb1io8ePbp079698a4shpmfn9/0/vvv34O4I3sCDpb4UyJEB26NQAoAzp492/OLX/wiUmmsmKZp6plnngkbGRkZKS8vdzXh2NsgbU2pAWj+9Kc/Lc7JyVnqChmtra3969atq4R494SLAMoc3aO0Kul3AJ7lK0MBoK5cufJg79690UrLxNI0Ta1du/ZJtVpt/eKLLxSXm/AySMnQgF8E9MCBA0+7sli/2Wweff75578wmUxk38wM4B1MYpnYUQAmACuECyaTabSnp8e8adOmKMe3cRA0JT4+3uf06dPCrFTyx3ibCbPFpUBoBQDNJ598sjIzMzPO1Z0TDhw4cL20tLQLYlP1HoB7ShVwBbvA7bxmq+TJkydXuLpxC8MwuH79emdaWloFv66Wo3XfPQlRoBD23R9mnT9/PlWv1we7ulsCv9HLTYij0hcBnFK619WWz1lwQ4y2Vtfu3burS0tLnbJtK4SmsWrVqidbW1tfWL169Vx4fsEYEg61Yt26dWENDQ3rExISXCajtLT0Hr/rDvnStcNBM1euMq5i0ttVANxuOidOnLiVk5PTSKxC50hbpkpryDwAKSGqWbNmaf/+97/r9+zZE6tWq11urk/ndhUC5sMNG7qwLIuuri7zq6++Wv3xxx93YOw2p3IhdnekdwpHkgihSUtTFKX++c9/HvHmm28m8RmaLj/cExu6CHDLlkcAt+ZWQ0ND769//euaK1eu9MJ5+o5o/p6Dc8Bxo0Ga2GfTCoqiVOvWrQt+6623kmJjYwNcadKS8OSWRwLcuimY1Wplm5ub+w4fPvz1xx9/3GmxWOTGPhxpDEmIHBmOiKBnzZql2b17d/hvf/vbJQsWLAiYyG5t3rApmAC3bpsHcK2x/v7+x+fOnWs/duxYa1VVlTAFW44UR6ZMmismMk9PPPGEevXq1YHZ2dkL0tPT/y0oKMhnPHtNkfCmbfMETNnGkizLsv39/cO1tbU9p06dart06VL37du3zXBtCNdGhFarVUVHR89KT08P3rFjR1RCQsJcf39/7UT3LgS8d2NJAdOy9SrDMOzjx4+tPT09Q99+++2jlpaWH5qamh61tLQM9vb2jlAURYWFhT0RExOjW7x4sX98fPzsefPm+c2ZM2eWj4+PituicPI/19u3XhUwHx7YnNjRXJapmik8UzYnFvD/23e7Aa5sCuYqzABugtOMBbDbd8ZkMg0fP378bmdn56OVK1fO9fX1nZBvmW6YTCbzwYMHb+7bt69WEiQkN7j/AIDbItpTFapIAudXBBMm0pjc3NyYnJycJa7sZeUJmEwm89GjR78+fPiwsH+WtH9kBucvvnJ32VMZO/IFt2nJ8xgbnqDBtcaisrKyopWS8aYLFRUVHQUFBd/l5+e3YWz0QGh6XwQXl1LcyGUimI5g3kIAW2BfG1hKDK3X6/0zMzMjd+zYMd8drbLxoLW1tb+oqOhuYWFhO+8jbAvsQ0zELQAlkKTtuBvTGV1NBbARnPMn40gigvR6/ezMzMzI1NTUEIPBEDzRvowjmM3m0Zqamu7y8vIHPAnCnu1ymyOz4Jz1Z5hkc9ZVeCLcnQJurF60mrbMkQZAp6WlBcXFxfkZDIbA5OTkEIqioLTqnQCj0djNsiyuXbv2oKam5mFLS8sAP41MGpaRHgWNqISDZISpgidH7BaCI0bYJkNKDpmpIrdyqFLdydCKdBIQI7kmnA+By7WtxBSbJkfwhiFUYSOZZbDvEiANCMLJuSNI411yBAnXavmPKPHZE/AGQqQwgDNniyBeoJM8Ss/lIBeiF47t4Ob03YJ99phXwBsJkSIe3NrCc/mjDnailNAO7o1vA5fW1Ab7NHCvxP8CS/MvvAG9yP0AAAAASUVORK5CYII=">').css({position:"absolute",
left:"50%",top:"50%",margin:"-50px 0 0 -50px"});this.ui.append(c);this.addPhotoTapListeners(c)}},addPhotoTapListeners:function(b){b.bind("touchend",L.create(this,this.handlePhotoTouchEnd));b.bind("touchstart",L.create(this,this.handlePhotoTouchStart));"ontouchstart"in window||b.bind("mouseup",L.create(this,function(){this.handleValidPhotoClick()}))},handlePhotoLoad:function(){this.imgLoaded=true;this.img.attr({origWidth:this.img.width(),origHeight:this.img.height()});this.positionAndSizeImage();this.img.show()},
photoMultiTouchInProgress:false,handlePhotoTouchStart:function(b){this.photoMultiTouchInProgress=false;if(b&&b.originalEvent){var c=b.originalEvent;if(c.touches&&c.touches.length>1||c.targetTouches&&c.targetTouches.length>1||c.changedTouches&&c.changedTouches.length>1)this.photoMultiTouchInProgress=true;this.photoLastTouchXY={x:b.originalEvent.touches[0].screenX,y:b.originalEvent.touches[0].screenY}}},handlePhotoTouchEnd:function(b){var c=this;if(b&&b.originalEvent){var e=b.originalEvent;if(e.touches&&
e.touches.length>1||e.targetTouches&&e.targetTouches.length>1||e.changedTouches&&e.changedTouches.length>1)return}if(!this.photoMultiTouchInProgress){e=Math.abs(this.photoLastTouchXY.y-b.originalEvent.changedTouches[0].screenY);if(!(Math.abs(this.photoLastTouchXY.x-b.originalEvent.changedTouches[0].screenX)>5||e>5))if(c.imgDisplay.getTouchEnabled&&c.imgDisplay.getTouchEnabled()!==false)b.originalEvent.iScrollTapCallback=function(){return c.handleValidPhotoClick()};else if(c.handleValidPhotoClick()){b.preventDefault();
b.stopPropagation();b.alreadyUsed=b.originalEvent.alreadyUsed=true}else{e=b.originalEvent.changedTouches[0];var h=document.createEvent("MouseEvents");h.initMouseEvent("click",true,true,b.view,1,e.screenX,e.screenY,e.clientX,e.clientY,b.ctrlKey,b.altKey,b.shiftKey,b.metaKey,0,null);h._fake=true;b.target.dispatchEvent(h)}}},handleValidPhotoClick:function(){if(!this.inactiveClickAreaEnabled&&this.isVideo){this.ss.stopAutoplay();this.ss.staticBaker.IndividualSlideStatic.vsid=this;if(this.vid){if(this.vid){var b=
false;try{var c=this.vid[0];if(c.ended){c.currentTime=0;c.play()}else c.paused?c.play():c.pause();if(!c.paused&&this.ss.layoutManager.fsControlsVisible===false)b=true}catch(e){console.log("Video restart error..."+e)}return b?true:undefined}}else{b=navigator.userAgent;if(/Android\s/.test(b)){self.location=this.videoSrc;if(this.ss.layoutManager.fsControlsVisible===false)return true;return}c=p('<video class="xfs4t_video" src="'+this.videoSrc+'" nocontrols="controls" autoplay="autoplay"></video>');if(/iPhone|iPod/i.test(b)&&
!/OS\s3_[012]/.test(b)){c.css({width:1,height:1,position:"absolute",top:-100});var h=this.ss.uiSetup.videoOverlay;h.show();var k=this;setTimeout(function(){if(k.ss.staticBaker.IndividualSlideStatic.vsid.sid==k.sid){var n=k.ss.staticBaker.IndividualSlideStatic.vsid.vid;if((n=n[0]&&!n[0].paused)&&!h.is(":visible"))h.show();else!n&&h.is(":visible")&&h.hide();setTimeout(arguments.callee,300)}},300)}else{this.img.hide();this.videoBtn.hide();c.css({width:"100%",height:"100%"})}this.addPhotoTapListeners(c);
this.vid=c;this.ui.append(c);c[0].pause();c[0].play();if(this.ss.layoutManager.fsControlsVisible===false)return true;return}}if(!(this.ss.fullScreenManager.fsEnabled&&!this.ss.staticBaker.SlideStyles.allowLinksInFS)){if(this.inactiveClickAreaEnabled){b=this.imgDescriptor.image.attr("_uniqidFull");this.ss.eventDispatcher.trigger(w.IMAGES_JUMPTOUNIQID,{id:b});this.ss.stopAutoplay();return true}if(this.link&&this.link!=""){Ma(this.link,this.linkTarget);return true}}},positionAndSizeImage:function(){if(!this.vid){var b=
this.img.attr("origWidth"),c=this.img.attr("origHeight"),e=b/c,h=this.width,k=this.height,n=h/k,u=b,m=c,s=1,v=this.ss.staticBaker.SlideStyles.scaleMode;if(v=="scaleDown"||v=="scaleUpAndDown"){v=v=="scaleUpAndDown";if(e>=n&&(b>h||v))s=h/b;else if(e<n&&(c>k||v))s=k/c}else if(v=="fillArea")s=e>=n?k/c:h/b;u*=s;m*=s;b={width:u,height:m};k=this.ss.staticBaker.SlideStyles.horizontalAlign;c=this.ss.staticBaker.SlideStyles.verticalAlign;if(k=="left")b.left=0;else if(k=="right")b.right=0;else if(k=="center"){b.left=
"50%";b.marginLeft=-(u/2)}if(c=="top")b.top=0;else if(c=="bottom")b.bottom=0;else if(c=="middle"){b.top="50%";b.marginTop=-(m/2)}this.img.css(b)}},stopVideo:function(){this.vid&&this.vid[0].pause()},resize:function(b,c){this.width=b;this.height=c;this.ui.css({width:this.width,height:this.height});if(this.imgLoaded||this.vid)this.positionAndSizeImage()}}),Qa=Class.extend({ss:null,layoutManager:null,elementDescriptor:null,ui:null,currentGalleryObj:null,currentImageObj:null,currentSlideRef:null,imageChangeable:true,
childrenCreatedCount:0,styleName:"ImagesStandardTouch",alwaysClosePreviousGallery:false,fadeSpeed:1200,init:function(b,c,e){this.ss=b;this.layoutManager=c;this.elementDescriptor=e;this.ss.imageManager.imageDisplayExists=true;this.alwaysClosePreviousGallery=this.ss.styleManager.getStyle(this.styleName,"alwaysClosePreviousGallery","false",this)=="true";this.fadeSpeed=Number(this.ss.styleManager.getStyle(this.styleName,"fadeSpeed",1200,this));if(isNaN(this.fadeSpeed))this.fadeSpeed=1200;this.createElement()},
createElement:function(){this.ui=N.createSprite().css({overflow:"hidden"}).addClass("xfs4t_slideDisplay");qa.setElementPositioning(this,this.ui,"f");this.setupListeners();if(this.ss.imageManager.currentGallery){this.events_setGallery();this.ss.imageManager.currentImage&&this.events_displayImage()}},setupListeners:function(){setTimeout(L.create(this,this.testForResize),100);this.ss.eventDispatcher.bindObject([w.IMAGES_CLOSEGALLERY,L.create(this,this.events_closeGallery),w.IMAGES_SETGALLERY,L.create(this,
this.events_setGallery),w.IMAGES_DISPLAYIMAGE,L.create(this,this.events_displayImage),w.IMAGES_SYNCIMAGESSTART,L.create(this,this.events_syncImagesStart),w.IMAGES_SYNCIMAGES,L.create(this,this.events_syncImages)])},lastRenderW:NaN,lastRenderH:NaN,testForResize:function(){var b=this.ui.outerWidth(),c=this.ui.outerHeight();if(b!=this.lastRenderW||c!=this.lastRenderH){this.lastRenderW=b;this.lastRenderH=c;this.updateDisplayList(b,c)}setTimeout(L.create(this,this.testForResize),500)},updateDisplayList:function(b,
c){this.ui.children().each(function(){p(this).data("slideData").resize(b,c)})},events_closeGallery:function(){this.currentGalleryObj=this.currentImageObj=this.currentSlideRef=null;this.find("img").attr("src",H.emptyPixel.data);this.children().removeData("slideData").remove()},events_setGallery:function(b,c){this.alwaysClosePreviousGallery&&this.events_closeGallery(null);this.currentGalleryObj=c?{id:c.id,gallery:c.gallery}:this.ss.imageManager.currentGallery},events_displayImage:function(b,c){this.currentImageObj=
c?{id:c.id,image:c.image}:this.ss.imageManager.currentImage;this.showImage(this.currentImageObj)},events_syncImagesStart:function(){},events_syncImages:function(){},showImage:function(b){b=new Wa(this.ss,b,this,this.lastRenderW,this.lastRenderH);b.inactiveClickAreaEnabled=false;b=b.ui;b.opacity(0).css({"-webkit-transition":"opacity "+this.fadeSpeed/1E3+"s ease-out","-webkit-backface-visibility":"hidden"});this.ui.append(b);var c=this,e=this.currentSlideRef;this.currentSlideRef=b;b=this.currentSlideRef.data("slideData").imgDescriptor;
this.ss.eventDispatcher.trigger(w.IMAGES_SYNCIMAGESSTART,{target:this,slideRef:this.currentSlideRef,id:b.id,image:b.image});setTimeout(function(){var h=c.currentSlideRef.data("slideData").imgDescriptor;c.ss.eventDispatcher.trigger(w.IMAGES_SYNCIMAGES,{target:c,slideRef:c.currentSlideRef,id:h.id,image:h.image})},this.fadeSpeed);setTimeout(function(){c.currentSlideRef.opacity(1)},0);if(e){e.bind("webkitTransitionEnd",function(){e.unbind("webkitTransitionEnd");c.destroySlide(e)});e.opacity(0)}},toDestroyList:null,
destroySlide:function(b){if(b)if(this.toDestroyList&&this.toDestroyList.length>0){this.toDestroyList.find("img").attr("src",H.emptyPixel.data);this.toDestroyList.removeData("slideData").remove();this.toDestroyList=b;ja.log("just destroyed old slides...")}else this.toDestroyList?this.toDestroyList=this.toDestroyList.add(b):this.toDestroyList=b}}),ab=Class.extend({ss:null,layoutManager:null,elementDescriptor:null,ui:null,currentGalleryObj:null,currentImageObj:null,currentSlideRef:null,imageChangeable:true,
childrenCreatedCount:0,slideHolder:null,styleName:"ImagesSwipeTouch",lockImages:false,layoutDirection:"horizontal",useScrollbars:false,preventFlicker:"auto",allowSwipe:true,scrollManager:null,init:function(b,c,e){this.ss=b;this.layoutManager=c;this.elementDescriptor=e;this.ss.imageManager.imageDisplayExists=true;this.preventFlicker=this.ss.styleManager.getStyle(this.styleName,"preventFlicker","false",this);if(!/auto|true|false/i.test(this.preventFlicker))this.preventFlicker="false";this.allowSwipe=
this.ss.styleManager.getStyle(this.styleName,"allowSwipe","true",this);this.createElement()},createElement:function(){var b=N.createSprite();this.slideHolder=b;this.ui=N.createSprite().css({overflow:this.useScrollbars?"auto":"hidden",position:"absolute"}).addClass("xfs4t_slideDisplay");this.ui.append(b);qa.setElementPositioning(this,this.ui,"f");b.css({position:"relative"});this.scrollManager=new iScroll(b[0],{desktopCompatibility:true,hScrollbar:false,momentum:true,snap:true,onSwipeStart:L.create(this,
this.events_onSwipeStart),onScrollEnd:L.create(this,this.events_onScrollEnd)});b.fadeIn();this.setupListeners();this.updateSwipeAllowed();if(this.ss.imageManager.currentGallery){this.events_setGallery();this.ss.imageManager.currentImage&&this.events_displayImage()}},setupListeners:function(){setTimeout(L.create(this,this.testForResize),100);var b=this,c=function(e){return L.create(b,e)};this.ss.eventDispatcher.bindObject([w.IMAGES_CLOSEGALLERY,c(this.events_closeGallery),w.IMAGES_SETGALLERY,c(this.events_setGallery),
w.IMAGES_GALLERYPRELOADCOMPLETE,c(this.events_galleryPreloadComplete),w.IMAGES_DISPLAYIMAGE,c(this.events_displayImage),w.IMAGES_SETIMAGECHANGEABLE,c(this.events_setChangeable),w.IMAGES_SYNCIMAGESSTART,c(this.events_syncImagesStart),w.IMAGES_SYNCIMAGES,c(this.events_syncImages)]);this.ss.eventDispatcher.bind(w.TOUCH_FULLSCREENCHANGE,function(){L.create(b,b.updateSwipeAllowed)()})},updateSwipeAllowed:function(){this.scrollManager.enabled=this.ss.fullScreenManager.fsEnabled&&this.allowSwipe!="false"},
getTouchEnabled:function(){return this.ss.fullScreenManager.fsEnabled&&this.allowSwipe!="false"},lastRenderW:NaN,lastRenderH:NaN,testForResize:function(){var b=this.ui.outerWidth(),c=this.ui.outerHeight();if(b!=this.lastRenderW||c!=this.lastRenderH){this.lastRenderW=b;this.lastRenderH=c;this.updateDisplayList(b,c)}setTimeout(L.create(this,this.testForResize),500)},updateDisplayList:function(b,c){var e=this.slideHolder.children().length,h=Math.ceil(Math.sqrt(e)),k=this,n=0,u=0;this.slideHolder.children().each(function(m){var s=
p(this);s.data("slideData").resize(b,c);if(k.layoutDirection=="horizontal")s.x(m*b).y(0);else if(k.layoutDirection=="vertical")s.x(0).y(m*c);else{var v=Math.floor(m/h);s.x(m%h*b).y(v*c)}n=Math.max(n,s.x()+b);u=Math.max(u,s.y()+c)});this.slideHolder.css({width:n,height:u});setTimeout(function(){k.scrollManager.refresh()},0);this.currentSlideRef&&this.currentSlideRef.length==1&&this.transitionToCurrentSlide()},events_onSwipeStart:function(){this.ss.stopAutoplay();this.currentSlideRef&&this.uninteractiveSlide(this.currentSlideRef)},
events_onScrollEnd:function(){try{var b=-(this.ui.scrollLeft()+this.scrollManager.x),c=Math.round(b/this.ui.outerWidth())}catch(e){return}if(this.currentGalleryObj&&this.currentImageObj&&c!=this.currentImageObj.id){b=this.currentGalleryObj.gallery.children().eq(c);b.length==1&&this.events_displayImage(null,{id:c,image:b},false)}},events_setChangeable:function(b,c){this.imageChangeable=c.value},events_closeGallery:function(){S.removeTweens(this,"holderX","holderY");this.currentGalleryObj=this.currentImageObj=
this.currentSlideRef=null;this.slideHolder.find("img").attr("src",H.emptyPixel.data);this.slideHolder.children().removeData("slideData").remove()},events_setGallery:function(b,c){this.events_closeGallery(null);this.currentGalleryObj=c?{id:c.id,gallery:c.gallery}:this.ss.imageManager.currentGallery;var e=this,h=this.currentGalleryObj.gallery.children().length;this.currentGalleryObj.gallery.children().each(function(k){var n=p(this);e.createImage({id:n.index(),image:n},k,h)});this.updateDisplayList(this.lastRenderW,
this.lastRenderH)},events_galleryPreloadComplete:function(){},events_displayImage:function(b,c,e){if(this.imageChangeable){this.currentImageObj=c?{id:c.id,image:c.image}:this.ss.imageManager.currentImage;this.currentSlideRef&&this.uninteractiveSlide(this.currentSlideRef);this.currentSlideRef=this.slideHolder.children().filter("[slideID=slide_"+this.currentImageObj.id+"]").first();if(this.currentSlideRef.length!=0){this.currentSlideRef.data("slideData").inactiveClickAreaEnabled=false;e!==false&&this.transitionToCurrentSlide();
setTimeout(L.create(this,this.tweenComplete_revealCurrentSlide),10);this.lockImages&&this.ss.eventDispatcher.trigger(w.IMAGES_SETIMAGECHANGEABLE,{target:this,value:false});b=this.currentSlideRef.data("slideData").imgDescriptor;this.ss.eventDispatcher.trigger(w.IMAGES_SYNCIMAGESSTART,{target:this,slideRef:this.currentSlideRef,id:b.id,image:b.image})}}},transitionToCurrentSlide:function(){var b=-this.currentSlideRef.x(),c=-this.currentSlideRef.y();this.updateDepthPerspective(this.currentSlideRef);this.scrollManager.scrollTo(b,
c)},tweenComplete_revealCurrentSlide:function(){if(this.currentSlideRef){var b=this.currentSlideRef.data("slideData").imgDescriptor;this.ss.eventDispatcher.trigger(w.IMAGES_SYNCIMAGES,{target:this,slideRef:this.currentSlideRef,id:b.id,image:b.image});this.lockImages&&this.ss.eventDispatcher.trigger(w.IMAGES_SETIMAGECHANGEABLE,{target:this,value:true})}},uninteractiveSlide:function(b){try{b.data("slideData").stopVideo();b.data("slideData").inactiveClickAreaEnabled=true}catch(c){ja.log("ImagesSwipeTouch.events_displayimage: trouble un-interactivating image... make sure up-to-date..."+
c.toString())}},events_syncImagesStart:function(){},events_syncImages:function(){},createImage:function(b,c,e){b=(new Wa(this.ss,b,this,this.lastRenderW,this.lastRenderH)).ui;if(this.preventFlicker=="true"||this.preventFlicker=="auto"||e<15)b.css({"-webkit-transform":"translate3d(0,0,0)"});b.attr({slideID:"slide_"+c});this.slideHolder.append(b)},holderX_get:function(){return Number(this.ui.scrollLeft())},holderX_set:function(b){this.ui.scrollLeft(b)},holderY_get:function(){return Number(this.ui.scrollTop())},
holderY_set:function(b){this.ui.scrollTop(b)},handleInactiveSlideClick:function(){},updateDepthPerspective:function(){}}),mb=Class.extend({staticBaker:null,paramManager:null,uiSetup:null,eventDispatcher:null,errorManager:null,modalManager:null,loaderManager:null,fullScreenManager:null,imageLibrary:null,xmlManager:null,styleManager:null,kbManager:null,imageManager:null,layoutManager:null,autoplayManager:null,audioManager:null,init:function(b){this.staticBaker=new Va;this.paramManager=new Ha(b);N.ss=
this;this.uiSetup=new F(this);this.eventDispatcher=this.uiSetup.holder;this.errorManager=new M(this);this.modalManager=new R(this);this.loaderManager=new f(this);this.fullScreenManager=new ma(this);this.imageLibrary=new Aa(this);this.xmlManager=b=new ta;b.listener=L.create(this,this.xmlStatusHandler);b.ss=this;b.startLoad(this.paramManager.getParam("xml"))},xmlStatusHandler:function(b){if(b.type!="loadStart")if(b.type=="loadEnd"){ja.log("DONE WITH LOADING.. End doc is: ",this.xmlManager.mainDoc);
this.eventDispatcher.trigger(w.DATA_XMLLOADED);this.styleManager=new t(this);this.kbManager=new J(this);this.imageManager=new jb(this);this.createLayoutManager();this.autoplayManager=new hb(this);this.audioManager=new Na}},createLayoutManager:function(){var b=this.paramManager.getParam("layoutXML","");if(b&&b!="")try{this.xmlManager.mainDoc.find("slideshow>touchui>views").replaceWith(p(b))}catch(c){this.staticBaker.SlideshowAlert.show("[Initialization Error]  Error occurred while applying passed layoutXML param.  Layout build may fail.  Details: "+
c.toString())}this.layoutManager=new Oa(this)},setGlobalStyles:function(b,c){this.styleManager.addExtraStyles(b,c)},stopAudio:function(b){if(b&&b!=""){b=b.split(",");for(var c=0;c<b.length;c++)this.eventDispatcher.trigger(w.AUDIO_SETSTATUSPLAYING,{target:this,level:b[c],value:false})}},startAudio:function(b){if(b&&b!=""){b=b.split(",");for(var c=0;c<b.length;c++)this.eventDispatcher.trigger(w.AUDIO_SETSTATUSPLAYING,{target:this,level:b[c],value:true})}},stopAutoplay:function(){this.eventDispatcher.trigger(w.AUTOPLAY_ENABLEDISABLE,
{value:false})},startAutoplay:function(){this.eventDispatcher.trigger(w.AUTOPLAY_ENABLEDISABLE,{value:true})}}),nb=Class.extend({init:function(b){new mb(b)}});window.XFS4Touch_create=function(b){new nb(b)}})();XFS4Touch=function(){var p=window.XFS4Touch_queue;if(p instanceof Array)for(;p.length>0;)window.XFS4Touch_create(p.shift())};XFS4Touch();
